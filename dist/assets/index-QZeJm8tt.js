var Bn=Object.defineProperty;var kn=(a,u,l)=>u in a?Bn(a,u,{enumerable:!0,configurable:!0,writable:!0,value:l}):a[u]=l;var x=(a,u,l)=>kn(a,typeof u!="symbol"?u+"":u,l);(function(){const u=document.createElement("link").relList;if(u&&u.supports&&u.supports("modulepreload"))return;for(const p of document.querySelectorAll('link[rel="modulepreload"]'))f(p);new MutationObserver(p=>{for(const v of p)if(v.type==="childList")for(const w of v.addedNodes)w.tagName==="LINK"&&w.rel==="modulepreload"&&f(w)}).observe(document,{childList:!0,subtree:!0});function l(p){const v={};return p.integrity&&(v.integrity=p.integrity),p.referrerPolicy&&(v.referrerPolicy=p.referrerPolicy),p.crossOrigin==="use-credentials"?v.credentials="include":p.crossOrigin==="anonymous"?v.credentials="omit":v.credentials="same-origin",v}function f(p){if(p.ep)return;p.ep=!0;const v=l(p);fetch(p.href,v)}})();var de=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},Gn={};(function(){var a;function u(t){var e=0;return function(){return e<t.length?{done:!1,value:t[e++]}:{done:!0}}}var l=typeof Object.defineProperties=="function"?Object.defineProperty:function(t,e,r){return t==Array.prototype||t==Object.prototype||(t[e]=r.value),t};function f(t){t=[typeof globalThis=="object"&&globalThis,t,typeof window=="object"&&window,typeof self=="object"&&self,typeof de=="object"&&de];for(var e=0;e<t.length;++e){var r=t[e];if(r&&r.Math==Math)return r}throw Error("Cannot find global object")}var p=f(this);function v(t,e){if(e)t:{var r=p;t=t.split(".");for(var n=0;n<t.length-1;n++){var i=t[n];if(!(i in r))break t;r=r[i]}t=t[t.length-1],n=r[t],e=e(n),e!=n&&e!=null&&l(r,t,{configurable:!0,writable:!0,value:e})}}v("Symbol",function(t){function e(s){if(this instanceof e)throw new TypeError("Symbol is not a constructor");return new r(n+(s||"")+"_"+i++,s)}function r(s,o){this.h=s,l(this,"description",{configurable:!0,writable:!0,value:o})}if(t)return t;r.prototype.toString=function(){return this.h};var n="jscomp_symbol_"+(1e9*Math.random()>>>0)+"_",i=0;return e}),v("Symbol.iterator",function(t){if(t)return t;t=Symbol("Symbol.iterator");for(var e="Array Int8Array Uint8Array Uint8ClampedArray Int16Array Uint16Array Int32Array Uint32Array Float32Array Float64Array".split(" "),r=0;r<e.length;r++){var n=p[e[r]];typeof n=="function"&&typeof n.prototype[t]!="function"&&l(n.prototype,t,{configurable:!0,writable:!0,value:function(){return w(u(this))}})}return t});function w(t){return t={next:t},t[Symbol.iterator]=function(){return this},t}function b(t){var e=typeof Symbol<"u"&&Symbol.iterator&&t[Symbol.iterator];return e?e.call(t):{next:u(t)}}function P(t){if(!(t instanceof Array)){t=b(t);for(var e,r=[];!(e=t.next()).done;)r.push(e.value);t=r}return t}var V=typeof Object.assign=="function"?Object.assign:function(t,e){for(var r=1;r<arguments.length;r++){var n=arguments[r];if(n)for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i])}return t};v("Object.assign",function(t){return t||V});var _t=typeof Object.create=="function"?Object.create:function(t){function e(){}return e.prototype=t,new e},nt;if(typeof Object.setPrototypeOf=="function")nt=Object.setPrototypeOf;else{var Z;t:{var J={a:!0},At={};try{At.__proto__=J,Z=At.a;break t}catch{}Z=!1}nt=Z?function(t,e){if(t.__proto__=e,t.__proto__!==e)throw new TypeError(t+" is not extensible");return t}:null}var D=nt;function at(t,e){if(t.prototype=_t(e.prototype),t.prototype.constructor=t,D)D(t,e);else for(var r in e)if(r!="prototype")if(Object.defineProperties){var n=Object.getOwnPropertyDescriptor(e,r);n&&Object.defineProperty(t,r,n)}else t[r]=e[r];t.ya=e.prototype}function Lt(){this.m=!1,this.j=null,this.i=void 0,this.h=1,this.v=this.s=0,this.l=null}function zt(t){if(t.m)throw new TypeError("Generator is already running");t.m=!0}Lt.prototype.u=function(t){this.i=t};function Wt(t,e){t.l={ma:e,na:!0},t.h=t.s||t.v}Lt.prototype.return=function(t){this.l={return:t},this.h=this.v};function F(t,e,r){return t.h=r,{value:e}}function kr(t){this.h=new Lt,this.i=t}function Gr(t,e){zt(t.h);var r=t.h.j;return r?Yt(t,"return"in r?r.return:function(n){return{value:n,done:!0}},e,t.h.return):(t.h.return(e),ct(t))}function Yt(t,e,r,n){try{var i=e.call(t.h.j,r);if(!(i instanceof Object))throw new TypeError("Iterator result "+i+" is not an object");if(!i.done)return t.h.m=!1,i;var s=i.value}catch(o){return t.h.j=null,Wt(t.h,o),ct(t)}return t.h.j=null,n.call(t.h,s),ct(t)}function ct(t){for(;t.h.h;)try{var e=t.i(t.h);if(e)return t.h.m=!1,{value:e.value,done:!1}}catch(r){t.h.i=void 0,Wt(t.h,r)}if(t.h.m=!1,t.h.l){if(e=t.h.l,t.h.l=null,e.na)throw e.ma;return{value:e.return,done:!0}}return{value:void 0,done:!0}}function Lr(t){this.next=function(e){return zt(t.h),t.h.j?e=Yt(t,t.h.j.next,e,t.h.u):(t.h.u(e),e=ct(t)),e},this.throw=function(e){return zt(t.h),t.h.j?e=Yt(t,t.h.j.throw,e,t.h.u):(Wt(t.h,e),e=ct(t)),e},this.return=function(e){return Gr(t,e)},this[Symbol.iterator]=function(){return this}}function zr(t){function e(n){return t.next(n)}function r(n){return t.throw(n)}return new Promise(function(n,i){function s(o){o.done?n(o.value):Promise.resolve(o.value).then(e,r).then(s,i)}s(t.next())})}function C(t){return zr(new Lr(new kr(t)))}v("Promise",function(t){function e(o){this.i=0,this.j=void 0,this.h=[],this.u=!1;var c=this.l();try{o(c.resolve,c.reject)}catch(h){c.reject(h)}}function r(){this.h=null}function n(o){return o instanceof e?o:new e(function(c){c(o)})}if(t)return t;r.prototype.i=function(o){if(this.h==null){this.h=[];var c=this;this.j(function(){c.m()})}this.h.push(o)};var i=p.setTimeout;r.prototype.j=function(o){i(o,0)},r.prototype.m=function(){for(;this.h&&this.h.length;){var o=this.h;this.h=[];for(var c=0;c<o.length;++c){var h=o[c];o[c]=null;try{h()}catch(d){this.l(d)}}}this.h=null},r.prototype.l=function(o){this.j(function(){throw o})},e.prototype.l=function(){function o(d){return function(y){h||(h=!0,d.call(c,y))}}var c=this,h=!1;return{resolve:o(this.I),reject:o(this.m)}},e.prototype.I=function(o){if(o===this)this.m(new TypeError("A Promise cannot resolve to itself"));else if(o instanceof e)this.L(o);else{t:switch(typeof o){case"object":var c=o!=null;break t;case"function":c=!0;break t;default:c=!1}c?this.F(o):this.s(o)}},e.prototype.F=function(o){var c=void 0;try{c=o.then}catch(h){this.m(h);return}typeof c=="function"?this.M(c,o):this.s(o)},e.prototype.m=function(o){this.v(2,o)},e.prototype.s=function(o){this.v(1,o)},e.prototype.v=function(o,c){if(this.i!=0)throw Error("Cannot settle("+o+", "+c+"): Promise already settled in state"+this.i);this.i=o,this.j=c,this.i===2&&this.K(),this.H()},e.prototype.K=function(){var o=this;i(function(){if(o.D()){var c=p.console;typeof c<"u"&&c.error(o.j)}},1)},e.prototype.D=function(){if(this.u)return!1;var o=p.CustomEvent,c=p.Event,h=p.dispatchEvent;return typeof h>"u"?!0:(typeof o=="function"?o=new o("unhandledrejection",{cancelable:!0}):typeof c=="function"?o=new c("unhandledrejection",{cancelable:!0}):(o=p.document.createEvent("CustomEvent"),o.initCustomEvent("unhandledrejection",!1,!0,o)),o.promise=this,o.reason=this.j,h(o))},e.prototype.H=function(){if(this.h!=null){for(var o=0;o<this.h.length;++o)s.i(this.h[o]);this.h=null}};var s=new r;return e.prototype.L=function(o){var c=this.l();o.T(c.resolve,c.reject)},e.prototype.M=function(o,c){var h=this.l();try{o.call(c,h.resolve,h.reject)}catch(d){h.reject(d)}},e.prototype.then=function(o,c){function h(g,m){return typeof g=="function"?function(_){try{d(g(_))}catch(A){y(A)}}:m}var d,y,E=new e(function(g,m){d=g,y=m});return this.T(h(o,d),h(c,y)),E},e.prototype.catch=function(o){return this.then(void 0,o)},e.prototype.T=function(o,c){function h(){switch(d.i){case 1:o(d.j);break;case 2:c(d.j);break;default:throw Error("Unexpected state: "+d.i)}}var d=this;this.h==null?s.i(h):this.h.push(h),this.u=!0},e.resolve=n,e.reject=function(o){return new e(function(c,h){h(o)})},e.race=function(o){return new e(function(c,h){for(var d=b(o),y=d.next();!y.done;y=d.next())n(y.value).T(c,h)})},e.all=function(o){var c=b(o),h=c.next();return h.done?n([]):new e(function(d,y){function E(_){return function(A){g[_]=A,m--,m==0&&d(g)}}var g=[],m=0;do g.push(void 0),m++,n(h.value).T(E(g.length-1),y),h=c.next();while(!h.done)})},e});function Wr(t,e){t instanceof String&&(t+="");var r=0,n=!1,i={next:function(){if(!n&&r<t.length){var s=r++;return{value:e(s,t[s]),done:!1}}return n=!0,{done:!0,value:void 0}}};return i[Symbol.iterator]=function(){return i},i}v("Array.prototype.keys",function(t){return t||function(){return Wr(this,function(e){return e})}}),v("Array.prototype.fill",function(t){return t||function(e,r,n){var i=this.length||0;for(0>r&&(r=Math.max(0,i+r)),(n==null||n>i)&&(n=i),n=Number(n),0>n&&(n=Math.max(0,i+n)),r=Number(r||0);r<n;r++)this[r]=e;return this}});function K(t){return t||Array.prototype.fill}v("Int8Array.prototype.fill",K),v("Uint8Array.prototype.fill",K),v("Uint8ClampedArray.prototype.fill",K),v("Int16Array.prototype.fill",K),v("Uint16Array.prototype.fill",K),v("Int32Array.prototype.fill",K),v("Uint32Array.prototype.fill",K),v("Float32Array.prototype.fill",K),v("Float64Array.prototype.fill",K),v("Object.is",function(t){return t||function(e,r){return e===r?e!==0||1/e===1/r:e!==e&&r!==r}}),v("Array.prototype.includes",function(t){return t||function(e,r){var n=this;n instanceof String&&(n=String(n));var i=n.length;for(r=r||0,0>r&&(r=Math.max(r+i,0));r<i;r++){var s=n[r];if(s===e||Object.is(s,e))return!0}return!1}}),v("String.prototype.includes",function(t){return t||function(e,r){if(this==null)throw new TypeError("The 'this' value for String.prototype.includes must not be null or undefined");if(e instanceof RegExp)throw new TypeError("First argument to String.prototype.includes must not be a regular expression");return this.indexOf(e,r||0)!==-1}});var Xt=this||self;function ft(t,e){t=t.split(".");var r=Xt;t[0]in r||typeof r.execScript>"u"||r.execScript("var "+t[0]);for(var n;t.length&&(n=t.shift());)t.length||e===void 0?r[n]&&r[n]!==Object.prototype[n]?r=r[n]:r=r[n]={}:r[n]=e}function _e(t){var e;t:{if((e=Xt.navigator)&&(e=e.userAgent))break t;e=""}return e.indexOf(t)!=-1}var Yr=Array.prototype.map?function(t,e){return Array.prototype.map.call(t,e,void 0)}:function(t,e){for(var r=t.length,n=Array(r),i=typeof t=="string"?t.split(""):t,s=0;s<r;s++)s in i&&(n[s]=e.call(void 0,i[s],s,t));return n},Ae={},ht=null;function Xr(t){var e=t.length,r=3*e/4;r%3?r=Math.floor(r):"=.".indexOf(t[e-1])!=-1&&(r="=.".indexOf(t[e-2])!=-1?r-2:r-1);var n=new Uint8Array(r),i=0;return Vr(t,function(s){n[i++]=s}),i!==r?n.subarray(0,i):n}function Vr(t,e){function r(h){for(;n<t.length;){var d=t.charAt(n++),y=ht[d];if(y!=null)return y;if(!/^[\s\xa0]*$/.test(d))throw Error("Unknown base64 encoding at char: "+d)}return h}xe();for(var n=0;;){var i=r(-1),s=r(0),o=r(64),c=r(64);if(c===64&&i===-1)break;e(i<<2|s>>4),o!=64&&(e(s<<4&240|o>>2),c!=64&&e(o<<6&192|c))}}function xe(){if(!ht){ht={};for(var t="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789".split(""),e=["+/=","+/","-_=","-_.","-_"],r=0;5>r;r++){var n=t.concat(e[r].split(""));Ae[r]=n;for(var i=0;i<n.length;i++){var s=n[i];ht[s]===void 0&&(ht[s]=i)}}}}var Vt=typeof Uint8Array<"u",Ie=!(_e("Trident")||_e("MSIE"))&&typeof Xt.btoa=="function";function Te(t){if(!Ie){var e;e===void 0&&(e=0),xe(),e=Ae[e];for(var r=Array(Math.floor(t.length/3)),n=e[64]||"",i=0,s=0;i<t.length-2;i+=3){var o=t[i],c=t[i+1],h=t[i+2],d=e[o>>2];o=e[(o&3)<<4|c>>4],c=e[(c&15)<<2|h>>6],h=e[h&63],r[s++]=d+o+c+h}switch(d=0,h=n,t.length-i){case 2:d=t[i+1],h=e[(d&15)<<2]||n;case 1:t=t[i],r[s]=e[t>>2]+e[(t&3)<<4|d>>4]+h+n}return r.join("")}for(e="";10240<t.length;)e+=String.fromCharCode.apply(null,t.subarray(0,10240)),t=t.subarray(10240);return e+=String.fromCharCode.apply(null,t),btoa(e)}var Se=RegExp("[-_.]","g");function Kr(t){switch(t){case"-":return"+";case"_":return"/";case".":return"=";default:return""}}function Pe(t){if(!Ie)return Xr(t);Se.test(t)&&(t=t.replace(Se,Kr)),t=atob(t);for(var e=new Uint8Array(t.length),r=0;r<t.length;r++)e[r]=t.charCodeAt(r);return e}var Oe;function Kt(){return Oe||(Oe=new Uint8Array(0))}var pt={},Hr=typeof Uint8Array.prototype.slice=="function",j=0,M=0;function Fe(t){var e=0>t;t=Math.abs(t);var r=t>>>0;t=Math.floor((t-r)/4294967296),e&&(r=b(je(r,t)),e=r.next().value,t=r.next().value,r=e),j=r>>>0,M=t>>>0}var $r=typeof BigInt=="function";function je(t,e){return e=~e,t?t=~t+1:e+=1,[t,e]}function Re(t,e){this.i=t>>>0,this.h=e>>>0}function Ne(t){if(!t)return Ce||(Ce=new Re(0,0));if(!/^-?\d+$/.test(t))return null;if(16>t.length)Fe(Number(t));else if($r)t=BigInt(t),j=Number(t&BigInt(4294967295))>>>0,M=Number(t>>BigInt(32)&BigInt(4294967295));else{var e=+(t[0]==="-");M=j=0;for(var r=t.length,n=e,i=(r-e)%6+e;i<=r;n=i,i+=6)n=Number(t.slice(n,i)),M*=1e6,j=1e6*j+n,4294967296<=j&&(M+=j/4294967296|0,j%=4294967296);e&&(e=b(je(j,M)),t=e.next().value,e=e.next().value,j=t,M=e)}return new Re(j,M)}var Ce;function Me(t,e){return Error("Invalid wire type: "+t+" (at position "+e+")")}function Ht(){return Error("Failed to read varint, encoding is invalid.")}function De(t,e){return Error("Tried to read past the end of the data "+e+" > "+t)}function q(){throw Error("Invalid UTF8")}function Ue(t,e){return e=String.fromCharCode.apply(null,e),t==null?e:t+e}var xt=void 0,$t,Zr=typeof TextDecoder<"u",Be,Qr=typeof TextEncoder<"u",ke;function Ge(t){if(t!==pt)throw Error("illegal external caller")}function dt(t,e){if(Ge(e),this.V=t,t!=null&&t.length===0)throw Error("ByteString should be constructed with non-empty values")}function Zt(){return ke||(ke=new dt(null,pt))}function Le(t){Ge(pt);var e=t.V;return e=e==null||Vt&&e!=null&&e instanceof Uint8Array?e:typeof e=="string"?Pe(e):null,e==null?e:t.V=e}function Jr(t){if(typeof t=="string")return{buffer:Pe(t),C:!1};if(Array.isArray(t))return{buffer:new Uint8Array(t),C:!1};if(t.constructor===Uint8Array)return{buffer:t,C:!1};if(t.constructor===ArrayBuffer)return{buffer:new Uint8Array(t),C:!1};if(t.constructor===dt)return{buffer:Le(t)||Kt(),C:!0};if(t instanceof Uint8Array)return{buffer:new Uint8Array(t.buffer,t.byteOffset,t.byteLength),C:!1};throw Error("Type not convertible to a Uint8Array, expected a Uint8Array, an ArrayBuffer, a base64 encoded string, a ByteString or an Array of numbers")}function ze(t,e){this.i=null,this.m=!1,this.h=this.j=this.l=0,Qt(this,t,e)}function Qt(t,e,r){r=r===void 0?{}:r,t.S=r.S===void 0?!1:r.S,e&&(e=Jr(e),t.i=e.buffer,t.m=e.C,t.l=0,t.j=t.i.length,t.h=t.l)}ze.prototype.reset=function(){this.h=this.l};function tt(t,e){if(t.h=e,e>t.j)throw De(t.j,e)}function vt(t){var e=t.i,r=t.h,n=e[r++],i=n&127;if(n&128&&(n=e[r++],i|=(n&127)<<7,n&128&&(n=e[r++],i|=(n&127)<<14,n&128&&(n=e[r++],i|=(n&127)<<21,n&128&&(n=e[r++],i|=n<<28,n&128&&e[r++]&128&&e[r++]&128&&e[r++]&128&&e[r++]&128&&e[r++]&128)))))throw Ht();return tt(t,r),i}function We(t,e){if(0>e)throw Error("Tried to read a negative byte length: "+e);var r=t.h,n=r+e;if(n>t.j)throw De(e,t.j-r);return t.h=n,r}var Ye=[];function Jt(){this.h=[]}Jt.prototype.length=function(){return this.h.length},Jt.prototype.end=function(){var t=this.h;return this.h=[],t};function Xe(t,e,r){for(;0<r||127<e;)t.h.push(e&127|128),e=(e>>>7|r<<25)>>>0,r>>>=7;t.h.push(e)}function et(t,e){for(;127<e;)t.h.push(e&127|128),e>>>=7;t.h.push(e)}function qt(t,e){if(Ye.length){var r=Ye.pop();Qt(r,t,e),t=r}else t=new ze(t,e);this.h=t,this.j=this.h.h,this.i=this.l=-1,this.setOptions(e)}qt.prototype.setOptions=function(t){t=t===void 0?{}:t,this.ca=t.ca===void 0?!1:t.ca},qt.prototype.reset=function(){this.h.reset(),this.j=this.h.h,this.i=this.l=-1};function Ve(t){var e=t.h;if(e.h==e.j)return!1;t.j=t.h.h;var r=vt(t.h)>>>0;if(e=r>>>3,r&=7,!(0<=r&&5>=r))throw Me(r,t.j);if(1>e)throw Error("Invalid field number: "+e+" (at position "+t.j+")");return t.l=e,t.i=r,!0}function It(t){switch(t.i){case 0:if(t.i!=0)It(t);else t:{t=t.h;for(var e=t.h,r=e+10,n=t.i;e<r;)if(!(n[e++]&128)){tt(t,e);break t}throw Ht()}break;case 1:t=t.h,tt(t,t.h+8);break;case 2:t.i!=2?It(t):(e=vt(t.h)>>>0,t=t.h,tt(t,t.h+e));break;case 5:t=t.h,tt(t,t.h+4);break;case 3:e=t.l;do{if(!Ve(t))throw Error("Unmatched start-group tag: stream EOF");if(t.i==4){if(t.l!=e)throw Error("Unmatched end-group tag");break}It(t)}while(!0);break;default:throw Me(t.i,t.j)}}var Tt=[];function qr(){this.j=[],this.i=0,this.h=new Jt}function it(t,e){e.length!==0&&(t.j.push(e),t.i+=e.length)}function tn(t,e){if(e=e.R){it(t,t.h.end());for(var r=0;r<e.length;r++)it(t,Le(e[r])||Kt())}}var H=typeof Symbol=="function"&&typeof Symbol()=="symbol"?Symbol():void 0;function rt(t,e){return H?t[H]|=e:t.A!==void 0?t.A|=e:(Object.defineProperties(t,{A:{value:e,configurable:!0,writable:!0,enumerable:!1}}),e)}function Ke(t,e){H?t[H]&&(t[H]&=~e):t.A!==void 0&&(t.A&=~e)}function O(t){var e;return H?e=t[H]:e=t.A,e??0}function z(t,e){H?t[H]=e:t.A!==void 0?t.A=e:Object.defineProperties(t,{A:{value:e,configurable:!0,writable:!0,enumerable:!1}})}function te(t){return rt(t,1),t}function en(t,e){z(e,(t|0)&-51)}function St(t,e){z(e,(t|18)&-41)}var ee={};function Pt(t){return t!==null&&typeof t=="object"&&!Array.isArray(t)&&t.constructor===Object}var yt,He=[];z(He,23),yt=Object.freeze(He);function re(t){if(O(t.o)&2)throw Error("Cannot mutate an immutable Message")}function ne(t){var e=t.length;(e=e?t[e-1]:void 0)&&Pt(e)?e.g=1:(e={},t.push((e.g=1,e)))}function $e(t){var e=t.i+t.G;return t.B||(t.B=t.o[e]={})}function G(t,e){return e===-1?null:e>=t.i?t.B?t.B[e]:void 0:t.o[e+t.G]}function W(t,e,r,n){re(t),mt(t,e,r,n)}function mt(t,e,r,n){t.j&&(t.j=void 0),e>=t.i||n?$e(t)[e]=r:(t.o[e+t.G]=r,(t=t.B)&&e in t&&delete t[e])}function ie(t,e,r,n){var i=G(t,e);Array.isArray(i)||(i=yt);var s=O(i);if(s&1||te(i),n)s&2||rt(i,2),r&1||Object.freeze(i);else{n=!(r&2);var o=s&2;r&1||!o?n&&s&16&&!o&&Ke(i,16):(i=te(Array.prototype.slice.call(i)),mt(t,e,i))}return i}function oe(t,e){var r=G(t,e),n=r==null?r:typeof r=="number"||r==="NaN"||r==="Infinity"||r==="-Infinity"?Number(r):void 0;return n!=null&&n!==r&&mt(t,e,n),n}function Ze(t,e,r,n,i){t.h||(t.h={});var s=t.h[r],o=ie(t,r,3,i);if(!s){var c=o;s=[];var h=!!(O(t.o)&16);o=!!(O(c)&2);var d=c;!i&&o&&(c=Array.prototype.slice.call(c));for(var y=o,E=0;E<c.length;E++){var g=c[E],m=e,_=!1;if(_=_===void 0?!1:_,g=Array.isArray(g)?new m(g):_?new m:void 0,g!==void 0){m=g.o;var A=_=O(m);o&&(A|=2),h&&(A|=16),A!=_&&z(m,A),m=A,y=y||!!(2&m),s.push(g)}}return t.h[r]=s,h=O(c),e=h|33,e=y?e&-9:e|8,h!=e&&(y=c,Object.isFrozen(y)&&(y=Array.prototype.slice.call(y)),z(y,e),c=y),d!==c&&mt(t,r,c),(i||n&&o)&&rt(s,2),n&&Object.freeze(s),s}return i||(i=Object.isFrozen(s),n&&!i?Object.freeze(s):!n&&i&&(s=Array.prototype.slice.call(s),t.h[r]=s)),s}function Ot(t,e,r){var n=!!(O(t.o)&2);if(e=Ze(t,e,r,n,n),t=ie(t,r,3,n),!(n||O(t)&8)){for(n=0;n<e.length;n++){if(r=e[n],O(r.o)&2){var i=rr(r,!1);i.j=r}else i=r;r!==i&&(e[n]=i,t[n]=i.o)}rt(t,8)}return e}function Y(t,e,r){if(r!=null&&typeof r!="number")throw Error("Value of float/double field must be a number|null|undefined, found "+typeof r+": "+r);W(t,e,r)}function Qe(t,e,r,n,i){re(t);var s=Ze(t,r,e,!1,!1);return r=n??new r,t=ie(t,e,2,!1),i!=null?(s.splice(i,0,r),t.splice(i,0,r.o)):(s.push(r),t.push(r.o)),r.C()&&Ke(t,8),r}function Ft(t,e){return t??e}function X(t,e,r){return r=r===void 0?0:r,Ft(oe(t,e),r)}var jt;function rn(t){switch(typeof t){case"number":return isFinite(t)?t:String(t);case"object":if(t)if(Array.isArray(t)){if(O(t)&128)return t=Array.prototype.slice.call(t),ne(t),t}else{if(Vt&&t!=null&&t instanceof Uint8Array)return Te(t);if(t instanceof dt){var e=t.V;return e==null?"":typeof e=="string"?e:t.V=Te(e)}}}return t}function Je(t,e,r,n){if(t!=null){if(Array.isArray(t))t=se(t,e,r,n!==void 0);else if(Pt(t)){var i={},s;for(s in t)i[s]=Je(t[s],e,r,n);t=i}else t=e(t,n);return t}}function se(t,e,r,n){var i=O(t);n=n?!!(i&16):void 0,t=Array.prototype.slice.call(t);for(var s=0;s<t.length;s++)t[s]=Je(t[s],e,r,n);return r(i,t),t}function nn(t){return t.ja===ee?t.toJSON():rn(t)}function on(t,e){t&128&&ne(e)}function qe(t,e,r){if(r=r===void 0?St:r,t!=null){if(Vt&&t instanceof Uint8Array)return t.length?new dt(new Uint8Array(t),pt):Zt();if(Array.isArray(t)){var n=O(t);return n&2?t:e&&!(n&32)&&(n&16||n===0)?(z(t,n|2),t):(t=se(t,qe,n&4?St:r,!0),e=O(t),e&4&&e&2&&Object.freeze(t),t)}return t.ja===ee?er(t):t}}function tr(t,e,r,n,i,s,o){if(t=t.h&&t.h[r]){if(n=O(t),n&2?n=t:(s=Yr(t,er),St(n,s),Object.freeze(s),n=s),re(e),o=n==null?yt:te([]),n!=null){for(s=!!n.length,t=0;t<n.length;t++){var c=n[t];s=s&&!(O(c.o)&2),o[t]=c.o}s=(s?8:0)|1,t=O(o),(t&s)!==s&&(Object.isFrozen(o)&&(o=Array.prototype.slice.call(o)),z(o,t|s)),e.h||(e.h={}),e.h[r]=n}else e.h&&(e.h[r]=void 0);mt(e,r,o,i)}else W(e,r,qe(n,s,o),i)}function er(t){return O(t.o)&2||(t=rr(t,!0),rt(t.o,2)),t}function rr(t,e){var r=t.o,n=[];rt(n,16);var i=t.constructor.h;if(i&&n.push(i),i=t.B,i){n.length=r.length,n.fill(void 0,n.length,r.length);var s={};n[n.length-1]=s}O(r)&128&&ne(n),e=e||t.C()?St:en,s=t.constructor,jt=n,n=new s(n),jt=void 0,t.R&&(n.R=t.R.slice()),s=!!(O(r)&16);for(var o=i?r.length-1:r.length,c=0;c<o;c++)tr(t,n,c-t.G,r[c],!1,s,e);if(i)for(var h in i)tr(t,n,+h,i[h],!0,s,e);return n}function U(t,e,r){t==null&&(t=jt),jt=void 0;var n=this.constructor.i||0,i=0<n,s=this.constructor.h,o=!1;if(t==null){t=s?[s]:[];var c=48,h=!0;i&&(n=0,c|=128),z(t,c)}else{if(!Array.isArray(t)||s&&s!==t[0])throw Error();var d=c=rt(t,0);if((h=(16&d)!==0)&&((o=(32&d)!==0)||(d|=32)),i){if(128&d)n=0;else if(0<t.length){var y=t[t.length-1];if(Pt(y)&&"g"in y){n=0,d|=128,delete y.g;var E=!0,g;for(g in y){E=!1;break}E&&t.pop()}}}else if(128&d)throw Error();c!==d&&z(t,d)}this.G=(s?0:-1)-n,this.h=void 0,this.o=t;t:{if(s=this.o.length,n=s-1,s&&(s=this.o[n],Pt(s))){this.B=s,this.i=n-this.G;break t}e!==void 0&&-1<e?(this.i=Math.max(e,n+1-this.G),this.B=void 0):this.i=Number.MAX_VALUE}if(!i&&this.B&&"g"in this.B)throw Error('Unexpected "g" flag in sparse object of message that is not a group type.');if(r){e=h&&!o&&!0,i=this.i;var m;for(h=0;h<r.length;h++)o=r[h],o<i?(o+=this.G,(n=t[o])?nr(n,e):t[o]=yt):(m||(m=$e(this)),(n=m[o])?nr(n,e):m[o]=yt)}}U.prototype.toJSON=function(){return se(this.o,nn,on)},U.prototype.C=function(){return!!(O(this.o)&2)};function nr(t,e){if(Array.isArray(t)){var r=O(t),n=1;!e||r&2||(n|=16),(r&n)!==n&&z(t,r|n)}}U.prototype.ja=ee,U.prototype.toString=function(){return this.o.toString()};function ir(t,e,r){if(r){var n={},i;for(i in r){var s=r[i],o=s.qa;o||(n.J=s.wa||s.oa.W,s.ia?(n.aa=ar(s.ia),o=function(c){return function(h,d,y){return c.J(h,d,y,c.aa)}}(n)):s.ka?(n.Z=cr(s.da.P,s.ka),o=function(c){return function(h,d,y){return c.J(h,d,y,c.Z)}}(n)):o=n.J,s.qa=o),o(e,t,s.da),n={J:n.J,aa:n.aa,Z:n.Z}}}tn(e,t)}var Rt=Symbol();function or(t,e,r){return t[Rt]||(t[Rt]=function(n,i){return e(n,i,r)})}function sr(t){var e=t[Rt];if(!e){var r=le(t);e=function(n,i){return fr(n,i,r)},t[Rt]=e}return e}function sn(t){var e=t.ia;if(e)return sr(e);if(e=t.va)return or(t.da.P,e,t.ka)}function un(t){var e=sn(t),r=t.da,n=t.oa.U;return e?function(i,s){return n(i,s,r,e)}:function(i,s){return n(i,s,r)}}function ur(t,e){var r=t[e];return typeof r=="function"&&r.length===0&&(r=r(),t[e]=r),Array.isArray(r)&&(wt in r||gt in r||0<r.length&&typeof r[0]=="function")?r:void 0}function lr(t,e,r,n,i,s){e.P=t[0];var o=1;if(t.length>o&&typeof t[o]!="number"){var c=t[o++];r(e,c)}for(;o<t.length;){r=t[o++];for(var h=o+1;h<t.length&&typeof t[h]!="number";)h++;switch(c=t[o++],h-=o,h){case 0:n(e,r,c);break;case 1:(h=ur(t,o))?(o++,i(e,r,c,h)):n(e,r,c,t[o++]);break;case 2:h=o++,h=ur(t,h),i(e,r,c,h,t[o++]);break;case 3:s(e,r,c,t[o++],t[o++],t[o++]);break;case 4:s(e,r,c,t[o++],t[o++],t[o++],t[o++]);break;default:throw Error("unexpected number of binary field arguments: "+h)}}return e}var Nt=Symbol();function ar(t){var e=t[Nt];if(!e){var r=ue(t);e=function(n,i){return hr(n,i,r)},t[Nt]=e}return e}function cr(t,e){var r=t[Nt];return r||(r=function(n,i){return ir(n,i,e)},t[Nt]=r),r}var gt=Symbol();function ln(t,e){t.push(e)}function an(t,e,r){t.push(e,r.W)}function cn(t,e,r,n){var i=ar(n),s=ue(n).P,o=r.W;t.push(e,function(c,h,d){return o(c,h,d,s,i)})}function fn(t,e,r,n,i,s){var o=cr(n,s),c=r.W;t.push(e,function(h,d,y){return c(h,d,y,n,o)})}function ue(t){var e=t[gt];return e||(e=lr(t,t[gt]=[],ln,an,cn,fn),wt in t&&gt in t&&(t.length=0),e)}var wt=Symbol();function hn(t,e){t[0]=e}function pn(t,e,r,n){var i=r.U;t[e]=n?function(s,o,c){return i(s,o,c,n)}:i}function dn(t,e,r,n,i){var s=r.U,o=sr(n),c=le(n).P;t[e]=function(h,d,y){return s(h,d,y,c,o,i)}}function vn(t,e,r,n,i,s,o){var c=r.U,h=or(n,i,s);t[e]=function(d,y,E){return c(d,y,E,n,h,o)}}function le(t){var e=t[wt];return e||(e=lr(t,t[wt]={},hn,pn,dn,vn),wt in t&&gt in t&&(t.length=0),e)}function fr(t,e,r){for(;Ve(e)&&e.i!=4;){var n=e.l,i=r[n];if(!i){var s=r[0];s&&(s=s[n])&&(i=r[n]=un(s))}if(!i||!i(e,t,n)){i=e,n=t,s=i.j,It(i);var o=i;if(!o.ca){if(i=o.h.h-s,o.h.h=s,o=o.h,i==0)i=Zt();else{if(s=We(o,i),o.S&&o.m)i=o.i.subarray(s,s+i);else{o=o.i;var c=s;i=s+i,i=c===i?Kt():Hr?o.slice(c,i):new Uint8Array(o.subarray(c,i))}i=i.length==0?Zt():new dt(i,pt)}(s=n.R)?s.push(i):n.R=[i]}}}return t}function hr(t,e,r){for(var n=r.length,i=n%2==1,s=i?1:0;s<n;s+=2)(0,r[s+1])(e,t,r[s]);ir(t,e,i?r[0]:void 0)}function bt(t,e){return{U:t,W:e}}var L=bt(function(t,e,r){if(t.i!==5)return!1;t=t.h;var n=t.i,i=t.h,s=n[i],o=n[i+1],c=n[i+2];return n=n[i+3],tt(t,t.h+4),o=(s<<0|o<<8|c<<16|n<<24)>>>0,t=2*(o>>31)+1,s=o>>>23&255,o&=8388607,W(e,r,s==255?o?NaN:1/0*t:s==0?t*Math.pow(2,-149)*o:t*Math.pow(2,s-150)*(o+Math.pow(2,23))),!0},function(t,e,r){if(e=oe(e,r),e!=null){et(t.h,8*r+5),t=t.h;var n=+e;n===0?0<1/n?j=M=0:(M=0,j=2147483648):isNaN(n)?(M=0,j=2147483647):(n=(r=0>n?-2147483648:0)?-n:n,34028234663852886e22<n?(M=0,j=(r|2139095040)>>>0):11754943508222875e-54>n?(n=Math.round(n/Math.pow(2,-149)),M=0,j=(r|n)>>>0):(e=Math.floor(Math.log(n)/Math.LN2),n*=Math.pow(2,-e),n=Math.round(8388608*n),16777216<=n&&++e,M=0,j=(r|e+127<<23|n&8388607)>>>0)),r=j,t.h.push(r>>>0&255),t.h.push(r>>>8&255),t.h.push(r>>>16&255),t.h.push(r>>>24&255)}}),yn=bt(function(t,e,r){if(t.i!==0)return!1;var n=t.h,i=0,s=t=0,o=n.i,c=n.h;do{var h=o[c++];i|=(h&127)<<s,s+=7}while(32>s&&h&128);for(32<s&&(t|=(h&127)>>4),s=3;32>s&&h&128;s+=7)h=o[c++],t|=(h&127)<<s;if(tt(n,c),128>h)n=i>>>0,h=t>>>0,(t=h&2147483648)&&(n=~n+1>>>0,h=~h>>>0,n==0&&(h=h+1>>>0)),n=4294967296*h+(n>>>0);else throw Ht();return W(e,r,t?-n:n),!0},function(t,e,r){e=G(e,r),e!=null&&(typeof e=="string"&&Ne(e),e!=null&&(et(t.h,8*r),typeof e=="number"?(t=t.h,Fe(e),Xe(t,j,M)):(r=Ne(e),Xe(t.h,r.i,r.h))))}),mn=bt(function(t,e,r){return t.i!==0?!1:(W(e,r,vt(t.h)),!0)},function(t,e,r){if(e=G(e,r),e!=null&&e!=null)if(et(t.h,8*r),t=t.h,r=e,0<=r)et(t,r);else{for(e=0;9>e;e++)t.h.push(r&127|128),r>>=7;t.h.push(1)}}),pr=bt(function(t,e,r){if(t.i!==2)return!1;var n=vt(t.h)>>>0;t=t.h;var i=We(t,n);if(t=t.i,Zr){var s=t,o;(o=$t)||(o=$t=new TextDecoder("utf-8",{fatal:!0})),t=i+n,s=i===0&&t===s.length?s:s.subarray(i,t);try{var c=o.decode(s)}catch(E){if(xt===void 0){try{o.decode(new Uint8Array([128]))}catch{}try{o.decode(new Uint8Array([97])),xt=!0}catch{xt=!1}}throw!xt&&($t=void 0),E}}else{c=i,n=c+n,i=[];for(var h=null,d,y;c<n;)d=t[c++],128>d?i.push(d):224>d?c>=n?q():(y=t[c++],194>d||(y&192)!==128?(c--,q()):i.push((d&31)<<6|y&63)):240>d?c>=n-1?q():(y=t[c++],(y&192)!==128||d===224&&160>y||d===237&&160<=y||((s=t[c++])&192)!==128?(c--,q()):i.push((d&15)<<12|(y&63)<<6|s&63)):244>=d?c>=n-2?q():(y=t[c++],(y&192)!==128||(d<<28)+(y-144)>>30||((s=t[c++])&192)!==128||((o=t[c++])&192)!==128?(c--,q()):(d=(d&7)<<18|(y&63)<<12|(s&63)<<6|o&63,d-=65536,i.push((d>>10&1023)+55296,(d&1023)+56320))):q(),8192<=i.length&&(h=Ue(h,i),i.length=0);c=Ue(h,i)}return W(e,r,c),!0},function(t,e,r){if(e=G(e,r),e!=null){var n=!1;if(n=n===void 0?!1:n,Qr){if(n&&/(?:[^\uD800-\uDBFF]|^)[\uDC00-\uDFFF]|[\uD800-\uDBFF](?![\uDC00-\uDFFF])/.test(e))throw Error("Found an unpaired surrogate");e=(Be||(Be=new TextEncoder)).encode(e)}else{for(var i=0,s=new Uint8Array(3*e.length),o=0;o<e.length;o++){var c=e.charCodeAt(o);if(128>c)s[i++]=c;else{if(2048>c)s[i++]=c>>6|192;else{if(55296<=c&&57343>=c){if(56319>=c&&o<e.length){var h=e.charCodeAt(++o);if(56320<=h&&57343>=h){c=1024*(c-55296)+h-56320+65536,s[i++]=c>>18|240,s[i++]=c>>12&63|128,s[i++]=c>>6&63|128,s[i++]=c&63|128;continue}else o--}if(n)throw Error("Found an unpaired surrogate");c=65533}s[i++]=c>>12|224,s[i++]=c>>6&63|128}s[i++]=c&63|128}}e=i===s.length?s:s.subarray(0,i)}et(t.h,8*r+2),et(t.h,e.length),it(t,t.h.end()),it(t,e)}}),dr=bt(function(t,e,r,n,i){if(t.i!==2)return!1;e=Qe(e,r,n),r=t.h.j,n=vt(t.h)>>>0;var s=t.h.h+n,o=s-r;if(0>=o&&(t.h.j=s,i(e,t,void 0,void 0,void 0),o=s-t.h.h),o)throw Error("Message parsing ended unexpectedly. Expected to read "+(n+" bytes, instead read "+(n-o)+" bytes, either the data ended unexpectedly or the message misreported its own length"));return t.h.h=s,t.h.j=r,!0},function(t,e,r,n,i){if(e=Ot(e,n,r),e!=null)for(n=0;n<e.length;n++){var s=t;et(s.h,8*r+2);var o=s.h.end();it(s,o),o.push(s.i),s=o,i(e[n],t),o=t;var c=s.pop();for(c=o.i+o.h.length()-c;127<c;)s.push(c&127|128),c>>>=7,o.i++;s.push(c),o.i++}});function ae(t){return function(e,r){t:{if(Tt.length){var n=Tt.pop();n.setOptions(r),Qt(n.h,e,r),e=n}else e=new qt(e,r);try{var i=le(t),s=fr(new i.P,e,i);break t}finally{i=e.h,i.i=null,i.m=!1,i.l=0,i.j=0,i.h=0,i.S=!1,e.l=-1,e.i=-1,100>Tt.length&&Tt.push(e)}s=void 0}return s}}function ce(t){return function(){var e=new qr;hr(this,e,ue(t)),it(e,e.h.end());for(var r=new Uint8Array(e.i),n=e.j,i=n.length,s=0,o=0;o<i;o++){var c=n[o];r.set(c,s),s+=c.length}return e.j=[r],r}}function ot(t){U.call(this,t)}at(ot,U);var vr=[ot,1,mn,2,L,3,pr,4,pr];ot.prototype.l=ce(vr);function fe(t){U.call(this,t,-1,gn)}at(fe,U),fe.prototype.addClassification=function(t,e){return Qe(this,1,ot,t,e),this};var gn=[1],yr=ae([fe,1,dr,vr]);function st(t){U.call(this,t)}at(st,U);var mr=[st,1,L,2,L,3,L,4,L,5,L];st.prototype.l=ce(mr);function gr(t){U.call(this,t,-1,wn)}at(gr,U);var wn=[1],wr=ae([gr,1,dr,mr]);function Ct(t){U.call(this,t)}at(Ct,U);var br=[Ct,1,L,2,L,3,L,4,L,5,L,6,yn],bn=ae(br);Ct.prototype.l=ce(br);function Er(t,e,r){if(r=t.createShader(r===0?t.VERTEX_SHADER:t.FRAGMENT_SHADER),t.shaderSource(r,e),t.compileShader(r),!t.getShaderParameter(r,t.COMPILE_STATUS))throw Error(`Could not compile WebGL shader.

`+t.getShaderInfoLog(r));return r}function _r(t){return Ot(t,ot,1).map(function(e){var r=G(e,1);return{index:r??0,score:X(e,2),label:G(e,3)!=null?Ft(G(e,3),""):void 0,displayName:G(e,4)!=null?Ft(G(e,4),""):void 0}})}function Ar(t){return{x:X(t,1),y:X(t,2),z:X(t,3),visibility:oe(t,4)!=null?X(t,4):void 0}}function xr(t){return t.map(function(e){return Ot(wr(e),st,1).map(Ar)})}function he(t,e){this.i=t,this.h=e,this.m=0}function Ir(t,e,r){return En(t,e),typeof t.h.canvas.transferToImageBitmap=="function"?Promise.resolve(t.h.canvas.transferToImageBitmap()):r?Promise.resolve(t.h.canvas):typeof createImageBitmap=="function"?createImageBitmap(t.h.canvas):(t.j===void 0&&(t.j=document.createElement("canvas")),new Promise(function(n){t.j.height=t.h.canvas.height,t.j.width=t.h.canvas.width,t.j.getContext("2d",{}).drawImage(t.h.canvas,0,0,t.h.canvas.width,t.h.canvas.height),n(t.j)}))}function En(t,e){var r=t.h;if(t.s===void 0){var n=Er(r,`
  attribute vec2 aVertex;
  attribute vec2 aTex;
  varying vec2 vTex;
  void main(void) {
    gl_Position = vec4(aVertex, 0.0, 1.0);
    vTex = aTex;
  }`,0),i=Er(r,`
  precision mediump float;
  varying vec2 vTex;
  uniform sampler2D sampler0;
  void main(){
    gl_FragColor = texture2D(sampler0, vTex);
  }`,1),s=r.createProgram();if(r.attachShader(s,n),r.attachShader(s,i),r.linkProgram(s),!r.getProgramParameter(s,r.LINK_STATUS))throw Error(`Could not compile WebGL program.

`+r.getProgramInfoLog(s));n=t.s=s,r.useProgram(n),i=r.getUniformLocation(n,"sampler0"),t.l={O:r.getAttribLocation(n,"aVertex"),N:r.getAttribLocation(n,"aTex"),xa:i},t.v=r.createBuffer(),r.bindBuffer(r.ARRAY_BUFFER,t.v),r.enableVertexAttribArray(t.l.O),r.vertexAttribPointer(t.l.O,2,r.FLOAT,!1,0,0),r.bufferData(r.ARRAY_BUFFER,new Float32Array([-1,-1,-1,1,1,1,1,-1]),r.STATIC_DRAW),r.bindBuffer(r.ARRAY_BUFFER,null),t.u=r.createBuffer(),r.bindBuffer(r.ARRAY_BUFFER,t.u),r.enableVertexAttribArray(t.l.N),r.vertexAttribPointer(t.l.N,2,r.FLOAT,!1,0,0),r.bufferData(r.ARRAY_BUFFER,new Float32Array([0,1,0,0,1,0,1,1]),r.STATIC_DRAW),r.bindBuffer(r.ARRAY_BUFFER,null),r.uniform1i(i,0)}n=t.l,r.useProgram(t.s),r.canvas.width=e.width,r.canvas.height=e.height,r.viewport(0,0,e.width,e.height),r.activeTexture(r.TEXTURE0),t.i.bindTexture2d(e.glName),r.enableVertexAttribArray(n.O),r.bindBuffer(r.ARRAY_BUFFER,t.v),r.vertexAttribPointer(n.O,2,r.FLOAT,!1,0,0),r.enableVertexAttribArray(n.N),r.bindBuffer(r.ARRAY_BUFFER,t.u),r.vertexAttribPointer(n.N,2,r.FLOAT,!1,0,0),r.bindFramebuffer(r.DRAW_FRAMEBUFFER?r.DRAW_FRAMEBUFFER:r.FRAMEBUFFER,null),r.clearColor(0,0,0,0),r.clear(r.COLOR_BUFFER_BIT),r.colorMask(!0,!0,!0,!0),r.drawArrays(r.TRIANGLE_FAN,0,4),r.disableVertexAttribArray(n.O),r.disableVertexAttribArray(n.N),r.bindBuffer(r.ARRAY_BUFFER,null),t.i.bindTexture2d(0)}function _n(t){this.h=t}var An=new Uint8Array([0,97,115,109,1,0,0,0,1,4,1,96,0,0,3,2,1,0,10,9,1,7,0,65,0,253,15,26,11]);function xn(t,e){return e+t}function Tr(t,e){window[t]=e}function In(t){var e=document.createElement("script");return e.setAttribute("src",t),e.setAttribute("crossorigin","anonymous"),new Promise(function(r){e.addEventListener("load",function(){r()},!1),e.addEventListener("error",function(){r()},!1),document.body.appendChild(e)})}function Tn(){return C(function(t){switch(t.h){case 1:return t.s=2,F(t,WebAssembly.instantiate(An),4);case 4:t.h=3,t.s=0;break;case 2:return t.s=0,t.l=null,t.return(!1);case 3:return t.return(!0)}})}function pe(t){if(this.h=t,this.listeners={},this.l={},this.L={},this.s={},this.v={},this.M=this.u=this.ga=!0,this.I=Promise.resolve(),this.fa="",this.D={},this.locateFile=t&&t.locateFile||xn,typeof window=="object")var e=window.location.pathname.toString().substring(0,window.location.pathname.toString().lastIndexOf("/"))+"/";else if(typeof location<"u")e=location.pathname.toString().substring(0,location.pathname.toString().lastIndexOf("/"))+"/";else throw Error("solutions can only be loaded on a web page or in a web worker");if(this.ha=e,t.options){e=b(Object.keys(t.options));for(var r=e.next();!r.done;r=e.next()){r=r.value;var n=t.options[r].default;n!==void 0&&(this.l[r]=typeof n=="function"?n():n)}}}a=pe.prototype,a.close=function(){return this.j&&this.j.delete(),Promise.resolve()};function Sn(t){var e,r,n,i,s,o,c,h,d,y,E;return C(function(g){switch(g.h){case 1:return t.ga?(e=t.h.files===void 0?[]:typeof t.h.files=="function"?t.h.files(t.l):t.h.files,F(g,Tn(),2)):g.return();case 2:if(r=g.i,typeof window=="object")return Tr("createMediapipeSolutionsWasm",{locateFile:t.locateFile}),Tr("createMediapipeSolutionsPackedAssets",{locateFile:t.locateFile}),o=e.filter(function(m){return m.data!==void 0}),c=e.filter(function(m){return m.data===void 0}),h=Promise.all(o.map(function(m){var _=Mt(t,m.url);if(m.path!==void 0){var A=m.path;_=_.then(function(S){return t.overrideFile(A,S),Promise.resolve(S)})}return _})),d=Promise.all(c.map(function(m){return m.simd===void 0||m.simd&&r||!m.simd&&!r?In(t.locateFile(m.url,t.ha)):Promise.resolve()})).then(function(){var m,_,A;return C(function(S){if(S.h==1)return m=window.createMediapipeSolutionsWasm,_=window.createMediapipeSolutionsPackedAssets,A=t,F(S,m(_),2);A.i=S.i,S.h=0})}),y=function(){return C(function(m){return t.h.graph&&t.h.graph.url?m=F(m,Mt(t,t.h.graph.url),0):(m.h=0,m=void 0),m})}(),F(g,Promise.all([d,h,y]),7);if(typeof importScripts!="function")throw Error("solutions can only be loaded on a web page or in a web worker");return n=e.filter(function(m){return m.simd===void 0||m.simd&&r||!m.simd&&!r}).map(function(m){return t.locateFile(m.url,t.ha)}),importScripts.apply(null,P(n)),i=t,F(g,createMediapipeSolutionsWasm(Module),6);case 6:i.i=g.i,t.m=new OffscreenCanvas(1,1),t.i.canvas=t.m,s=t.i.GL.createContext(t.m,{antialias:!1,alpha:!1,ua:typeof WebGL2RenderingContext<"u"?2:1}),t.i.GL.makeContextCurrent(s),g.h=4;break;case 7:if(t.m=document.createElement("canvas"),E=t.m.getContext("webgl2",{}),!E&&(E=t.m.getContext("webgl",{}),!E))return alert("Failed to create WebGL canvas context when passing video frame."),g.return();t.K=E,t.i.canvas=t.m,t.i.createContext(t.m,!0,!0,{});case 4:t.j=new t.i.SolutionWasm,t.ga=!1,g.h=0}})}function Pn(t){var e,r,n,i,s,o,c,h;return C(function(d){if(d.h==1){if(t.h.graph&&t.h.graph.url&&t.fa===t.h.graph.url)return d.return();if(t.u=!0,!t.h.graph||!t.h.graph.url){d.h=2;return}return t.fa=t.h.graph.url,F(d,Mt(t,t.h.graph.url),3)}for(d.h!=2&&(e=d.i,t.j.loadGraph(e)),r=b(Object.keys(t.D)),n=r.next();!n.done;n=r.next())i=n.value,t.j.overrideFile(i,t.D[i]);if(t.D={},t.h.listeners)for(s=b(t.h.listeners),o=s.next();!o.done;o=s.next())c=o.value,Rn(t,c);h=t.l,t.l={},t.setOptions(h),d.h=0})}a.reset=function(){var t=this;return C(function(e){t.j&&(t.j.reset(),t.s={},t.v={}),e.h=0})},a.setOptions=function(t,e){var r=this;if(e=e||this.h.options){for(var n=[],i=[],s={},o=b(Object.keys(t)),c=o.next();!c.done;s={X:s.X,Y:s.Y},c=o.next())if(c=c.value,!(c in this.l&&this.l[c]===t[c])){this.l[c]=t[c];var h=e[c];h!==void 0&&(h.onChange&&(s.X=h.onChange,s.Y=t[c],n.push(function(d){return function(){var y;return C(function(E){if(E.h==1)return F(E,d.X(d.Y),2);y=E.i,y===!0&&(r.u=!0),E.h=0})}}(s))),h.graphOptionXref&&(c=Object.assign({},{calculatorName:"",calculatorIndex:0},h.graphOptionXref,{valueNumber:h.type===1?t[c]:0,valueBoolean:h.type===0?t[c]:!1,valueString:h.type===2?t[c]:""}),i.push(c)))}(n.length!==0||i.length!==0)&&(this.u=!0,this.H=(this.H===void 0?[]:this.H).concat(i),this.F=(this.F===void 0?[]:this.F).concat(n))}};function On(t){var e,r,n,i,s,o,c;return C(function(h){switch(h.h){case 1:if(!t.u)return h.return();if(!t.F){h.h=2;break}e=b(t.F),r=e.next();case 3:if(r.done){h.h=5;break}return n=r.value,F(h,n(),4);case 4:r=e.next(),h.h=3;break;case 5:t.F=void 0;case 2:if(t.H){for(i=new t.i.GraphOptionChangeRequestList,s=b(t.H),o=s.next();!o.done;o=s.next())c=o.value,i.push_back(c);t.j.changeOptions(i),i.delete(),t.H=void 0}t.u=!1,h.h=0}})}a.initialize=function(){var t=this;return C(function(e){return e.h==1?F(e,Sn(t),2):e.h!=3?F(e,Pn(t),3):F(e,On(t),0)})};function Mt(t,e){var r,n;return C(function(i){return e in t.L?i.return(t.L[e]):(r=t.locateFile(e,""),n=fetch(r).then(function(s){return s.arrayBuffer()}),t.L[e]=n,i.return(n))})}a.overrideFile=function(t,e){this.j?this.j.overrideFile(t,e):this.D[t]=e},a.clearOverriddenFiles=function(){this.D={},this.j&&this.j.clearOverriddenFiles()},a.send=function(t,e){var r=this,n,i,s,o,c,h,d,y,E;return C(function(g){switch(g.h){case 1:return r.h.inputs?(n=1e3*(e??performance.now()),F(g,r.I,2)):g.return();case 2:return F(g,r.initialize(),3);case 3:for(i=new r.i.PacketDataList,s=b(Object.keys(t)),o=s.next();!o.done;o=s.next())if(c=o.value,h=r.h.inputs[c]){t:{var m=t[c];switch(h.type){case"video":var _=r.s[h.stream];if(_||(_=new he(r.i,r.K),r.s[h.stream]=_),_.m===0&&(_.m=_.i.createTexture()),typeof HTMLVideoElement<"u"&&m instanceof HTMLVideoElement)var A=m.videoWidth,S=m.videoHeight;else typeof HTMLImageElement<"u"&&m instanceof HTMLImageElement?(A=m.naturalWidth,S=m.naturalHeight):(A=m.width,S=m.height);S={glName:_.m,width:A,height:S},A=_.h,A.canvas.width=S.width,A.canvas.height=S.height,A.activeTexture(A.TEXTURE0),_.i.bindTexture2d(_.m),A.texImage2D(A.TEXTURE_2D,0,A.RGBA,A.RGBA,A.UNSIGNED_BYTE,m),_.i.bindTexture2d(0),_=S;break t;case"detections":for(_=r.s[h.stream],_||(_=new _n(r.i),r.s[h.stream]=_),_.data||(_.data=new _.h.DetectionListData),_.data.reset(m.length),S=0;S<m.length;++S){A=m[S];var T=_.data,R=T.setBoundingBox,k=S,B=A.la,I=new Ct;if(Y(I,1,B.ra),Y(I,2,B.sa),Y(I,3,B.height),Y(I,4,B.width),Y(I,5,B.rotation),W(I,6,B.pa),B=I.l(),R.call(T,k,B),A.ea)for(T=0;T<A.ea.length;++T){I=A.ea[T],R=_.data,k=R.addNormalizedLandmark,B=S,I=Object.assign({},I,{visibility:I.visibility?I.visibility:0});var N=new st;Y(N,1,I.x),Y(N,2,I.y),Y(N,3,I.z),I.visibility&&Y(N,4,I.visibility),I=N.l(),k.call(R,B,I)}if(A.ba)for(T=0;T<A.ba.length;++T)R=_.data,k=R.addClassification,B=S,I=A.ba[T],N=new ot,Y(N,2,I.score),I.index&&W(N,1,I.index),I.label&&W(N,3,I.label),I.displayName&&W(N,4,I.displayName),I=N.l(),k.call(R,B,I)}_=_.data;break t;default:_={}}}switch(d=_,y=h.stream,h.type){case"video":i.pushTexture2d(Object.assign({},d,{stream:y,timestamp:n}));break;case"detections":E=d,E.stream=y,E.timestamp=n,i.pushDetectionList(E);break;default:throw Error("Unknown input config type: '"+h.type+"'")}}return r.j.send(i),F(g,r.I,4);case 4:i.delete(),g.h=0}})};function Fn(t,e,r){var n,i,s,o,c,h,d,y,E,g,m,_,A,S;return C(function(T){switch(T.h){case 1:if(!r)return T.return(e);for(n={},i=0,s=b(Object.keys(r)),o=s.next();!o.done;o=s.next())c=o.value,h=r[c],typeof h!="string"&&h.type==="texture"&&e[h.stream]!==void 0&&++i;1<i&&(t.M=!1),d=b(Object.keys(r)),o=d.next();case 2:if(o.done){T.h=4;break}if(y=o.value,E=r[y],typeof E=="string")return A=n,S=y,F(T,jn(t,y,e[E]),14);if(g=e[E.stream],E.type==="detection_list"){if(g){for(var R=g.getRectList(),k=g.getLandmarksList(),B=g.getClassificationsList(),I=[],N=0;N<R.size();++N){var Q=bn(R.get(N)),Nn=X(Q,1),Cn=X(Q,2),Mn=X(Q,3),Dn=X(Q,4),Un=X(Q,5,0),Dt=void 0;Dt=Dt===void 0?0:Dt,Q={la:{ra:Nn,sa:Cn,height:Mn,width:Dn,rotation:Un,pa:Ft(G(Q,6),Dt)},ea:Ot(wr(k.get(N)),st,1).map(Ar),ba:_r(yr(B.get(N)))},I.push(Q)}R=I}else R=[];n[y]=R,T.h=7;break}if(E.type==="proto_list"){if(g){for(R=Array(g.size()),k=0;k<g.size();k++)R[k]=g.get(k);g.delete()}else R=[];n[y]=R,T.h=7;break}if(g===void 0){T.h=3;break}if(E.type==="float_list"){n[y]=g,T.h=7;break}if(E.type==="proto"){n[y]=g,T.h=7;break}if(E.type!=="texture")throw Error("Unknown output config type: '"+E.type+"'");return m=t.v[y],m||(m=new he(t.i,t.K),t.v[y]=m),F(T,Ir(m,g,t.M),13);case 13:_=T.i,n[y]=_;case 7:E.transform&&n[y]&&(n[y]=E.transform(n[y])),T.h=3;break;case 14:A[S]=T.i;case 3:o=d.next(),T.h=2;break;case 4:return T.return(n)}})}function jn(t,e,r){var n;return C(function(i){return typeof r=="number"||r instanceof Uint8Array||r instanceof t.i.Uint8BlobList?i.return(r):r instanceof t.i.Texture2dDataOut?(n=t.v[e],n||(n=new he(t.i,t.K),t.v[e]=n),i.return(Ir(n,r,t.M))):i.return(void 0)})}function Rn(t,e){for(var r=e.name||"$",n=[].concat(P(e.wants)),i=new t.i.StringList,s=b(e.wants),o=s.next();!o.done;o=s.next())i.push_back(o.value);s=t.i.PacketListener.implement({onResults:function(c){for(var h={},d=0;d<e.wants.length;++d)h[n[d]]=c.get(d);var y=t.listeners[r];y&&(t.I=Fn(t,h,e.outs).then(function(E){E=y(E);for(var g=0;g<e.wants.length;++g){var m=h[n[g]];typeof m=="object"&&m.hasOwnProperty&&m.hasOwnProperty("delete")&&m.delete()}E&&(t.I=E)}))}}),t.j.attachMultiListener(i,s),i.delete()}a.onResults=function(t,e){this.listeners[e||"$"]=t},ft("Solution",pe),ft("OptionType",{BOOL:0,NUMBER:1,ta:2,0:"BOOL",1:"NUMBER",2:"STRING"});function Sr(t){return t===void 0&&(t=0),t===1?"hand_landmark_full.tflite":"hand_landmark_lite.tflite"}function Pr(t){var e=this;t=t||{},this.h=new pe({locateFile:t.locateFile,files:function(r){return[{url:"hands_solution_packed_assets_loader.js"},{simd:!1,url:"hands_solution_wasm_bin.js"},{simd:!0,url:"hands_solution_simd_wasm_bin.js"},{data:!0,url:Sr(r.modelComplexity)}]},graph:{url:"hands.binarypb"},inputs:{image:{type:"video",stream:"input_frames_gpu"}},listeners:[{wants:["multi_hand_landmarks","multi_hand_world_landmarks","image_transformed","multi_handedness"],outs:{image:"image_transformed",multiHandLandmarks:{type:"proto_list",stream:"multi_hand_landmarks",transform:xr},multiHandWorldLandmarks:{type:"proto_list",stream:"multi_hand_world_landmarks",transform:xr},multiHandedness:{type:"proto_list",stream:"multi_handedness",transform:function(r){return r.map(function(n){return _r(yr(n))[0]})}}}}],options:{useCpuInference:{type:0,graphOptionXref:{calculatorType:"InferenceCalculator",fieldName:"use_cpu_inference"},default:typeof window!="object"||window.navigator===void 0?!1:"iPad Simulator;iPhone Simulator;iPod Simulator;iPad;iPhone;iPod".split(";").includes(navigator.platform)||navigator.userAgent.includes("Mac")&&"ontouchend"in document},selfieMode:{type:0,graphOptionXref:{calculatorType:"GlScalerCalculator",calculatorIndex:1,fieldName:"flip_horizontal"}},maxNumHands:{type:1,graphOptionXref:{calculatorType:"ConstantSidePacketCalculator",calculatorName:"ConstantSidePacketCalculator",fieldName:"int_value"}},modelComplexity:{type:1,graphOptionXref:{calculatorType:"ConstantSidePacketCalculator",calculatorName:"ConstantSidePacketCalculatorModelComplexity",fieldName:"int_value"},onChange:function(r){var n,i,s;return C(function(o){return o.h==1?(n=Sr(r),i="third_party/mediapipe/modules/hand_landmark/"+n,F(o,Mt(e.h,n),2)):(s=o.i,e.h.overrideFile(i,s),o.return(!0))})}},minDetectionConfidence:{type:1,graphOptionXref:{calculatorType:"TensorsToDetectionsCalculator",calculatorName:"handlandmarktrackinggpu__palmdetectiongpu__TensorsToDetectionsCalculator",fieldName:"min_score_thresh"}},minTrackingConfidence:{type:1,graphOptionXref:{calculatorType:"ThresholdingCalculator",calculatorName:"handlandmarktrackinggpu__handlandmarkgpu__ThresholdingCalculator",fieldName:"threshold"}}}})}a=Pr.prototype,a.close=function(){return this.h.close(),Promise.resolve()},a.onResults=function(t){this.h.onResults(t)},a.initialize=function(){var t=this;return C(function(e){return F(e,t.h.initialize(),0)})},a.reset=function(){this.h.reset()},a.send=function(t){var e=this;return C(function(r){return F(r,e.h.send(t),0)})},a.setOptions=function(t){this.h.setOptions(t)},ft("Hands",Pr),ft("HAND_CONNECTIONS",[[0,1],[1,2],[2,3],[3,4],[0,5],[5,6],[6,7],[7,8],[5,9],[9,10],[10,11],[11,12],[9,13],[13,14],[14,15],[15,16],[13,17],[0,17],[17,18],[18,19],[19,20]]),ft("VERSION","0.4.1675469240")}).call(de);var ye=function(a,u){return ye=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(l,f){l.__proto__=f}||function(l,f){for(var p in f)Object.prototype.hasOwnProperty.call(f,p)&&(l[p]=f[p])},ye(a,u)};function kt(a,u){if(typeof u!="function"&&u!==null)throw new TypeError("Class extends value "+String(u)+" is not a constructor or null");ye(a,u);function l(){this.constructor=a}a.prototype=u===null?Object.create(u):(l.prototype=u.prototype,new l)}function me(a){var u=typeof Symbol=="function"&&Symbol.iterator,l=u&&a[u],f=0;if(l)return l.call(a);if(a&&typeof a.length=="number")return{next:function(){return a&&f>=a.length&&(a=void 0),{value:a&&a[f++],done:!a}}};throw new TypeError(u?"Object is not iterable.":"Symbol.iterator is not defined.")}function ge(a,u){var l=typeof Symbol=="function"&&a[Symbol.iterator];if(!l)return a;var f=l.call(a),p,v=[],w;try{for(;(u===void 0||u-- >0)&&!(p=f.next()).done;)v.push(p.value)}catch(b){w={error:b}}finally{try{p&&!p.done&&(l=f.return)&&l.call(f)}finally{if(w)throw w.error}}return v}function we(a,u,l){if(l||arguments.length===2)for(var f=0,p=u.length,v;f<p;f++)(v||!(f in u))&&(v||(v=Array.prototype.slice.call(u,0,f)),v[f]=u[f]);return a.concat(v||Array.prototype.slice.call(u))}function $(a){return typeof a=="function"}function Cr(a){var u=function(f){Error.call(f),f.stack=new Error().stack},l=a(u);return l.prototype=Object.create(Error.prototype),l.prototype.constructor=l,l}var ve=Cr(function(a){return function(l){a(this),this.message=l?l.length+` errors occurred during unsubscription:
`+l.map(function(f,p){return p+1+") "+f.toString()}).join(`
  `):"",this.name="UnsubscriptionError",this.errors=l}});function be(a,u){if(a){var l=a.indexOf(u);0<=l&&a.splice(l,1)}}var Gt=function(){function a(u){this.initialTeardown=u,this.closed=!1,this._parentage=null,this._finalizers=null}return a.prototype.unsubscribe=function(){var u,l,f,p,v;if(!this.closed){this.closed=!0;var w=this._parentage;if(w)if(this._parentage=null,Array.isArray(w))try{for(var b=me(w),P=b.next();!P.done;P=b.next()){var V=P.value;V.remove(this)}}catch(D){u={error:D}}finally{try{P&&!P.done&&(l=b.return)&&l.call(b)}finally{if(u)throw u.error}}else w.remove(this);var _t=this.initialTeardown;if($(_t))try{_t()}catch(D){v=D instanceof ve?D.errors:[D]}var nt=this._finalizers;if(nt){this._finalizers=null;try{for(var Z=me(nt),J=Z.next();!J.done;J=Z.next()){var At=J.value;try{Or(At)}catch(D){v=v??[],D instanceof ve?v=we(we([],ge(v)),ge(D.errors)):v.push(D)}}}catch(D){f={error:D}}finally{try{J&&!J.done&&(p=Z.return)&&p.call(Z)}finally{if(f)throw f.error}}}if(v)throw new ve(v)}},a.prototype.add=function(u){var l;if(u&&u!==this)if(this.closed)Or(u);else{if(u instanceof a){if(u.closed||u._hasParent(this))return;u._addParent(this)}(this._finalizers=(l=this._finalizers)!==null&&l!==void 0?l:[]).push(u)}},a.prototype._hasParent=function(u){var l=this._parentage;return l===u||Array.isArray(l)&&l.includes(u)},a.prototype._addParent=function(u){var l=this._parentage;this._parentage=Array.isArray(l)?(l.push(u),l):l?[l,u]:u},a.prototype._removeParent=function(u){var l=this._parentage;l===u?this._parentage=null:Array.isArray(l)&&be(l,u)},a.prototype.remove=function(u){var l=this._finalizers;l&&be(l,u),u instanceof a&&u._removeParent(this)},a.EMPTY=function(){var u=new a;return u.closed=!0,u}(),a}(),Mr=Gt.EMPTY;function Dr(a){return a instanceof Gt||a&&"closed"in a&&$(a.remove)&&$(a.add)&&$(a.unsubscribe)}function Or(a){$(a)?a():a.unsubscribe()}var Ln={Promise:void 0},zn={setTimeout:function(a,u){for(var l=[],f=2;f<arguments.length;f++)l[f-2]=arguments[f];return setTimeout.apply(void 0,we([a,u],ge(l)))},clearTimeout:function(a){return clearTimeout(a)},delegate:void 0};function Wn(a){zn.setTimeout(function(){throw a})}function Fr(){}function Bt(a){a()}var Ur=function(a){kt(u,a);function u(l){var f=a.call(this)||this;return f.isStopped=!1,l?(f.destination=l,Dr(l)&&l.add(f)):f.destination=Vn,f}return u.create=function(l,f,p){return new Ee(l,f,p)},u.prototype.next=function(l){this.isStopped||this._next(l)},u.prototype.error=function(l){this.isStopped||(this.isStopped=!0,this._error(l))},u.prototype.complete=function(){this.isStopped||(this.isStopped=!0,this._complete())},u.prototype.unsubscribe=function(){this.closed||(this.isStopped=!0,a.prototype.unsubscribe.call(this),this.destination=null)},u.prototype._next=function(l){this.destination.next(l)},u.prototype._error=function(l){try{this.destination.error(l)}finally{this.unsubscribe()}},u.prototype._complete=function(){try{this.destination.complete()}finally{this.unsubscribe()}},u}(Gt),Yn=function(){function a(u){this.partialObserver=u}return a.prototype.next=function(u){var l=this.partialObserver;if(l.next)try{l.next(u)}catch(f){Ut(f)}},a.prototype.error=function(u){var l=this.partialObserver;if(l.error)try{l.error(u)}catch(f){Ut(f)}else Ut(u)},a.prototype.complete=function(){var u=this.partialObserver;if(u.complete)try{u.complete()}catch(l){Ut(l)}},a}(),Ee=function(a){kt(u,a);function u(l,f,p){var v=a.call(this)||this,w;return $(l)||!l?w={next:l??void 0,error:f??void 0,complete:p??void 0}:w=l,v.destination=new Yn(w),v}return u}(Ur);function Ut(a){Wn(a)}function Xn(a){throw a}var Vn={closed:!0,next:Fr,error:Xn,complete:Fr},Kn=function(){return typeof Symbol=="function"&&Symbol.observable||"@@observable"}();function Hn(a){return a}function $n(a){return a.length===0?Hn:a.length===1?a[0]:function(l){return a.reduce(function(f,p){return p(f)},l)}}var jr=function(){function a(u){u&&(this._subscribe=u)}return a.prototype.lift=function(u){var l=new a;return l.source=this,l.operator=u,l},a.prototype.subscribe=function(u,l,f){var p=this,v=Qn(u)?u:new Ee(u,l,f);return Bt(function(){var w=p,b=w.operator,P=w.source;v.add(b?b.call(v,P):P?p._subscribe(v):p._trySubscribe(v))}),v},a.prototype._trySubscribe=function(u){try{return this._subscribe(u)}catch(l){u.error(l)}},a.prototype.forEach=function(u,l){var f=this;return l=Rr(l),new l(function(p,v){var w=new Ee({next:function(b){try{u(b)}catch(P){v(P),w.unsubscribe()}},error:v,complete:p});f.subscribe(w)})},a.prototype._subscribe=function(u){var l;return(l=this.source)===null||l===void 0?void 0:l.subscribe(u)},a.prototype[Kn]=function(){return this},a.prototype.pipe=function(){for(var u=[],l=0;l<arguments.length;l++)u[l]=arguments[l];return $n(u)(this)},a.prototype.toPromise=function(u){var l=this;return u=Rr(u),new u(function(f,p){var v;l.subscribe(function(w){return v=w},function(w){return p(w)},function(){return f(v)})})},a.create=function(u){return new a(u)},a}();function Rr(a){var u;return(u=a??Ln.Promise)!==null&&u!==void 0?u:Promise}function Zn(a){return a&&$(a.next)&&$(a.error)&&$(a.complete)}function Qn(a){return a&&a instanceof Ur||Zn(a)&&Dr(a)}var Jn=Cr(function(a){return function(){a(this),this.name="ObjectUnsubscribedError",this.message="object unsubscribed"}}),Br=function(a){kt(u,a);function u(){var l=a.call(this)||this;return l.closed=!1,l.currentObservers=null,l.observers=[],l.isStopped=!1,l.hasError=!1,l.thrownError=null,l}return u.prototype.lift=function(l){var f=new Nr(this,this);return f.operator=l,f},u.prototype._throwIfClosed=function(){if(this.closed)throw new Jn},u.prototype.next=function(l){var f=this;Bt(function(){var p,v;if(f._throwIfClosed(),!f.isStopped){f.currentObservers||(f.currentObservers=Array.from(f.observers));try{for(var w=me(f.currentObservers),b=w.next();!b.done;b=w.next()){var P=b.value;P.next(l)}}catch(V){p={error:V}}finally{try{b&&!b.done&&(v=w.return)&&v.call(w)}finally{if(p)throw p.error}}}})},u.prototype.error=function(l){var f=this;Bt(function(){if(f._throwIfClosed(),!f.isStopped){f.hasError=f.isStopped=!0,f.thrownError=l;for(var p=f.observers;p.length;)p.shift().error(l)}})},u.prototype.complete=function(){var l=this;Bt(function(){if(l._throwIfClosed(),!l.isStopped){l.isStopped=!0;for(var f=l.observers;f.length;)f.shift().complete()}})},u.prototype.unsubscribe=function(){this.isStopped=this.closed=!0,this.observers=this.currentObservers=null},Object.defineProperty(u.prototype,"observed",{get:function(){var l;return((l=this.observers)===null||l===void 0?void 0:l.length)>0},enumerable:!1,configurable:!0}),u.prototype._trySubscribe=function(l){return this._throwIfClosed(),a.prototype._trySubscribe.call(this,l)},u.prototype._subscribe=function(l){return this._throwIfClosed(),this._checkFinalizedStatuses(l),this._innerSubscribe(l)},u.prototype._innerSubscribe=function(l){var f=this,p=this,v=p.hasError,w=p.isStopped,b=p.observers;return v||w?Mr:(this.currentObservers=null,b.push(l),new Gt(function(){f.currentObservers=null,be(b,l)}))},u.prototype._checkFinalizedStatuses=function(l){var f=this,p=f.hasError,v=f.thrownError,w=f.isStopped;p?l.error(v):w&&l.complete()},u.prototype.asObservable=function(){var l=new jr;return l.source=this,l},u.create=function(l,f){return new Nr(l,f)},u}(jr),Nr=function(a){kt(u,a);function u(l,f){var p=a.call(this)||this;return p.destination=l,p.source=f,p}return u.prototype.next=function(l){var f,p;(p=(f=this.destination)===null||f===void 0?void 0:f.next)===null||p===void 0||p.call(f,l)},u.prototype.error=function(l){var f,p;(p=(f=this.destination)===null||f===void 0?void 0:f.error)===null||p===void 0||p.call(f,l)},u.prototype.complete=function(){var l,f;(f=(l=this.destination)===null||l===void 0?void 0:l.complete)===null||f===void 0||f.call(l)},u.prototype._subscribe=function(l){var f,p;return(p=(f=this.source)===null||f===void 0?void 0:f.subscribe(l))!==null&&p!==void 0?p:Mr},u}(Br),lt=(a=>(a[a.WRIST=0]="WRIST",a[a.THUMB_CMC=1]="THUMB_CMC",a[a.THUMB_MCP=2]="THUMB_MCP",a[a.THUMB_IP=3]="THUMB_IP",a[a.THUMB_TIP=4]="THUMB_TIP",a[a.INDEX_FINGER_MCP=5]="INDEX_FINGER_MCP",a[a.INDEX_FINGER_PIP=6]="INDEX_FINGER_PIP",a[a.INDEX_FINGER_DIP=7]="INDEX_FINGER_DIP",a[a.INDEX_FINGER_TIP=8]="INDEX_FINGER_TIP",a[a.MIDDLE_FINGER_MCP=9]="MIDDLE_FINGER_MCP",a[a.MIDDLE_FINGER_PIP=10]="MIDDLE_FINGER_PIP",a[a.MIDDLE_FINGER_DIP=11]="MIDDLE_FINGER_DIP",a[a.MIDDLE_FINGER_TIP=12]="MIDDLE_FINGER_TIP",a[a.RING_FINGER_MCP=13]="RING_FINGER_MCP",a[a.RING_FINGER_PIP=14]="RING_FINGER_PIP",a[a.RING_FINGER_DIP=15]="RING_FINGER_DIP",a[a.RING_FINGER_TIP=16]="RING_FINGER_TIP",a[a.PINKY_MCP=17]="PINKY_MCP",a[a.PINKY_PIP=18]="PINKY_PIP",a[a.PINKY_DIP=19]="PINKY_DIP",a[a.PINKY_TIP=20]="PINKY_TIP",a))(lt||{});const qn=[[0,1],[1,2],[2,3],[3,4],[0,5],[5,6],[6,7],[7,8],[0,9],[9,10],[10,11],[11,12],[0,13],[13,14],[14,15],[15,16],[0,17],[17,18],[18,19],[19,20],[5,9],[9,13],[13,17]],Et=21,ut={wrist:"#ffd93d",thumb:"#ff6b6b",index:"#4ecdc4",middle:"#45b7d1",ring:"#96ceb4",pinky:"#dda0dd"},ti="rgba(255, 255, 255, 0.6)",ei=5,ri=2,ni={maxHands:2,minDetectionConfidence:.7,minTrackingConfidence:.5,targetFps:30,smoothing:!0,smoothingFactor:.3};function ii(a,u,l){return{x:u.x+(a.x-u.x)*l,y:u.y+(a.y-u.y)*l,z:u.z+(a.z-u.z)*l}}class oi{constructor(u=.3,l=5){x(this,"buffer",new Map);x(this,"factor");x(this,"bufferSize");this.factor=Math.max(0,Math.min(1,u)),this.bufferSize=l}smoothLandmark(u,l,f){const p=u*Et+l;let v=this.buffer.get(p);if(!v||v.length===0)return v=[f],this.buffer.set(p,v),f;const w=v[v.length-1],b=ii(f,w,this.factor);return v.push(b),v.length>this.bufferSize&&v.shift(),b}smoothLandmarks(u,l){const f=[];for(let p=0;p<Et;p++)f.push(this.smoothLandmark(u,p,l[p]));return f}clearHand(u){for(let l=0;l<Et;l++){const f=u*Et+l;this.buffer.delete(f)}}clear(){this.buffer.clear()}get smoothingFactor(){return this.factor}}class si{constructor(u={}){x(this,"config");x(this,"hands",null);x(this,"videoElement",null);x(this,"subject",new Br);x(this,"smoother");x(this,"animationFrameId",null);x(this,"_isTracking",!1);x(this,"initialized",!1);x(this,"lastTimestamp",0);this.config={...ni,...u},this.smoother=new oi(this.config.smoothingFactor,5)}get hands$(){return this.subject.asObservable()}get isTracking(){return this._isTracking}initialize(u){return new Promise((l,f)=>{if(this.initialized){f(new Error("HandTracker is already initialized. Call dispose() first."));return}this.videoElement=u,this.hands=new Gn.Hands({locateFile:p=>`https://cdn.jsdelivr.net/npm/@mediapipe/hands/${p}`}),this.hands.setOptions({maxNumHands:this.config.maxHands,minDetectionConfidence:this.config.minDetectionConfidence,minTrackingConfidence:this.config.minTrackingConfidence,modelComplexity:1}),this.hands.onResults(p=>{this.processResults(p)}),this.initialized=!0,l()})}start(){if(!this.initialized){console.warn("HandTracker not initialized. Call initialize() first.");return}this._isTracking||(this._isTracking=!0,this.lastTimestamp=performance.now(),this.requestFrame())}stop(){this._isTracking=!1,this.animationFrameId!==null&&(cancelAnimationFrame(this.animationFrameId),this.animationFrameId=null)}dispose(){this.stop(),this.hands&&(this.hands.close(),this.hands=null),this.smoother.clear(),this.subject.complete(),this.videoElement=null,this.initialized=!1}requestFrame(){this._isTracking&&(this.animationFrameId=requestAnimationFrame(()=>{this.processFrame()}))}async processFrame(){if(!this._isTracking||!this.hands||!this.videoElement)return;const u=performance.now(),l=1e3/this.config.targetFps;if(u-this.lastTimestamp<l){this.requestFrame();return}this.lastTimestamp=u;try{await this.hands.send({image:this.videoElement})}catch(f){console.error("Error processing frame:",f)}this.requestFrame()}processResults(u){const l=performance.now(),f=[];if(u.multiHandLandmarks&&u.multiHandedness)for(let w=0;w<u.multiHandLandmarks.length;w++){const b=u.multiHandLandmarks[w],P=u.multiHandedness[w];if(b&&P){let V=this.convertLandmarks(b);this.config.smoothing&&(V=this.smoother.smoothLandmarks(w,V)),f.push({id:w,handedness:P.label,landmarks:V,confidence:P.score??.9})}}const p=performance.now()-l,v={hands:f,handCount:f.length,timestamp:Date.now(),processingTime:p};this.subject.next(v)}convertLandmarks(u){const l=[];for(let f=0;f<Et;f++){const p=u[f];p?l.push({x:p.x,y:p.y,z:p.z}):l.push({x:0,y:0,z:0})}return l}}const ui={width:640,height:480,facingMode:"user"};class li{constructor(u={}){x(this,"videoElement",null);x(this,"stream",null);x(this,"config");this.config={...ui,...u}}async initialize(u){this.videoElement=u;try{this.stream=await navigator.mediaDevices.getUserMedia({video:{width:{ideal:this.config.width},height:{ideal:this.config.height},facingMode:this.config.facingMode},audio:!1}),this.videoElement.srcObject=this.stream,await new Promise((l,f)=>{if(!this.videoElement){f(new Error("Video element not available"));return}this.videoElement.onloadedmetadata=()=>{l()},this.videoElement.onerror=()=>{f(new Error("Failed to load video"))}}),await this.videoElement.play()}catch(l){const f=this.getErrorMessage(l);throw new Error(`Camera initialization failed: ${f}`)}}async checkPermission(){try{return(await navigator.permissions.query({name:"camera"})).state}catch{return"prompt"}}getVideoElement(){return this.videoElement}getDimensions(){return this.videoElement?{width:this.videoElement.videoWidth||this.config.width,height:this.videoElement.videoHeight||this.config.height}:{width:this.config.width,height:this.config.height}}stop(){this.stream&&(this.stream.getTracks().forEach(u=>u.stop()),this.stream=null),this.videoElement&&(this.videoElement.srcObject=null)}dispose(){this.stop(),this.videoElement=null}getErrorMessage(u){if(u instanceof DOMException)switch(u.name){case"NotAllowedError":return"Camera access was denied. Please grant permission to use the camera.";case"NotFoundError":return"No camera found. Please connect a camera and try again.";case"NotReadableError":return"Camera is in use by another application.";case"OverconstrainedError":return"Camera does not meet the required constraints.";default:return u.message}return u instanceof Error?u.message:"Unknown error occurred"}}const ai={showLandmarks:!0,showConnections:!0,showFps:!0,landmarkRadius:ei,connectionWidth:ri};class ci{constructor(){x(this,"frames",[]);x(this,"windowSize",30)}tick(){const u=performance.now();for(this.frames.push(u);this.frames.length>this.windowSize;)this.frames.shift()}getFps(){if(this.frames.length<2)return 0;const u=this.frames[0],f=this.frames[this.frames.length-1]-u;return f===0?0:Math.round((this.frames.length-1)/f*1e3)}reset(){this.frames=[]}}class fi{constructor(u={}){x(this,"canvas",null);x(this,"ctx",null);x(this,"config");x(this,"fpsCalculator",new ci);x(this,"fpsElement",null);this.config={...ai,...u}}initialize(u,l){this.canvas=u,this.ctx=u.getContext("2d",{willReadFrequently:!1}),this.fpsElement=l??null}setDimensions(u,l){this.canvas&&(this.canvas.width=u,this.canvas.height=l)}draw(u){if(!(!this.ctx||!this.canvas)){this.ctx.clearRect(0,0,this.canvas.width,this.canvas.height),this.fpsCalculator.tick(),this.updateFpsDisplay();for(const l of u.hands)this.drawHand(l)}}clear(){!this.ctx||!this.canvas||this.ctx.clearRect(0,0,this.canvas.width,this.canvas.height)}dispose(){this.clear(),this.fpsCalculator.reset(),this.canvas=null,this.ctx=null,this.fpsElement=null}drawHand(u){if(!this.ctx||!this.canvas)return;const{landmarks:l}=u,f=this.canvas.width,p=this.canvas.height;this.config.showConnections&&this.drawConnections(l,f,p),this.config.showLandmarks&&this.drawLandmarks(l,f,p)}drawConnections(u,l,f){if(this.ctx){this.ctx.strokeStyle=ti,this.ctx.lineWidth=this.config.connectionWidth,this.ctx.lineCap="round";for(const[p,v]of qn){const w=u[p],b=u[v];!w||!b||(this.ctx.beginPath(),this.ctx.moveTo(w.x*l,w.y*f),this.ctx.lineTo(b.x*l,b.y*f),this.ctx.stroke())}}}drawLandmarks(u,l,f){if(this.ctx)for(let p=0;p<u.length;p++){const v=u[p];if(!v)continue;const w=v.x*l,b=v.y*f,P=this.getLandmarkColor(p);this.ctx.beginPath(),this.ctx.arc(w,b,this.config.landmarkRadius,0,Math.PI*2),this.ctx.fillStyle=P,this.ctx.fill(),this.ctx.strokeStyle="rgba(0, 0, 0, 0.5)",this.ctx.lineWidth=1,this.ctx.stroke()}}getLandmarkColor(u){const l=lt.WRIST,f=lt.THUMB_TIP,p=lt.INDEX_FINGER_TIP,v=lt.MIDDLE_FINGER_TIP,w=lt.RING_FINGER_TIP;return u===l?ut.wrist:u<=f?ut.thumb:u<=p?ut.index:u<=v?ut.middle:u<=w?ut.ring:ut.pinky}updateFpsDisplay(){if(!this.config.showFps||!this.fpsElement)return;const u=this.fpsCalculator.getFps();this.fpsElement.textContent=`FPS: ${u}`}}class hi{constructor(){x(this,"state",{isInitialized:!1,isTracking:!1,error:null});x(this,"cameraPreview");x(this,"handTracker");x(this,"debugOverlay");x(this,"statusEl",null);x(this,"startBtn",null);x(this,"stopBtn",null);x(this,"videoEl",null);x(this,"canvasEl",null);x(this,"fpsEl",null);this.cameraPreview=new li,this.handTracker=new si,this.debugOverlay=new fi}initialize(){if(this.statusEl=document.getElementById("status"),this.startBtn=document.getElementById("startBtn"),this.stopBtn=document.getElementById("stopBtn"),this.videoEl=document.getElementById("webcam"),this.canvasEl=document.getElementById("overlay"),this.fpsEl=document.getElementById("fps"),!this.videoEl||!this.canvasEl){this.setError("Required DOM elements not found");return}this.setupEventListeners(),this.updateStatus("Ready - Click Start to begin"),this.state.isInitialized=!0}setupEventListeners(){var u,l;(u=this.startBtn)==null||u.addEventListener("click",()=>{this.start()}),(l=this.stopBtn)==null||l.addEventListener("click",()=>{this.stop()}),document.addEventListener("visibilitychange",()=>{document.hidden&&this.state.isTracking&&this.stop()})}async start(){if(!(this.state.isTracking||!this.videoEl||!this.canvasEl))try{this.updateStatus("Initializing camera..."),this.setButtonsEnabled(!1,!1),await this.cameraPreview.initialize(this.videoEl);const{width:u,height:l}=this.cameraPreview.getDimensions();this.debugOverlay.setDimensions(u,l),this.debugOverlay.initialize(this.canvasEl,this.fpsEl??void 0),this.updateStatus("Loading hand tracking model..."),await this.handTracker.initialize(this.videoEl),this.handTracker.hands$.subscribe({next:f=>{this.debugOverlay.draw(f)},error:f=>{console.error("Hand tracking error:",f),this.setError("Hand tracking error occurred")}}),this.handTracker.start(),this.state.isTracking=!0,this.updateStatus("Tracking",!0),this.setButtonsEnabled(!1,!0)}catch(u){console.error("Failed to start:",u);const l=u instanceof Error?u.message:"Unknown error";this.setError(l),this.setButtonsEnabled(!0,!1)}}stop(){this.state.isTracking&&(this.handTracker.stop(),this.cameraPreview.stop(),this.debugOverlay.clear(),this.state.isTracking=!1,this.updateStatus("Stopped"),this.setButtonsEnabled(!0,!1))}updateStatus(u,l=!1){this.statusEl&&(this.statusEl.textContent=u,this.statusEl.classList.toggle("tracking",l),this.statusEl.classList.toggle("error",!1))}setError(u){this.state.error=u,this.statusEl&&(this.statusEl.textContent=`Error: ${u}`,this.statusEl.classList.add("error"),this.statusEl.classList.remove("tracking"))}setButtonsEnabled(u,l){this.startBtn&&(this.startBtn.disabled=!u),this.stopBtn&&(this.stopBtn.disabled=!l)}dispose(){this.stop(),this.handTracker.dispose(),this.cameraPreview.dispose(),this.debugOverlay.dispose()}}document.addEventListener("DOMContentLoaded",()=>{const a=new hi;a.initialize(),window.addEventListener("beforeunload",()=>{a.dispose()})});
//# sourceMappingURL=index-QZeJm8tt.js.map
