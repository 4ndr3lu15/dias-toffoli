{"version":3,"file":"index-1-wy8GH6.js","sources":["../../node_modules/tslib/tslib.es6.mjs","../../node_modules/rxjs/dist/esm5/internal/util/isFunction.js","../../node_modules/rxjs/dist/esm5/internal/util/createErrorClass.js","../../node_modules/rxjs/dist/esm5/internal/util/UnsubscriptionError.js","../../node_modules/rxjs/dist/esm5/internal/util/arrRemove.js","../../node_modules/rxjs/dist/esm5/internal/Subscription.js","../../node_modules/rxjs/dist/esm5/internal/config.js","../../node_modules/rxjs/dist/esm5/internal/scheduler/timeoutProvider.js","../../node_modules/rxjs/dist/esm5/internal/util/reportUnhandledError.js","../../node_modules/rxjs/dist/esm5/internal/util/noop.js","../../node_modules/rxjs/dist/esm5/internal/util/errorContext.js","../../node_modules/rxjs/dist/esm5/internal/Subscriber.js","../../node_modules/rxjs/dist/esm5/internal/symbol/observable.js","../../node_modules/rxjs/dist/esm5/internal/util/identity.js","../../node_modules/rxjs/dist/esm5/internal/util/pipe.js","../../node_modules/rxjs/dist/esm5/internal/Observable.js","../../node_modules/rxjs/dist/esm5/internal/util/lift.js","../../node_modules/rxjs/dist/esm5/internal/operators/OperatorSubscriber.js","../../node_modules/rxjs/dist/esm5/internal/util/ObjectUnsubscribedError.js","../../node_modules/rxjs/dist/esm5/internal/Subject.js","../../node_modules/rxjs/dist/esm5/internal/BehaviorSubject.js","../../node_modules/rxjs/dist/esm5/internal/operators/map.js","../../src/types/hand.types.ts","../../src/types/control.types.ts","../../src/types/constants.ts","../../src/core/IHandTracker.ts","../../src/utils/smoothing.ts","../../src/utils/mediapipe-loader.ts","../../src/core/HandTracker.ts","../../src/ui/CameraPreview.ts","../../src/ui/DebugOverlay.ts","../../src/controllers/IController.ts","../../src/controllers/PositionController.ts","../../src/controllers/GestureController.ts","../../src/controllers/DistanceController.ts","../../src/controllers/ControllerManager.ts","../../src/main.ts"],"sourcesContent":["/******************************************************************************\nCopyright (c) Microsoft Corporation.\n\nPermission to use, copy, modify, and/or distribute this software for any\npurpose with or without fee is hereby granted.\n\nTHE SOFTWARE IS PROVIDED \"AS IS\" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH\nREGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY\nAND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,\nINDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM\nLOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR\nOTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR\nPERFORMANCE OF THIS SOFTWARE.\n***************************************************************************** */\n/* global Reflect, Promise, SuppressedError, Symbol, Iterator */\n\nvar extendStatics = function(d, b) {\n  extendStatics = Object.setPrototypeOf ||\n      ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n      function (d, b) { for (var p in b) if (Object.prototype.hasOwnProperty.call(b, p)) d[p] = b[p]; };\n  return extendStatics(d, b);\n};\n\nexport function __extends(d, b) {\n  if (typeof b !== \"function\" && b !== null)\n      throw new TypeError(\"Class extends value \" + String(b) + \" is not a constructor or null\");\n  extendStatics(d, b);\n  function __() { this.constructor = d; }\n  d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n}\n\nexport var __assign = function() {\n  __assign = Object.assign || function __assign(t) {\n      for (var s, i = 1, n = arguments.length; i < n; i++) {\n          s = arguments[i];\n          for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p)) t[p] = s[p];\n      }\n      return t;\n  }\n  return __assign.apply(this, arguments);\n}\n\nexport function __rest(s, e) {\n  var t = {};\n  for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p) && e.indexOf(p) < 0)\n      t[p] = s[p];\n  if (s != null && typeof Object.getOwnPropertySymbols === \"function\")\n      for (var i = 0, p = Object.getOwnPropertySymbols(s); i < p.length; i++) {\n          if (e.indexOf(p[i]) < 0 && Object.prototype.propertyIsEnumerable.call(s, p[i]))\n              t[p[i]] = s[p[i]];\n      }\n  return t;\n}\n\nexport function __decorate(decorators, target, key, desc) {\n  var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\n  if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\n  else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n  return c > 3 && r && Object.defineProperty(target, key, r), r;\n}\n\nexport function __param(paramIndex, decorator) {\n  return function (target, key) { decorator(target, key, paramIndex); }\n}\n\nexport function __esDecorate(ctor, descriptorIn, decorators, contextIn, initializers, extraInitializers) {\n  function accept(f) { if (f !== void 0 && typeof f !== \"function\") throw new TypeError(\"Function expected\"); return f; }\n  var kind = contextIn.kind, key = kind === \"getter\" ? \"get\" : kind === \"setter\" ? \"set\" : \"value\";\n  var target = !descriptorIn && ctor ? contextIn[\"static\"] ? ctor : ctor.prototype : null;\n  var descriptor = descriptorIn || (target ? Object.getOwnPropertyDescriptor(target, contextIn.name) : {});\n  var _, done = false;\n  for (var i = decorators.length - 1; i >= 0; i--) {\n      var context = {};\n      for (var p in contextIn) context[p] = p === \"access\" ? {} : contextIn[p];\n      for (var p in contextIn.access) context.access[p] = contextIn.access[p];\n      context.addInitializer = function (f) { if (done) throw new TypeError(\"Cannot add initializers after decoration has completed\"); extraInitializers.push(accept(f || null)); };\n      var result = (0, decorators[i])(kind === \"accessor\" ? { get: descriptor.get, set: descriptor.set } : descriptor[key], context);\n      if (kind === \"accessor\") {\n          if (result === void 0) continue;\n          if (result === null || typeof result !== \"object\") throw new TypeError(\"Object expected\");\n          if (_ = accept(result.get)) descriptor.get = _;\n          if (_ = accept(result.set)) descriptor.set = _;\n          if (_ = accept(result.init)) initializers.unshift(_);\n      }\n      else if (_ = accept(result)) {\n          if (kind === \"field\") initializers.unshift(_);\n          else descriptor[key] = _;\n      }\n  }\n  if (target) Object.defineProperty(target, contextIn.name, descriptor);\n  done = true;\n};\n\nexport function __runInitializers(thisArg, initializers, value) {\n  var useValue = arguments.length > 2;\n  for (var i = 0; i < initializers.length; i++) {\n      value = useValue ? initializers[i].call(thisArg, value) : initializers[i].call(thisArg);\n  }\n  return useValue ? value : void 0;\n};\n\nexport function __propKey(x) {\n  return typeof x === \"symbol\" ? x : \"\".concat(x);\n};\n\nexport function __setFunctionName(f, name, prefix) {\n  if (typeof name === \"symbol\") name = name.description ? \"[\".concat(name.description, \"]\") : \"\";\n  return Object.defineProperty(f, \"name\", { configurable: true, value: prefix ? \"\".concat(prefix, \" \", name) : name });\n};\n\nexport function __metadata(metadataKey, metadataValue) {\n  if (typeof Reflect === \"object\" && typeof Reflect.metadata === \"function\") return Reflect.metadata(metadataKey, metadataValue);\n}\n\nexport function __awaiter(thisArg, _arguments, P, generator) {\n  function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\n  return new (P || (P = Promise))(function (resolve, reject) {\n      function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\n      function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\n      function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\n      step((generator = generator.apply(thisArg, _arguments || [])).next());\n  });\n}\n\nexport function __generator(thisArg, body) {\n  var _ = { label: 0, sent: function() { if (t[0] & 1) throw t[1]; return t[1]; }, trys: [], ops: [] }, f, y, t, g = Object.create((typeof Iterator === \"function\" ? Iterator : Object).prototype);\n  return g.next = verb(0), g[\"throw\"] = verb(1), g[\"return\"] = verb(2), typeof Symbol === \"function\" && (g[Symbol.iterator] = function() { return this; }), g;\n  function verb(n) { return function (v) { return step([n, v]); }; }\n  function step(op) {\n      if (f) throw new TypeError(\"Generator is already executing.\");\n      while (g && (g = 0, op[0] && (_ = 0)), _) try {\n          if (f = 1, y && (t = op[0] & 2 ? y[\"return\"] : op[0] ? y[\"throw\"] || ((t = y[\"return\"]) && t.call(y), 0) : y.next) && !(t = t.call(y, op[1])).done) return t;\n          if (y = 0, t) op = [op[0] & 2, t.value];\n          switch (op[0]) {\n              case 0: case 1: t = op; break;\n              case 4: _.label++; return { value: op[1], done: false };\n              case 5: _.label++; y = op[1]; op = [0]; continue;\n              case 7: op = _.ops.pop(); _.trys.pop(); continue;\n              default:\n                  if (!(t = _.trys, t = t.length > 0 && t[t.length - 1]) && (op[0] === 6 || op[0] === 2)) { _ = 0; continue; }\n                  if (op[0] === 3 && (!t || (op[1] > t[0] && op[1] < t[3]))) { _.label = op[1]; break; }\n                  if (op[0] === 6 && _.label < t[1]) { _.label = t[1]; t = op; break; }\n                  if (t && _.label < t[2]) { _.label = t[2]; _.ops.push(op); break; }\n                  if (t[2]) _.ops.pop();\n                  _.trys.pop(); continue;\n          }\n          op = body.call(thisArg, _);\n      } catch (e) { op = [6, e]; y = 0; } finally { f = t = 0; }\n      if (op[0] & 5) throw op[1]; return { value: op[0] ? op[1] : void 0, done: true };\n  }\n}\n\nexport var __createBinding = Object.create ? (function(o, m, k, k2) {\n  if (k2 === undefined) k2 = k;\n  var desc = Object.getOwnPropertyDescriptor(m, k);\n  if (!desc || (\"get\" in desc ? !m.__esModule : desc.writable || desc.configurable)) {\n      desc = { enumerable: true, get: function() { return m[k]; } };\n  }\n  Object.defineProperty(o, k2, desc);\n}) : (function(o, m, k, k2) {\n  if (k2 === undefined) k2 = k;\n  o[k2] = m[k];\n});\n\nexport function __exportStar(m, o) {\n  for (var p in m) if (p !== \"default\" && !Object.prototype.hasOwnProperty.call(o, p)) __createBinding(o, m, p);\n}\n\nexport function __values(o) {\n  var s = typeof Symbol === \"function\" && Symbol.iterator, m = s && o[s], i = 0;\n  if (m) return m.call(o);\n  if (o && typeof o.length === \"number\") return {\n      next: function () {\n          if (o && i >= o.length) o = void 0;\n          return { value: o && o[i++], done: !o };\n      }\n  };\n  throw new TypeError(s ? \"Object is not iterable.\" : \"Symbol.iterator is not defined.\");\n}\n\nexport function __read(o, n) {\n  var m = typeof Symbol === \"function\" && o[Symbol.iterator];\n  if (!m) return o;\n  var i = m.call(o), r, ar = [], e;\n  try {\n      while ((n === void 0 || n-- > 0) && !(r = i.next()).done) ar.push(r.value);\n  }\n  catch (error) { e = { error: error }; }\n  finally {\n      try {\n          if (r && !r.done && (m = i[\"return\"])) m.call(i);\n      }\n      finally { if (e) throw e.error; }\n  }\n  return ar;\n}\n\n/** @deprecated */\nexport function __spread() {\n  for (var ar = [], i = 0; i < arguments.length; i++)\n      ar = ar.concat(__read(arguments[i]));\n  return ar;\n}\n\n/** @deprecated */\nexport function __spreadArrays() {\n  for (var s = 0, i = 0, il = arguments.length; i < il; i++) s += arguments[i].length;\n  for (var r = Array(s), k = 0, i = 0; i < il; i++)\n      for (var a = arguments[i], j = 0, jl = a.length; j < jl; j++, k++)\n          r[k] = a[j];\n  return r;\n}\n\nexport function __spreadArray(to, from, pack) {\n  if (pack || arguments.length === 2) for (var i = 0, l = from.length, ar; i < l; i++) {\n      if (ar || !(i in from)) {\n          if (!ar) ar = Array.prototype.slice.call(from, 0, i);\n          ar[i] = from[i];\n      }\n  }\n  return to.concat(ar || Array.prototype.slice.call(from));\n}\n\nexport function __await(v) {\n  return this instanceof __await ? (this.v = v, this) : new __await(v);\n}\n\nexport function __asyncGenerator(thisArg, _arguments, generator) {\n  if (!Symbol.asyncIterator) throw new TypeError(\"Symbol.asyncIterator is not defined.\");\n  var g = generator.apply(thisArg, _arguments || []), i, q = [];\n  return i = Object.create((typeof AsyncIterator === \"function\" ? AsyncIterator : Object).prototype), verb(\"next\"), verb(\"throw\"), verb(\"return\", awaitReturn), i[Symbol.asyncIterator] = function () { return this; }, i;\n  function awaitReturn(f) { return function (v) { return Promise.resolve(v).then(f, reject); }; }\n  function verb(n, f) { if (g[n]) { i[n] = function (v) { return new Promise(function (a, b) { q.push([n, v, a, b]) > 1 || resume(n, v); }); }; if (f) i[n] = f(i[n]); } }\n  function resume(n, v) { try { step(g[n](v)); } catch (e) { settle(q[0][3], e); } }\n  function step(r) { r.value instanceof __await ? Promise.resolve(r.value.v).then(fulfill, reject) : settle(q[0][2], r); }\n  function fulfill(value) { resume(\"next\", value); }\n  function reject(value) { resume(\"throw\", value); }\n  function settle(f, v) { if (f(v), q.shift(), q.length) resume(q[0][0], q[0][1]); }\n}\n\nexport function __asyncDelegator(o) {\n  var i, p;\n  return i = {}, verb(\"next\"), verb(\"throw\", function (e) { throw e; }), verb(\"return\"), i[Symbol.iterator] = function () { return this; }, i;\n  function verb(n, f) { i[n] = o[n] ? function (v) { return (p = !p) ? { value: __await(o[n](v)), done: false } : f ? f(v) : v; } : f; }\n}\n\nexport function __asyncValues(o) {\n  if (!Symbol.asyncIterator) throw new TypeError(\"Symbol.asyncIterator is not defined.\");\n  var m = o[Symbol.asyncIterator], i;\n  return m ? m.call(o) : (o = typeof __values === \"function\" ? __values(o) : o[Symbol.iterator](), i = {}, verb(\"next\"), verb(\"throw\"), verb(\"return\"), i[Symbol.asyncIterator] = function () { return this; }, i);\n  function verb(n) { i[n] = o[n] && function (v) { return new Promise(function (resolve, reject) { v = o[n](v), settle(resolve, reject, v.done, v.value); }); }; }\n  function settle(resolve, reject, d, v) { Promise.resolve(v).then(function(v) { resolve({ value: v, done: d }); }, reject); }\n}\n\nexport function __makeTemplateObject(cooked, raw) {\n  if (Object.defineProperty) { Object.defineProperty(cooked, \"raw\", { value: raw }); } else { cooked.raw = raw; }\n  return cooked;\n};\n\nvar __setModuleDefault = Object.create ? (function(o, v) {\n  Object.defineProperty(o, \"default\", { enumerable: true, value: v });\n}) : function(o, v) {\n  o[\"default\"] = v;\n};\n\nvar ownKeys = function(o) {\n  ownKeys = Object.getOwnPropertyNames || function (o) {\n    var ar = [];\n    for (var k in o) if (Object.prototype.hasOwnProperty.call(o, k)) ar[ar.length] = k;\n    return ar;\n  };\n  return ownKeys(o);\n};\n\nexport function __importStar(mod) {\n  if (mod && mod.__esModule) return mod;\n  var result = {};\n  if (mod != null) for (var k = ownKeys(mod), i = 0; i < k.length; i++) if (k[i] !== \"default\") __createBinding(result, mod, k[i]);\n  __setModuleDefault(result, mod);\n  return result;\n}\n\nexport function __importDefault(mod) {\n  return (mod && mod.__esModule) ? mod : { default: mod };\n}\n\nexport function __classPrivateFieldGet(receiver, state, kind, f) {\n  if (kind === \"a\" && !f) throw new TypeError(\"Private accessor was defined without a getter\");\n  if (typeof state === \"function\" ? receiver !== state || !f : !state.has(receiver)) throw new TypeError(\"Cannot read private member from an object whose class did not declare it\");\n  return kind === \"m\" ? f : kind === \"a\" ? f.call(receiver) : f ? f.value : state.get(receiver);\n}\n\nexport function __classPrivateFieldSet(receiver, state, value, kind, f) {\n  if (kind === \"m\") throw new TypeError(\"Private method is not writable\");\n  if (kind === \"a\" && !f) throw new TypeError(\"Private accessor was defined without a setter\");\n  if (typeof state === \"function\" ? receiver !== state || !f : !state.has(receiver)) throw new TypeError(\"Cannot write private member to an object whose class did not declare it\");\n  return (kind === \"a\" ? f.call(receiver, value) : f ? f.value = value : state.set(receiver, value)), value;\n}\n\nexport function __classPrivateFieldIn(state, receiver) {\n  if (receiver === null || (typeof receiver !== \"object\" && typeof receiver !== \"function\")) throw new TypeError(\"Cannot use 'in' operator on non-object\");\n  return typeof state === \"function\" ? receiver === state : state.has(receiver);\n}\n\nexport function __addDisposableResource(env, value, async) {\n  if (value !== null && value !== void 0) {\n    if (typeof value !== \"object\" && typeof value !== \"function\") throw new TypeError(\"Object expected.\");\n    var dispose, inner;\n    if (async) {\n      if (!Symbol.asyncDispose) throw new TypeError(\"Symbol.asyncDispose is not defined.\");\n      dispose = value[Symbol.asyncDispose];\n    }\n    if (dispose === void 0) {\n      if (!Symbol.dispose) throw new TypeError(\"Symbol.dispose is not defined.\");\n      dispose = value[Symbol.dispose];\n      if (async) inner = dispose;\n    }\n    if (typeof dispose !== \"function\") throw new TypeError(\"Object not disposable.\");\n    if (inner) dispose = function() { try { inner.call(this); } catch (e) { return Promise.reject(e); } };\n    env.stack.push({ value: value, dispose: dispose, async: async });\n  }\n  else if (async) {\n    env.stack.push({ async: true });\n  }\n  return value;\n}\n\nvar _SuppressedError = typeof SuppressedError === \"function\" ? SuppressedError : function (error, suppressed, message) {\n  var e = new Error(message);\n  return e.name = \"SuppressedError\", e.error = error, e.suppressed = suppressed, e;\n};\n\nexport function __disposeResources(env) {\n  function fail(e) {\n    env.error = env.hasError ? new _SuppressedError(e, env.error, \"An error was suppressed during disposal.\") : e;\n    env.hasError = true;\n  }\n  var r, s = 0;\n  function next() {\n    while (r = env.stack.pop()) {\n      try {\n        if (!r.async && s === 1) return s = 0, env.stack.push(r), Promise.resolve().then(next);\n        if (r.dispose) {\n          var result = r.dispose.call(r.value);\n          if (r.async) return s |= 2, Promise.resolve(result).then(next, function(e) { fail(e); return next(); });\n        }\n        else s |= 1;\n      }\n      catch (e) {\n        fail(e);\n      }\n    }\n    if (s === 1) return env.hasError ? Promise.reject(env.error) : Promise.resolve();\n    if (env.hasError) throw env.error;\n  }\n  return next();\n}\n\nexport function __rewriteRelativeImportExtension(path, preserveJsx) {\n  if (typeof path === \"string\" && /^\\.\\.?\\//.test(path)) {\n      return path.replace(/\\.(tsx)$|((?:\\.d)?)((?:\\.[^./]+?)?)\\.([cm]?)ts$/i, function (m, tsx, d, ext, cm) {\n          return tsx ? preserveJsx ? \".jsx\" : \".js\" : d && (!ext || !cm) ? m : (d + ext + \".\" + cm.toLowerCase() + \"js\");\n      });\n  }\n  return path;\n}\n\nexport default {\n  __extends,\n  __assign,\n  __rest,\n  __decorate,\n  __param,\n  __esDecorate,\n  __runInitializers,\n  __propKey,\n  __setFunctionName,\n  __metadata,\n  __awaiter,\n  __generator,\n  __createBinding,\n  __exportStar,\n  __values,\n  __read,\n  __spread,\n  __spreadArrays,\n  __spreadArray,\n  __await,\n  __asyncGenerator,\n  __asyncDelegator,\n  __asyncValues,\n  __makeTemplateObject,\n  __importStar,\n  __importDefault,\n  __classPrivateFieldGet,\n  __classPrivateFieldSet,\n  __classPrivateFieldIn,\n  __addDisposableResource,\n  __disposeResources,\n  __rewriteRelativeImportExtension,\n};\n","export function isFunction(value) {\n    return typeof value === 'function';\n}\n//# sourceMappingURL=isFunction.js.map","export function createErrorClass(createImpl) {\n    var _super = function (instance) {\n        Error.call(instance);\n        instance.stack = new Error().stack;\n    };\n    var ctorFunc = createImpl(_super);\n    ctorFunc.prototype = Object.create(Error.prototype);\n    ctorFunc.prototype.constructor = ctorFunc;\n    return ctorFunc;\n}\n//# sourceMappingURL=createErrorClass.js.map","import { createErrorClass } from './createErrorClass';\nexport var UnsubscriptionError = createErrorClass(function (_super) {\n    return function UnsubscriptionErrorImpl(errors) {\n        _super(this);\n        this.message = errors\n            ? errors.length + \" errors occurred during unsubscription:\\n\" + errors.map(function (err, i) { return i + 1 + \") \" + err.toString(); }).join('\\n  ')\n            : '';\n        this.name = 'UnsubscriptionError';\n        this.errors = errors;\n    };\n});\n//# sourceMappingURL=UnsubscriptionError.js.map","export function arrRemove(arr, item) {\n    if (arr) {\n        var index = arr.indexOf(item);\n        0 <= index && arr.splice(index, 1);\n    }\n}\n//# sourceMappingURL=arrRemove.js.map","import { __read, __spreadArray, __values } from \"tslib\";\nimport { isFunction } from './util/isFunction';\nimport { UnsubscriptionError } from './util/UnsubscriptionError';\nimport { arrRemove } from './util/arrRemove';\nvar Subscription = (function () {\n    function Subscription(initialTeardown) {\n        this.initialTeardown = initialTeardown;\n        this.closed = false;\n        this._parentage = null;\n        this._finalizers = null;\n    }\n    Subscription.prototype.unsubscribe = function () {\n        var e_1, _a, e_2, _b;\n        var errors;\n        if (!this.closed) {\n            this.closed = true;\n            var _parentage = this._parentage;\n            if (_parentage) {\n                this._parentage = null;\n                if (Array.isArray(_parentage)) {\n                    try {\n                        for (var _parentage_1 = __values(_parentage), _parentage_1_1 = _parentage_1.next(); !_parentage_1_1.done; _parentage_1_1 = _parentage_1.next()) {\n                            var parent_1 = _parentage_1_1.value;\n                            parent_1.remove(this);\n                        }\n                    }\n                    catch (e_1_1) { e_1 = { error: e_1_1 }; }\n                    finally {\n                        try {\n                            if (_parentage_1_1 && !_parentage_1_1.done && (_a = _parentage_1.return)) _a.call(_parentage_1);\n                        }\n                        finally { if (e_1) throw e_1.error; }\n                    }\n                }\n                else {\n                    _parentage.remove(this);\n                }\n            }\n            var initialFinalizer = this.initialTeardown;\n            if (isFunction(initialFinalizer)) {\n                try {\n                    initialFinalizer();\n                }\n                catch (e) {\n                    errors = e instanceof UnsubscriptionError ? e.errors : [e];\n                }\n            }\n            var _finalizers = this._finalizers;\n            if (_finalizers) {\n                this._finalizers = null;\n                try {\n                    for (var _finalizers_1 = __values(_finalizers), _finalizers_1_1 = _finalizers_1.next(); !_finalizers_1_1.done; _finalizers_1_1 = _finalizers_1.next()) {\n                        var finalizer = _finalizers_1_1.value;\n                        try {\n                            execFinalizer(finalizer);\n                        }\n                        catch (err) {\n                            errors = errors !== null && errors !== void 0 ? errors : [];\n                            if (err instanceof UnsubscriptionError) {\n                                errors = __spreadArray(__spreadArray([], __read(errors)), __read(err.errors));\n                            }\n                            else {\n                                errors.push(err);\n                            }\n                        }\n                    }\n                }\n                catch (e_2_1) { e_2 = { error: e_2_1 }; }\n                finally {\n                    try {\n                        if (_finalizers_1_1 && !_finalizers_1_1.done && (_b = _finalizers_1.return)) _b.call(_finalizers_1);\n                    }\n                    finally { if (e_2) throw e_2.error; }\n                }\n            }\n            if (errors) {\n                throw new UnsubscriptionError(errors);\n            }\n        }\n    };\n    Subscription.prototype.add = function (teardown) {\n        var _a;\n        if (teardown && teardown !== this) {\n            if (this.closed) {\n                execFinalizer(teardown);\n            }\n            else {\n                if (teardown instanceof Subscription) {\n                    if (teardown.closed || teardown._hasParent(this)) {\n                        return;\n                    }\n                    teardown._addParent(this);\n                }\n                (this._finalizers = (_a = this._finalizers) !== null && _a !== void 0 ? _a : []).push(teardown);\n            }\n        }\n    };\n    Subscription.prototype._hasParent = function (parent) {\n        var _parentage = this._parentage;\n        return _parentage === parent || (Array.isArray(_parentage) && _parentage.includes(parent));\n    };\n    Subscription.prototype._addParent = function (parent) {\n        var _parentage = this._parentage;\n        this._parentage = Array.isArray(_parentage) ? (_parentage.push(parent), _parentage) : _parentage ? [_parentage, parent] : parent;\n    };\n    Subscription.prototype._removeParent = function (parent) {\n        var _parentage = this._parentage;\n        if (_parentage === parent) {\n            this._parentage = null;\n        }\n        else if (Array.isArray(_parentage)) {\n            arrRemove(_parentage, parent);\n        }\n    };\n    Subscription.prototype.remove = function (teardown) {\n        var _finalizers = this._finalizers;\n        _finalizers && arrRemove(_finalizers, teardown);\n        if (teardown instanceof Subscription) {\n            teardown._removeParent(this);\n        }\n    };\n    Subscription.EMPTY = (function () {\n        var empty = new Subscription();\n        empty.closed = true;\n        return empty;\n    })();\n    return Subscription;\n}());\nexport { Subscription };\nexport var EMPTY_SUBSCRIPTION = Subscription.EMPTY;\nexport function isSubscription(value) {\n    return (value instanceof Subscription ||\n        (value && 'closed' in value && isFunction(value.remove) && isFunction(value.add) && isFunction(value.unsubscribe)));\n}\nfunction execFinalizer(finalizer) {\n    if (isFunction(finalizer)) {\n        finalizer();\n    }\n    else {\n        finalizer.unsubscribe();\n    }\n}\n//# sourceMappingURL=Subscription.js.map","export var config = {\n    onUnhandledError: null,\n    onStoppedNotification: null,\n    Promise: undefined,\n    useDeprecatedSynchronousErrorHandling: false,\n    useDeprecatedNextContext: false,\n};\n//# sourceMappingURL=config.js.map","import { __read, __spreadArray } from \"tslib\";\nexport var timeoutProvider = {\n    setTimeout: function (handler, timeout) {\n        var args = [];\n        for (var _i = 2; _i < arguments.length; _i++) {\n            args[_i - 2] = arguments[_i];\n        }\n        var delegate = timeoutProvider.delegate;\n        if (delegate === null || delegate === void 0 ? void 0 : delegate.setTimeout) {\n            return delegate.setTimeout.apply(delegate, __spreadArray([handler, timeout], __read(args)));\n        }\n        return setTimeout.apply(void 0, __spreadArray([handler, timeout], __read(args)));\n    },\n    clearTimeout: function (handle) {\n        var delegate = timeoutProvider.delegate;\n        return ((delegate === null || delegate === void 0 ? void 0 : delegate.clearTimeout) || clearTimeout)(handle);\n    },\n    delegate: undefined,\n};\n//# sourceMappingURL=timeoutProvider.js.map","import { config } from '../config';\nimport { timeoutProvider } from '../scheduler/timeoutProvider';\nexport function reportUnhandledError(err) {\n    timeoutProvider.setTimeout(function () {\n        var onUnhandledError = config.onUnhandledError;\n        if (onUnhandledError) {\n            onUnhandledError(err);\n        }\n        else {\n            throw err;\n        }\n    });\n}\n//# sourceMappingURL=reportUnhandledError.js.map","export function noop() { }\n//# sourceMappingURL=noop.js.map","import { config } from '../config';\nvar context = null;\nexport function errorContext(cb) {\n    if (config.useDeprecatedSynchronousErrorHandling) {\n        var isRoot = !context;\n        if (isRoot) {\n            context = { errorThrown: false, error: null };\n        }\n        cb();\n        if (isRoot) {\n            var _a = context, errorThrown = _a.errorThrown, error = _a.error;\n            context = null;\n            if (errorThrown) {\n                throw error;\n            }\n        }\n    }\n    else {\n        cb();\n    }\n}\nexport function captureError(err) {\n    if (config.useDeprecatedSynchronousErrorHandling && context) {\n        context.errorThrown = true;\n        context.error = err;\n    }\n}\n//# sourceMappingURL=errorContext.js.map","import { __extends } from \"tslib\";\nimport { isFunction } from './util/isFunction';\nimport { isSubscription, Subscription } from './Subscription';\nimport { config } from './config';\nimport { reportUnhandledError } from './util/reportUnhandledError';\nimport { noop } from './util/noop';\nimport { nextNotification, errorNotification, COMPLETE_NOTIFICATION } from './NotificationFactories';\nimport { timeoutProvider } from './scheduler/timeoutProvider';\nimport { captureError } from './util/errorContext';\nvar Subscriber = (function (_super) {\n    __extends(Subscriber, _super);\n    function Subscriber(destination) {\n        var _this = _super.call(this) || this;\n        _this.isStopped = false;\n        if (destination) {\n            _this.destination = destination;\n            if (isSubscription(destination)) {\n                destination.add(_this);\n            }\n        }\n        else {\n            _this.destination = EMPTY_OBSERVER;\n        }\n        return _this;\n    }\n    Subscriber.create = function (next, error, complete) {\n        return new SafeSubscriber(next, error, complete);\n    };\n    Subscriber.prototype.next = function (value) {\n        if (this.isStopped) {\n            handleStoppedNotification(nextNotification(value), this);\n        }\n        else {\n            this._next(value);\n        }\n    };\n    Subscriber.prototype.error = function (err) {\n        if (this.isStopped) {\n            handleStoppedNotification(errorNotification(err), this);\n        }\n        else {\n            this.isStopped = true;\n            this._error(err);\n        }\n    };\n    Subscriber.prototype.complete = function () {\n        if (this.isStopped) {\n            handleStoppedNotification(COMPLETE_NOTIFICATION, this);\n        }\n        else {\n            this.isStopped = true;\n            this._complete();\n        }\n    };\n    Subscriber.prototype.unsubscribe = function () {\n        if (!this.closed) {\n            this.isStopped = true;\n            _super.prototype.unsubscribe.call(this);\n            this.destination = null;\n        }\n    };\n    Subscriber.prototype._next = function (value) {\n        this.destination.next(value);\n    };\n    Subscriber.prototype._error = function (err) {\n        try {\n            this.destination.error(err);\n        }\n        finally {\n            this.unsubscribe();\n        }\n    };\n    Subscriber.prototype._complete = function () {\n        try {\n            this.destination.complete();\n        }\n        finally {\n            this.unsubscribe();\n        }\n    };\n    return Subscriber;\n}(Subscription));\nexport { Subscriber };\nvar _bind = Function.prototype.bind;\nfunction bind(fn, thisArg) {\n    return _bind.call(fn, thisArg);\n}\nvar ConsumerObserver = (function () {\n    function ConsumerObserver(partialObserver) {\n        this.partialObserver = partialObserver;\n    }\n    ConsumerObserver.prototype.next = function (value) {\n        var partialObserver = this.partialObserver;\n        if (partialObserver.next) {\n            try {\n                partialObserver.next(value);\n            }\n            catch (error) {\n                handleUnhandledError(error);\n            }\n        }\n    };\n    ConsumerObserver.prototype.error = function (err) {\n        var partialObserver = this.partialObserver;\n        if (partialObserver.error) {\n            try {\n                partialObserver.error(err);\n            }\n            catch (error) {\n                handleUnhandledError(error);\n            }\n        }\n        else {\n            handleUnhandledError(err);\n        }\n    };\n    ConsumerObserver.prototype.complete = function () {\n        var partialObserver = this.partialObserver;\n        if (partialObserver.complete) {\n            try {\n                partialObserver.complete();\n            }\n            catch (error) {\n                handleUnhandledError(error);\n            }\n        }\n    };\n    return ConsumerObserver;\n}());\nvar SafeSubscriber = (function (_super) {\n    __extends(SafeSubscriber, _super);\n    function SafeSubscriber(observerOrNext, error, complete) {\n        var _this = _super.call(this) || this;\n        var partialObserver;\n        if (isFunction(observerOrNext) || !observerOrNext) {\n            partialObserver = {\n                next: (observerOrNext !== null && observerOrNext !== void 0 ? observerOrNext : undefined),\n                error: error !== null && error !== void 0 ? error : undefined,\n                complete: complete !== null && complete !== void 0 ? complete : undefined,\n            };\n        }\n        else {\n            var context_1;\n            if (_this && config.useDeprecatedNextContext) {\n                context_1 = Object.create(observerOrNext);\n                context_1.unsubscribe = function () { return _this.unsubscribe(); };\n                partialObserver = {\n                    next: observerOrNext.next && bind(observerOrNext.next, context_1),\n                    error: observerOrNext.error && bind(observerOrNext.error, context_1),\n                    complete: observerOrNext.complete && bind(observerOrNext.complete, context_1),\n                };\n            }\n            else {\n                partialObserver = observerOrNext;\n            }\n        }\n        _this.destination = new ConsumerObserver(partialObserver);\n        return _this;\n    }\n    return SafeSubscriber;\n}(Subscriber));\nexport { SafeSubscriber };\nfunction handleUnhandledError(error) {\n    if (config.useDeprecatedSynchronousErrorHandling) {\n        captureError(error);\n    }\n    else {\n        reportUnhandledError(error);\n    }\n}\nfunction defaultErrorHandler(err) {\n    throw err;\n}\nfunction handleStoppedNotification(notification, subscriber) {\n    var onStoppedNotification = config.onStoppedNotification;\n    onStoppedNotification && timeoutProvider.setTimeout(function () { return onStoppedNotification(notification, subscriber); });\n}\nexport var EMPTY_OBSERVER = {\n    closed: true,\n    next: noop,\n    error: defaultErrorHandler,\n    complete: noop,\n};\n//# sourceMappingURL=Subscriber.js.map","export var observable = (function () { return (typeof Symbol === 'function' && Symbol.observable) || '@@observable'; })();\n//# sourceMappingURL=observable.js.map","export function identity(x) {\n    return x;\n}\n//# sourceMappingURL=identity.js.map","import { identity } from './identity';\nexport function pipe() {\n    var fns = [];\n    for (var _i = 0; _i < arguments.length; _i++) {\n        fns[_i] = arguments[_i];\n    }\n    return pipeFromArray(fns);\n}\nexport function pipeFromArray(fns) {\n    if (fns.length === 0) {\n        return identity;\n    }\n    if (fns.length === 1) {\n        return fns[0];\n    }\n    return function piped(input) {\n        return fns.reduce(function (prev, fn) { return fn(prev); }, input);\n    };\n}\n//# sourceMappingURL=pipe.js.map","import { SafeSubscriber, Subscriber } from './Subscriber';\nimport { isSubscription } from './Subscription';\nimport { observable as Symbol_observable } from './symbol/observable';\nimport { pipeFromArray } from './util/pipe';\nimport { config } from './config';\nimport { isFunction } from './util/isFunction';\nimport { errorContext } from './util/errorContext';\nvar Observable = (function () {\n    function Observable(subscribe) {\n        if (subscribe) {\n            this._subscribe = subscribe;\n        }\n    }\n    Observable.prototype.lift = function (operator) {\n        var observable = new Observable();\n        observable.source = this;\n        observable.operator = operator;\n        return observable;\n    };\n    Observable.prototype.subscribe = function (observerOrNext, error, complete) {\n        var _this = this;\n        var subscriber = isSubscriber(observerOrNext) ? observerOrNext : new SafeSubscriber(observerOrNext, error, complete);\n        errorContext(function () {\n            var _a = _this, operator = _a.operator, source = _a.source;\n            subscriber.add(operator\n                ?\n                    operator.call(subscriber, source)\n                : source\n                    ?\n                        _this._subscribe(subscriber)\n                    :\n                        _this._trySubscribe(subscriber));\n        });\n        return subscriber;\n    };\n    Observable.prototype._trySubscribe = function (sink) {\n        try {\n            return this._subscribe(sink);\n        }\n        catch (err) {\n            sink.error(err);\n        }\n    };\n    Observable.prototype.forEach = function (next, promiseCtor) {\n        var _this = this;\n        promiseCtor = getPromiseCtor(promiseCtor);\n        return new promiseCtor(function (resolve, reject) {\n            var subscriber = new SafeSubscriber({\n                next: function (value) {\n                    try {\n                        next(value);\n                    }\n                    catch (err) {\n                        reject(err);\n                        subscriber.unsubscribe();\n                    }\n                },\n                error: reject,\n                complete: resolve,\n            });\n            _this.subscribe(subscriber);\n        });\n    };\n    Observable.prototype._subscribe = function (subscriber) {\n        var _a;\n        return (_a = this.source) === null || _a === void 0 ? void 0 : _a.subscribe(subscriber);\n    };\n    Observable.prototype[Symbol_observable] = function () {\n        return this;\n    };\n    Observable.prototype.pipe = function () {\n        var operations = [];\n        for (var _i = 0; _i < arguments.length; _i++) {\n            operations[_i] = arguments[_i];\n        }\n        return pipeFromArray(operations)(this);\n    };\n    Observable.prototype.toPromise = function (promiseCtor) {\n        var _this = this;\n        promiseCtor = getPromiseCtor(promiseCtor);\n        return new promiseCtor(function (resolve, reject) {\n            var value;\n            _this.subscribe(function (x) { return (value = x); }, function (err) { return reject(err); }, function () { return resolve(value); });\n        });\n    };\n    Observable.create = function (subscribe) {\n        return new Observable(subscribe);\n    };\n    return Observable;\n}());\nexport { Observable };\nfunction getPromiseCtor(promiseCtor) {\n    var _a;\n    return (_a = promiseCtor !== null && promiseCtor !== void 0 ? promiseCtor : config.Promise) !== null && _a !== void 0 ? _a : Promise;\n}\nfunction isObserver(value) {\n    return value && isFunction(value.next) && isFunction(value.error) && isFunction(value.complete);\n}\nfunction isSubscriber(value) {\n    return (value && value instanceof Subscriber) || (isObserver(value) && isSubscription(value));\n}\n//# sourceMappingURL=Observable.js.map","import { isFunction } from './isFunction';\nexport function hasLift(source) {\n    return isFunction(source === null || source === void 0 ? void 0 : source.lift);\n}\nexport function operate(init) {\n    return function (source) {\n        if (hasLift(source)) {\n            return source.lift(function (liftedSource) {\n                try {\n                    return init(liftedSource, this);\n                }\n                catch (err) {\n                    this.error(err);\n                }\n            });\n        }\n        throw new TypeError('Unable to lift unknown Observable type');\n    };\n}\n//# sourceMappingURL=lift.js.map","import { __extends } from \"tslib\";\nimport { Subscriber } from '../Subscriber';\nexport function createOperatorSubscriber(destination, onNext, onComplete, onError, onFinalize) {\n    return new OperatorSubscriber(destination, onNext, onComplete, onError, onFinalize);\n}\nvar OperatorSubscriber = (function (_super) {\n    __extends(OperatorSubscriber, _super);\n    function OperatorSubscriber(destination, onNext, onComplete, onError, onFinalize, shouldUnsubscribe) {\n        var _this = _super.call(this, destination) || this;\n        _this.onFinalize = onFinalize;\n        _this.shouldUnsubscribe = shouldUnsubscribe;\n        _this._next = onNext\n            ? function (value) {\n                try {\n                    onNext(value);\n                }\n                catch (err) {\n                    destination.error(err);\n                }\n            }\n            : _super.prototype._next;\n        _this._error = onError\n            ? function (err) {\n                try {\n                    onError(err);\n                }\n                catch (err) {\n                    destination.error(err);\n                }\n                finally {\n                    this.unsubscribe();\n                }\n            }\n            : _super.prototype._error;\n        _this._complete = onComplete\n            ? function () {\n                try {\n                    onComplete();\n                }\n                catch (err) {\n                    destination.error(err);\n                }\n                finally {\n                    this.unsubscribe();\n                }\n            }\n            : _super.prototype._complete;\n        return _this;\n    }\n    OperatorSubscriber.prototype.unsubscribe = function () {\n        var _a;\n        if (!this.shouldUnsubscribe || this.shouldUnsubscribe()) {\n            var closed_1 = this.closed;\n            _super.prototype.unsubscribe.call(this);\n            !closed_1 && ((_a = this.onFinalize) === null || _a === void 0 ? void 0 : _a.call(this));\n        }\n    };\n    return OperatorSubscriber;\n}(Subscriber));\nexport { OperatorSubscriber };\n//# sourceMappingURL=OperatorSubscriber.js.map","import { createErrorClass } from './createErrorClass';\nexport var ObjectUnsubscribedError = createErrorClass(function (_super) {\n    return function ObjectUnsubscribedErrorImpl() {\n        _super(this);\n        this.name = 'ObjectUnsubscribedError';\n        this.message = 'object unsubscribed';\n    };\n});\n//# sourceMappingURL=ObjectUnsubscribedError.js.map","import { __extends, __values } from \"tslib\";\nimport { Observable } from './Observable';\nimport { Subscription, EMPTY_SUBSCRIPTION } from './Subscription';\nimport { ObjectUnsubscribedError } from './util/ObjectUnsubscribedError';\nimport { arrRemove } from './util/arrRemove';\nimport { errorContext } from './util/errorContext';\nvar Subject = (function (_super) {\n    __extends(Subject, _super);\n    function Subject() {\n        var _this = _super.call(this) || this;\n        _this.closed = false;\n        _this.currentObservers = null;\n        _this.observers = [];\n        _this.isStopped = false;\n        _this.hasError = false;\n        _this.thrownError = null;\n        return _this;\n    }\n    Subject.prototype.lift = function (operator) {\n        var subject = new AnonymousSubject(this, this);\n        subject.operator = operator;\n        return subject;\n    };\n    Subject.prototype._throwIfClosed = function () {\n        if (this.closed) {\n            throw new ObjectUnsubscribedError();\n        }\n    };\n    Subject.prototype.next = function (value) {\n        var _this = this;\n        errorContext(function () {\n            var e_1, _a;\n            _this._throwIfClosed();\n            if (!_this.isStopped) {\n                if (!_this.currentObservers) {\n                    _this.currentObservers = Array.from(_this.observers);\n                }\n                try {\n                    for (var _b = __values(_this.currentObservers), _c = _b.next(); !_c.done; _c = _b.next()) {\n                        var observer = _c.value;\n                        observer.next(value);\n                    }\n                }\n                catch (e_1_1) { e_1 = { error: e_1_1 }; }\n                finally {\n                    try {\n                        if (_c && !_c.done && (_a = _b.return)) _a.call(_b);\n                    }\n                    finally { if (e_1) throw e_1.error; }\n                }\n            }\n        });\n    };\n    Subject.prototype.error = function (err) {\n        var _this = this;\n        errorContext(function () {\n            _this._throwIfClosed();\n            if (!_this.isStopped) {\n                _this.hasError = _this.isStopped = true;\n                _this.thrownError = err;\n                var observers = _this.observers;\n                while (observers.length) {\n                    observers.shift().error(err);\n                }\n            }\n        });\n    };\n    Subject.prototype.complete = function () {\n        var _this = this;\n        errorContext(function () {\n            _this._throwIfClosed();\n            if (!_this.isStopped) {\n                _this.isStopped = true;\n                var observers = _this.observers;\n                while (observers.length) {\n                    observers.shift().complete();\n                }\n            }\n        });\n    };\n    Subject.prototype.unsubscribe = function () {\n        this.isStopped = this.closed = true;\n        this.observers = this.currentObservers = null;\n    };\n    Object.defineProperty(Subject.prototype, \"observed\", {\n        get: function () {\n            var _a;\n            return ((_a = this.observers) === null || _a === void 0 ? void 0 : _a.length) > 0;\n        },\n        enumerable: false,\n        configurable: true\n    });\n    Subject.prototype._trySubscribe = function (subscriber) {\n        this._throwIfClosed();\n        return _super.prototype._trySubscribe.call(this, subscriber);\n    };\n    Subject.prototype._subscribe = function (subscriber) {\n        this._throwIfClosed();\n        this._checkFinalizedStatuses(subscriber);\n        return this._innerSubscribe(subscriber);\n    };\n    Subject.prototype._innerSubscribe = function (subscriber) {\n        var _this = this;\n        var _a = this, hasError = _a.hasError, isStopped = _a.isStopped, observers = _a.observers;\n        if (hasError || isStopped) {\n            return EMPTY_SUBSCRIPTION;\n        }\n        this.currentObservers = null;\n        observers.push(subscriber);\n        return new Subscription(function () {\n            _this.currentObservers = null;\n            arrRemove(observers, subscriber);\n        });\n    };\n    Subject.prototype._checkFinalizedStatuses = function (subscriber) {\n        var _a = this, hasError = _a.hasError, thrownError = _a.thrownError, isStopped = _a.isStopped;\n        if (hasError) {\n            subscriber.error(thrownError);\n        }\n        else if (isStopped) {\n            subscriber.complete();\n        }\n    };\n    Subject.prototype.asObservable = function () {\n        var observable = new Observable();\n        observable.source = this;\n        return observable;\n    };\n    Subject.create = function (destination, source) {\n        return new AnonymousSubject(destination, source);\n    };\n    return Subject;\n}(Observable));\nexport { Subject };\nvar AnonymousSubject = (function (_super) {\n    __extends(AnonymousSubject, _super);\n    function AnonymousSubject(destination, source) {\n        var _this = _super.call(this) || this;\n        _this.destination = destination;\n        _this.source = source;\n        return _this;\n    }\n    AnonymousSubject.prototype.next = function (value) {\n        var _a, _b;\n        (_b = (_a = this.destination) === null || _a === void 0 ? void 0 : _a.next) === null || _b === void 0 ? void 0 : _b.call(_a, value);\n    };\n    AnonymousSubject.prototype.error = function (err) {\n        var _a, _b;\n        (_b = (_a = this.destination) === null || _a === void 0 ? void 0 : _a.error) === null || _b === void 0 ? void 0 : _b.call(_a, err);\n    };\n    AnonymousSubject.prototype.complete = function () {\n        var _a, _b;\n        (_b = (_a = this.destination) === null || _a === void 0 ? void 0 : _a.complete) === null || _b === void 0 ? void 0 : _b.call(_a);\n    };\n    AnonymousSubject.prototype._subscribe = function (subscriber) {\n        var _a, _b;\n        return (_b = (_a = this.source) === null || _a === void 0 ? void 0 : _a.subscribe(subscriber)) !== null && _b !== void 0 ? _b : EMPTY_SUBSCRIPTION;\n    };\n    return AnonymousSubject;\n}(Subject));\nexport { AnonymousSubject };\n//# sourceMappingURL=Subject.js.map","import { __extends } from \"tslib\";\nimport { Subject } from './Subject';\nvar BehaviorSubject = (function (_super) {\n    __extends(BehaviorSubject, _super);\n    function BehaviorSubject(_value) {\n        var _this = _super.call(this) || this;\n        _this._value = _value;\n        return _this;\n    }\n    Object.defineProperty(BehaviorSubject.prototype, \"value\", {\n        get: function () {\n            return this.getValue();\n        },\n        enumerable: false,\n        configurable: true\n    });\n    BehaviorSubject.prototype._subscribe = function (subscriber) {\n        var subscription = _super.prototype._subscribe.call(this, subscriber);\n        !subscription.closed && subscriber.next(this._value);\n        return subscription;\n    };\n    BehaviorSubject.prototype.getValue = function () {\n        var _a = this, hasError = _a.hasError, thrownError = _a.thrownError, _value = _a._value;\n        if (hasError) {\n            throw thrownError;\n        }\n        this._throwIfClosed();\n        return _value;\n    };\n    BehaviorSubject.prototype.next = function (value) {\n        _super.prototype.next.call(this, (this._value = value));\n    };\n    return BehaviorSubject;\n}(Subject));\nexport { BehaviorSubject };\n//# sourceMappingURL=BehaviorSubject.js.map","import { operate } from '../util/lift';\nimport { createOperatorSubscriber } from './OperatorSubscriber';\nexport function map(project, thisArg) {\n    return operate(function (source, subscriber) {\n        var index = 0;\n        source.subscribe(createOperatorSubscriber(subscriber, function (value) {\n            subscriber.next(project.call(thisArg, value, index++));\n        }));\n    });\n}\n//# sourceMappingURL=map.js.map","/**\n * Hand Tracking Type Definitions\n *\n * These types define the data structures for hand landmark detection\n * from MediaPipe Hands.\n */\n\n/**\n * A single 3D point in normalized coordinates.\n * All values are in range [0, 1].\n */\nexport interface Point3D {\n  /** X coordinate (0 = left edge, 1 = right edge) */\n  x: number;\n\n  /** Y coordinate (0 = top edge, 1 = bottom edge) */\n  y: number;\n\n  /** Z coordinate (depth, 0 = camera plane, negative = towards camera) */\n  z: number;\n}\n\n/**\n * MediaPipe hand landmark indices.\n * Each hand has 21 landmarks in a specific arrangement.\n *\n * ```\n *    4   8  12  16  20     Fingertips\n *    |   |   |   |   |\n *    3   7  11  15  19\n *    |   |   |   |   |\n *    2   6  10  14  18\n *    |   |   |   |   |\n *    1   5   9  13  17\n *     \\ /   |   |   /\n *      0         Wrist\n * ```\n */\nexport enum HandLandmark {\n  WRIST = 0,\n  THUMB_CMC = 1,\n  THUMB_MCP = 2,\n  THUMB_IP = 3,\n  THUMB_TIP = 4,\n  INDEX_FINGER_MCP = 5,\n  INDEX_FINGER_PIP = 6,\n  INDEX_FINGER_DIP = 7,\n  INDEX_FINGER_TIP = 8,\n  MIDDLE_FINGER_MCP = 9,\n  MIDDLE_FINGER_PIP = 10,\n  MIDDLE_FINGER_DIP = 11,\n  MIDDLE_FINGER_TIP = 12,\n  RING_FINGER_MCP = 13,\n  RING_FINGER_PIP = 14,\n  RING_FINGER_DIP = 15,\n  RING_FINGER_TIP = 16,\n  PINKY_MCP = 17,\n  PINKY_PIP = 18,\n  PINKY_DIP = 19,\n  PINKY_TIP = 20,\n}\n\n/**\n * Complete set of landmarks for one hand.\n * Always exactly 21 points in fixed order.\n */\nexport type HandLandmarks = [\n  Point3D,\n  Point3D,\n  Point3D,\n  Point3D,\n  Point3D, // Wrist + Thumb (0-4)\n  Point3D,\n  Point3D,\n  Point3D,\n  Point3D, // Index (5-8)\n  Point3D,\n  Point3D,\n  Point3D,\n  Point3D, // Middle (9-12)\n  Point3D,\n  Point3D,\n  Point3D,\n  Point3D, // Ring (13-16)\n  Point3D,\n  Point3D,\n  Point3D,\n  Point3D, // Pinky (17-20)\n];\n\n/**\n * Handedness classification.\n */\nexport type Handedness = 'Left' | 'Right';\n\n/**\n * Data for a single detected hand.\n */\nexport interface HandData {\n  /** Unique identifier for this hand (0 or 1) */\n  id: number;\n\n  /** Which hand (Left or Right) */\n  handedness: Handedness;\n\n  /** All 21 landmark points */\n  landmarks: HandLandmarks;\n\n  /** Detection confidence score [0, 1] */\n  confidence: number;\n}\n\n/**\n * Complete hand tracking frame output.\n * This is what HandTracker emits.\n */\nexport interface HandFrame {\n  /** Array of detected hands (0-2 hands) */\n  hands: HandData[];\n\n  /** Number of hands detected */\n  handCount: number;\n\n  /** Frame timestamp (ms since epoch) */\n  timestamp: number;\n\n  /** Processing time for this frame (ms) */\n  processingTime: number;\n}\n\n/**\n * Skeleton connections for drawing hand skeleton.\n * Each tuple represents a connection between two landmarks.\n */\nexport const HAND_CONNECTIONS: ReadonlyArray<[HandLandmark, HandLandmark]> = [\n  // Thumb\n  [HandLandmark.WRIST, HandLandmark.THUMB_CMC],\n  [HandLandmark.THUMB_CMC, HandLandmark.THUMB_MCP],\n  [HandLandmark.THUMB_MCP, HandLandmark.THUMB_IP],\n  [HandLandmark.THUMB_IP, HandLandmark.THUMB_TIP],\n  // Index finger\n  [HandLandmark.WRIST, HandLandmark.INDEX_FINGER_MCP],\n  [HandLandmark.INDEX_FINGER_MCP, HandLandmark.INDEX_FINGER_PIP],\n  [HandLandmark.INDEX_FINGER_PIP, HandLandmark.INDEX_FINGER_DIP],\n  [HandLandmark.INDEX_FINGER_DIP, HandLandmark.INDEX_FINGER_TIP],\n  // Middle finger\n  [HandLandmark.WRIST, HandLandmark.MIDDLE_FINGER_MCP],\n  [HandLandmark.MIDDLE_FINGER_MCP, HandLandmark.MIDDLE_FINGER_PIP],\n  [HandLandmark.MIDDLE_FINGER_PIP, HandLandmark.MIDDLE_FINGER_DIP],\n  [HandLandmark.MIDDLE_FINGER_DIP, HandLandmark.MIDDLE_FINGER_TIP],\n  // Ring finger\n  [HandLandmark.WRIST, HandLandmark.RING_FINGER_MCP],\n  [HandLandmark.RING_FINGER_MCP, HandLandmark.RING_FINGER_PIP],\n  [HandLandmark.RING_FINGER_PIP, HandLandmark.RING_FINGER_DIP],\n  [HandLandmark.RING_FINGER_DIP, HandLandmark.RING_FINGER_TIP],\n  // Pinky finger\n  [HandLandmark.WRIST, HandLandmark.PINKY_MCP],\n  [HandLandmark.PINKY_MCP, HandLandmark.PINKY_PIP],\n  [HandLandmark.PINKY_PIP, HandLandmark.PINKY_DIP],\n  [HandLandmark.PINKY_DIP, HandLandmark.PINKY_TIP],\n  // Palm connections\n  [HandLandmark.INDEX_FINGER_MCP, HandLandmark.MIDDLE_FINGER_MCP],\n  [HandLandmark.MIDDLE_FINGER_MCP, HandLandmark.RING_FINGER_MCP],\n  [HandLandmark.RING_FINGER_MCP, HandLandmark.PINKY_MCP],\n];\n","/**\n * Control State Type Definitions\n *\n * These types define the processed control data that Controllers\n * emit for consumption by Generators.\n */\n\n/**\n * Normalized 2D position [0, 1].\n */\nexport interface Position2D {\n  /** X coordinate (0 = left, 1 = right) */\n  x: number;\n\n  /** Y coordinate (0 = top, 1 = bottom) */\n  y: number;\n}\n\n/**\n * Velocity vector (units per second).\n */\nexport interface Velocity2D {\n  /** Horizontal velocity */\n  vx: number;\n\n  /** Vertical velocity */\n  vy: number;\n\n  /** Total speed (magnitude of velocity vector) */\n  magnitude: number;\n}\n\n/**\n * Recognized gesture types.\n */\nexport enum GestureType {\n  NONE = 'none',\n  OPEN_HAND = 'open_hand',\n  CLOSED_FIST = 'closed_fist',\n  POINTING = 'pointing',\n  THUMBS_UP = 'thumbs_up',\n  PEACE = 'peace',\n  PINCH = 'pinch',\n}\n\n/**\n * Gesture detection result.\n */\nexport interface GestureState {\n  /** Primary detected gesture */\n  type: GestureType;\n\n  /** Confidence of gesture detection [0, 1] */\n  confidence: number;\n\n  /** How long gesture has been held (ms) */\n  duration: number;\n}\n\n/**\n * Finger extension states.\n */\nexport interface FingerStates {\n  /** Thumb extended */\n  thumb: boolean;\n\n  /** Index finger extended */\n  index: boolean;\n\n  /** Middle finger extended */\n  middle: boolean;\n\n  /** Ring finger extended */\n  ring: boolean;\n\n  /** Pinky finger extended */\n  pinky: boolean;\n\n  /** Number of extended fingers (0-5) */\n  extendedCount: number;\n}\n\n/**\n * Hand openness measurement.\n */\nexport interface HandOpenness {\n  /** Overall openness [0, 1] where 0 = closed fist, 1 = fully open */\n  value: number;\n\n  /** Rate of change (positive = opening, negative = closing) */\n  derivative: number;\n}\n\n/**\n * Control state for a single hand.\n */\nexport interface SingleHandControlState {\n  /** Hand identifier */\n  handId: number;\n\n  /** Is this hand currently tracked? */\n  isTracked: boolean;\n\n  /** Palm center position */\n  position: Position2D;\n\n  /** Index fingertip position */\n  fingertipPosition: Position2D;\n\n  /** Movement velocity */\n  velocity: Velocity2D;\n\n  /** Detected gesture */\n  gesture: GestureState;\n\n  /** Individual finger states */\n  fingers: FingerStates;\n\n  /** Hand openness metric */\n  openness: HandOpenness;\n\n  /** Distance from camera (depth) [0, 1] */\n  depth: number;\n\n  /** Hand rotation/orientation (radians) */\n  rotation: number;\n}\n\n/**\n * Complete control state for all hands.\n * This is the output of Controllers.\n */\nexport interface ControlState {\n  /** Timestamp of this state */\n  timestamp: number;\n\n  /** Delta time since last state (ms) */\n  deltaTime: number;\n\n  /** Control states for each hand */\n  hands: SingleHandControlState[];\n\n  /** Is any hand currently tracked? */\n  hasActiveHand: boolean;\n\n  /** Primary hand (first detected) */\n  primaryHand: SingleHandControlState | null;\n\n  /** Secondary hand (if two hands detected) */\n  secondaryHand: SingleHandControlState | null;\n\n  /** Custom extension data (for custom controllers) */\n  custom: Record<string, unknown>;\n}\n\n/**\n * Create an empty single hand control state.\n */\nexport function createEmptyHandControlState(handId: number): SingleHandControlState {\n  return {\n    handId,\n    isTracked: false,\n    position: { x: 0, y: 0 },\n    fingertipPosition: { x: 0, y: 0 },\n    velocity: { vx: 0, vy: 0, magnitude: 0 },\n    gesture: { type: GestureType.NONE, confidence: 0, duration: 0 },\n    fingers: {\n      thumb: false,\n      index: false,\n      middle: false,\n      ring: false,\n      pinky: false,\n      extendedCount: 0,\n    },\n    openness: { value: 0, derivative: 0 },\n    depth: 0,\n    rotation: 0,\n  };\n}\n\n/**\n * Create an empty control state.\n */\nexport function createEmptyControlState(): ControlState {\n  return {\n    timestamp: Date.now(),\n    deltaTime: 0,\n    hands: [],\n    hasActiveHand: false,\n    primaryHand: null,\n    secondaryHand: null,\n    custom: {},\n  };\n}\n","/**\n * Application Constants\n *\n * Centralized configuration values used throughout the application.\n */\n\n/** Number of landmarks per hand (MediaPipe standard) */\nexport const LANDMARKS_PER_HAND = 21;\n\n/** Maximum number of hands to track */\nexport const MAX_HANDS = 2;\n\n/** Target frame rate for hand tracking */\nexport const TARGET_FPS = 30;\n\n/** Frame interval in milliseconds */\nexport const FRAME_INTERVAL_MS = 1000 / TARGET_FPS;\n\n/** Default smoothing factor for position (0 = no smoothing, 1 = infinite smoothing) */\nexport const DEFAULT_SMOOTHING = 0.3;\n\n/** Minimum confidence for gesture detection */\nexport const MIN_GESTURE_CONFIDENCE = 0.7;\n\n/** Minimum confidence for hand detection */\nexport const MIN_DETECTION_CONFIDENCE = 0.7;\n\n/** Minimum confidence for hand tracking */\nexport const MIN_TRACKING_CONFIDENCE = 0.5;\n\n/** Finger landmark indices for each finger */\nexport const FINGER_LANDMARKS = {\n  thumb: [1, 2, 3, 4] as const,\n  index: [5, 6, 7, 8] as const,\n  middle: [9, 10, 11, 12] as const,\n  ring: [13, 14, 15, 16] as const,\n  pinky: [17, 18, 19, 20] as const,\n} as const;\n\n/** Fingertip landmark indices */\nexport const FINGERTIP_LANDMARKS = [4, 8, 12, 16, 20] as const;\n\n/** Landmark colors for visualization */\nexport const LANDMARK_COLORS = {\n  wrist: '#ffd93d',\n  thumb: '#ff6b6b',\n  index: '#4ecdc4',\n  middle: '#45b7d1',\n  ring: '#96ceb4',\n  pinky: '#dda0dd',\n} as const;\n\n/** Connection line color */\nexport const CONNECTION_COLOR = 'rgba(255, 255, 255, 0.6)';\n\n/** Landmark radius for visualization */\nexport const LANDMARK_RADIUS = 5;\n\n/** Connection line width */\nexport const CONNECTION_WIDTH = 2;\n","/**\n * HandTracker Interface\n *\n * Defines the contract for hand tracking implementations.\n */\n\nimport type { Observable } from 'rxjs';\nimport type { HandFrame } from '../types';\n\n/**\n * Configuration options for HandTracker.\n */\nexport interface HandTrackerConfig {\n  /** Maximum number of hands to detect (1 or 2) */\n  maxHands: 1 | 2;\n\n  /** Minimum confidence for initial detection [0, 1] */\n  minDetectionConfidence: number;\n\n  /** Minimum confidence for tracking [0, 1] */\n  minTrackingConfidence: number;\n\n  /** Target frames per second */\n  targetFps: number;\n\n  /** Enable temporal smoothing */\n  smoothing: boolean;\n\n  /** Smoothing factor (lower = smoother, higher latency) [0, 1] */\n  smoothingFactor: number;\n}\n\n/**\n * Default configuration values.\n */\nexport const DEFAULT_HAND_TRACKER_CONFIG: HandTrackerConfig = {\n  maxHands: 2,\n  minDetectionConfidence: 0.7,\n  minTrackingConfidence: 0.5,\n  targetFps: 30,\n  smoothing: true,\n  smoothingFactor: 0.3,\n};\n\n/**\n * HandTracker interface.\n * Implementations must handle camera access, MediaPipe initialization,\n * and emit HandFrame objects through an observable stream.\n */\nexport interface IHandTracker {\n  /**\n   * Initialize the tracker with a video element.\n   * @param videoElement - HTML video element to use as source\n   * @returns Promise that resolves when initialization is complete\n   */\n  initialize(videoElement: HTMLVideoElement): Promise<void>;\n\n  /**\n   * Observable stream of hand tracking data.\n   * Emits a new HandFrame for each processed video frame.\n   */\n  readonly hands$: Observable<HandFrame>;\n\n  /**\n   * Current tracking status.\n   */\n  readonly isTracking: boolean;\n\n  /**\n   * Start tracking.\n   */\n  start(): void;\n\n  /**\n   * Stop tracking (pauses without destroying).\n   */\n  stop(): void;\n\n  /**\n   * Release all resources.\n   */\n  dispose(): void;\n}\n","/**\n * Smoothing Utilities\n *\n * Temporal smoothing for hand landmark positions using\n * exponential moving average (EMA).\n */\n\nimport type { Point3D, HandLandmarks } from '../types';\nimport { LANDMARKS_PER_HAND } from '../types';\n\n/**\n * Smooth a single 3D point using exponential moving average.\n *\n * @param current - Current point value\n * @param previous - Previous smoothed value\n * @param factor - Smoothing factor (0 = fully smoothed/previous, 1 = no smoothing/current)\n * @returns Smoothed point\n */\nexport function smoothPoint(current: Point3D, previous: Point3D, factor: number): Point3D {\n  return {\n    x: previous.x + (current.x - previous.x) * factor,\n    y: previous.y + (current.y - previous.y) * factor,\n    z: previous.z + (current.z - previous.z) * factor,\n  };\n}\n\n/**\n * Buffer for storing previous landmark positions for smoothing.\n */\nexport class LandmarkSmoother {\n  private buffer: Map<number, Point3D[]> = new Map();\n  private readonly factor: number;\n  private readonly bufferSize: number;\n\n  /**\n   * Create a new landmark smoother.\n   *\n   * @param factor - Smoothing factor (0 = fully smoothed, 1 = no smoothing)\n   * @param bufferSize - Number of previous frames to keep (default: 5)\n   */\n  constructor(factor: number = 0.3, bufferSize: number = 5) {\n    this.factor = Math.max(0, Math.min(1, factor));\n    this.bufferSize = bufferSize;\n  }\n\n  /**\n   * Smooth a single landmark point.\n   *\n   * @param handId - Hand identifier\n   * @param landmarkIndex - Landmark index (0-20)\n   * @param current - Current point value\n   * @returns Smoothed point\n   */\n  smoothLandmark(handId: number, landmarkIndex: number, current: Point3D): Point3D {\n    const key = handId * LANDMARKS_PER_HAND + landmarkIndex;\n    let history = this.buffer.get(key);\n\n    if (!history || history.length === 0) {\n      history = [current];\n      this.buffer.set(key, history);\n      return current;\n    }\n\n    const previous = history[history.length - 1];\n    const smoothed = smoothPoint(current, previous, this.factor);\n\n    history.push(smoothed);\n    if (history.length > this.bufferSize) {\n      history.shift();\n    }\n\n    return smoothed;\n  }\n\n  /**\n   * Smooth all landmarks for a hand.\n   *\n   * @param handId - Hand identifier\n   * @param landmarks - Current landmark positions\n   * @returns Smoothed landmark positions\n   */\n  smoothLandmarks(handId: number, landmarks: HandLandmarks): HandLandmarks {\n    const smoothed: Point3D[] = [];\n\n    for (let i = 0; i < LANDMARKS_PER_HAND; i++) {\n      smoothed.push(this.smoothLandmark(handId, i, landmarks[i]));\n    }\n\n    return smoothed as HandLandmarks;\n  }\n\n  /**\n   * Clear the buffer for a specific hand.\n   *\n   * @param handId - Hand identifier\n   */\n  clearHand(handId: number): void {\n    for (let i = 0; i < LANDMARKS_PER_HAND; i++) {\n      const key = handId * LANDMARKS_PER_HAND + i;\n      this.buffer.delete(key);\n    }\n  }\n\n  /**\n   * Clear all buffers.\n   */\n  clear(): void {\n    this.buffer.clear();\n  }\n\n  /**\n   * Get the current smoothing factor.\n   */\n  get smoothingFactor(): number {\n    return this.factor;\n  }\n}\n","/**\n * MediaPipe CDN Loader\n *\n * Dynamically loads MediaPipe Hands from CDN at runtime.\n * This is the recommended approach for MediaPipe in browser environments.\n */\n\nimport type { MediaPipeHandsConstructor } from '../types/mediapipe.types';\n\n/** CDN base URL for MediaPipe Hands */\nconst MEDIAPIPE_CDN_BASE = 'https://cdn.jsdelivr.net/npm/@mediapipe/hands';\n\n/** MediaPipe Hands script URL */\nconst HANDS_SCRIPT_URL = `${MEDIAPIPE_CDN_BASE}/hands.js`;\n\n/** Loading state */\nlet loadingPromise: Promise<MediaPipeHandsConstructor> | null = null;\nlet isLoaded = false;\n\n/**\n * Progress callback for loading status.\n */\nexport type LoadingProgressCallback = (status: string, progress?: number) => void;\n\n/**\n * Load MediaPipe Hands from CDN.\n *\n * @param onProgress - Optional callback for loading progress updates\n * @returns Promise that resolves with the Hands constructor\n */\nexport async function loadMediaPipeHands(\n  onProgress?: LoadingProgressCallback\n): Promise<MediaPipeHandsConstructor> {\n  // Return cached constructor if already loaded\n  if (isLoaded && window.Hands) {\n    return window.Hands;\n  }\n\n  // Return existing loading promise if already loading\n  if (loadingPromise) {\n    return loadingPromise;\n  }\n\n  // Start loading\n  loadingPromise = new Promise<MediaPipeHandsConstructor>((resolve, reject) => {\n    onProgress?.('Loading MediaPipe Hands...', 0);\n\n    // Check if already available (e.g., from a script tag)\n    if (window.Hands) {\n      isLoaded = true;\n      onProgress?.('MediaPipe Hands ready', 100);\n      resolve(window.Hands);\n      return;\n    }\n\n    // Create script element\n    const script = document.createElement('script');\n    script.src = HANDS_SCRIPT_URL;\n    script.crossOrigin = 'anonymous';\n\n    script.onload = (): void => {\n      onProgress?.('Initializing MediaPipe...', 50);\n\n      // Wait a tick for the script to initialize\n      setTimeout(() => {\n        if (window.Hands) {\n          isLoaded = true;\n          onProgress?.('MediaPipe Hands ready', 100);\n          resolve(window.Hands);\n        } else {\n          reject(new Error('MediaPipe Hands failed to initialize'));\n        }\n      }, 100);\n    };\n\n    script.onerror = (): void => {\n      loadingPromise = null;\n      reject(new Error('Failed to load MediaPipe Hands from CDN'));\n    };\n\n    // Add script to document\n    onProgress?.('Downloading MediaPipe...', 10);\n    document.head.appendChild(script);\n  });\n\n  return loadingPromise;\n}\n\n/**\n * Get the CDN base URL for MediaPipe file location.\n * Used by MediaPipe to locate WASM and other files.\n */\nexport function getMediaPipeFileLocator(): (file: string) => string {\n  return (file: string) => `${MEDIAPIPE_CDN_BASE}/${file}`;\n}\n\n/**\n * Check if MediaPipe Hands is loaded.\n */\nexport function isMediaPipeLoaded(): boolean {\n  return isLoaded && !!window.Hands;\n}\n\n/**\n * Preload MediaPipe Hands (call early to reduce latency on first use).\n */\nexport function preloadMediaPipeHands(): void {\n  void loadMediaPipeHands();\n}\n","/**\n * HandTracker Implementation\n *\n * MediaPipe-based hand tracking with observable stream output.\n * Loads MediaPipe from CDN for reliable browser compatibility.\n */\n\nimport { Subject, Observable } from 'rxjs';\nimport type { HandFrame, HandData, HandLandmarks, Point3D, Handedness } from '../types';\nimport { LANDMARKS_PER_HAND } from '../types';\nimport type {\n  MediaPipeHands,\n  MediaPipeResults,\n  MediaPipeHandsConstructor,\n} from '../types/mediapipe.types';\nimport type { IHandTracker, HandTrackerConfig } from './IHandTracker';\nimport { DEFAULT_HAND_TRACKER_CONFIG } from './IHandTracker';\nimport { LandmarkSmoother } from '../utils/smoothing';\nimport {\n  loadMediaPipeHands,\n  getMediaPipeFileLocator,\n  type LoadingProgressCallback,\n} from '../utils/mediapipe-loader';\n\n/**\n * MediaPipe-based hand tracker implementation.\n */\nexport class HandTracker implements IHandTracker {\n  private readonly config: HandTrackerConfig;\n  private hands: MediaPipeHands | null = null;\n  private videoElement: HTMLVideoElement | null = null;\n  private subject = new Subject<HandFrame>();\n  private smoother: LandmarkSmoother;\n  private animationFrameId: number | null = null;\n  private _isTracking = false;\n  private initialized = false;\n  private lastTimestamp = 0;\n\n  /**\n   * Create a new HandTracker instance.\n   *\n   * @param config - Configuration options\n   */\n  constructor(config: Partial<HandTrackerConfig> = {}) {\n    this.config = { ...DEFAULT_HAND_TRACKER_CONFIG, ...config };\n    this.smoother = new LandmarkSmoother(\n      this.config.smoothingFactor,\n      5 // buffer size\n    );\n  }\n\n  /**\n   * Observable stream of hand tracking data.\n   */\n  get hands$(): Observable<HandFrame> {\n    return this.subject.asObservable();\n  }\n\n  /**\n   * Current tracking status.\n   */\n  get isTracking(): boolean {\n    return this._isTracking;\n  }\n\n  /**\n   * Initialize the tracker with a video element.\n   *\n   * @param videoElement - HTML video element to use as source\n   * @param onProgress - Optional callback for loading progress updates\n   */\n  async initialize(\n    videoElement: HTMLVideoElement,\n    onProgress?: LoadingProgressCallback\n  ): Promise<void> {\n    if (this.initialized) {\n      throw new Error('HandTracker is already initialized. Call dispose() first.');\n    }\n\n    this.videoElement = videoElement;\n\n    // Load MediaPipe from CDN\n    onProgress?.('Loading hand tracking model...', 0);\n    const HandsConstructor: MediaPipeHandsConstructor = await loadMediaPipeHands(onProgress);\n\n    // Initialize MediaPipe Hands\n    this.hands = new HandsConstructor({\n      locateFile: getMediaPipeFileLocator(),\n    });\n\n    this.hands.setOptions({\n      maxNumHands: this.config.maxHands,\n      minDetectionConfidence: this.config.minDetectionConfidence,\n      minTrackingConfidence: this.config.minTrackingConfidence,\n      modelComplexity: 1, // 0 = lite, 1 = full\n    });\n\n    // Set up results handler\n    this.hands.onResults((results: MediaPipeResults) => {\n      this.processResults(results);\n    });\n\n    onProgress?.('Hand tracking ready', 100);\n    this.initialized = true;\n  }\n\n  /**\n   * Start tracking.\n   */\n  start(): void {\n    if (!this.initialized) {\n      console.warn('HandTracker not initialized. Call initialize() first.');\n      return;\n    }\n\n    if (this._isTracking) {\n      return;\n    }\n\n    this._isTracking = true;\n    this.lastTimestamp = performance.now();\n    this.requestFrame();\n  }\n\n  /**\n   * Stop tracking.\n   */\n  stop(): void {\n    this._isTracking = false;\n\n    if (this.animationFrameId !== null) {\n      cancelAnimationFrame(this.animationFrameId);\n      this.animationFrameId = null;\n    }\n  }\n\n  /**\n   * Release all resources.\n   */\n  dispose(): void {\n    this.stop();\n\n    if (this.hands) {\n      void this.hands.close();\n      this.hands = null;\n    }\n\n    this.smoother.clear();\n    this.subject.complete();\n    this.videoElement = null;\n    this.initialized = false;\n  }\n\n  /**\n   * Request next frame processing.\n   */\n  private requestFrame(): void {\n    if (!this._isTracking) {\n      return;\n    }\n\n    this.animationFrameId = requestAnimationFrame(() => {\n      void this.processFrame();\n    });\n  }\n\n  /**\n   * Process a single video frame.\n   */\n  private async processFrame(): Promise<void> {\n    if (!this._isTracking || !this.hands || !this.videoElement) {\n      return;\n    }\n\n    const now = performance.now();\n    const frameInterval = 1000 / this.config.targetFps;\n\n    // Throttle to target FPS\n    if (now - this.lastTimestamp < frameInterval) {\n      this.requestFrame();\n      return;\n    }\n\n    this.lastTimestamp = now;\n\n    try {\n      // Send frame to MediaPipe\n      await this.hands.send({ image: this.videoElement });\n    } catch (error) {\n      console.error('Error processing frame:', error);\n    }\n\n    this.requestFrame();\n  }\n\n  /**\n   * Process MediaPipe results and emit HandFrame.\n   */\n  private processResults(results: MediaPipeResults): void {\n    const startTime = performance.now();\n\n    const hands: HandData[] = [];\n\n    if (results.multiHandLandmarks && results.multiHandedness) {\n      for (let i = 0; i < results.multiHandLandmarks.length; i++) {\n        const landmarks = results.multiHandLandmarks[i];\n        const handedness = results.multiHandedness[i];\n\n        if (landmarks && handedness) {\n          // Convert landmarks to our format\n          let handLandmarks = this.convertLandmarks(landmarks);\n\n          // Apply smoothing if enabled\n          if (this.config.smoothing) {\n            handLandmarks = this.smoother.smoothLandmarks(i, handLandmarks);\n          }\n\n          hands.push({\n            id: i,\n            handedness: handedness.label as Handedness,\n            landmarks: handLandmarks,\n            confidence: handedness.score ?? 0.9,\n          });\n        }\n      }\n    }\n\n    const processingTime = performance.now() - startTime;\n\n    const frame: HandFrame = {\n      hands,\n      handCount: hands.length,\n      timestamp: Date.now(),\n      processingTime,\n    };\n\n    this.subject.next(frame);\n  }\n\n  /**\n   * Convert MediaPipe landmarks to our format.\n   */\n  private convertLandmarks(\n    landmarks: Array<{ x: number; y: number; z: number }>\n  ): HandLandmarks {\n    const points: Point3D[] = [];\n\n    for (let i = 0; i < LANDMARKS_PER_HAND; i++) {\n      const lm = landmarks[i];\n      if (lm) {\n        points.push({\n          x: lm.x,\n          y: lm.y,\n          z: lm.z,\n        });\n      } else {\n        // Fallback for missing landmarks\n        points.push({ x: 0, y: 0, z: 0 });\n      }\n    }\n\n    return points as HandLandmarks;\n  }\n}\n","/**\n * Camera Preview Component\n *\n * Handles webcam access and video element management.\n */\n\n/**\n * Camera permission status.\n */\nexport type CameraPermissionStatus = 'prompt' | 'granted' | 'denied' | 'error';\n\n/**\n * Camera configuration options.\n */\nexport interface CameraConfig {\n  /** Preferred width (actual may differ based on device) */\n  width: number;\n\n  /** Preferred height */\n  height: number;\n\n  /** Preferred facing mode */\n  facingMode: 'user' | 'environment';\n}\n\n/**\n * Default camera configuration.\n */\nexport const DEFAULT_CAMERA_CONFIG: CameraConfig = {\n  width: 640,\n  height: 480,\n  facingMode: 'user',\n};\n\n/**\n * Camera Preview manager.\n */\nexport class CameraPreview {\n  private videoElement: HTMLVideoElement | null = null;\n  private stream: MediaStream | null = null;\n  private config: CameraConfig;\n\n  /**\n   * Create a new CameraPreview instance.\n   */\n  constructor(config: Partial<CameraConfig> = {}) {\n    this.config = { ...DEFAULT_CAMERA_CONFIG, ...config };\n  }\n\n  /**\n   * Initialize the camera with a video element.\n   *\n   * @param videoElement - The video element to display the camera feed\n   * @returns Promise that resolves when camera is ready\n   */\n  async initialize(videoElement: HTMLVideoElement): Promise<void> {\n    this.videoElement = videoElement;\n\n    try {\n      // Request camera access\n      this.stream = await navigator.mediaDevices.getUserMedia({\n        video: {\n          width: { ideal: this.config.width },\n          height: { ideal: this.config.height },\n          facingMode: this.config.facingMode,\n        },\n        audio: false,\n      });\n\n      // Set video source\n      this.videoElement.srcObject = this.stream;\n\n      // Wait for video to be ready\n      await new Promise<void>((resolve, reject) => {\n        if (!this.videoElement) {\n          reject(new Error('Video element not available'));\n          return;\n        }\n\n        this.videoElement.onloadedmetadata = (): void => {\n          resolve();\n        };\n\n        this.videoElement.onerror = (): void => {\n          reject(new Error('Failed to load video'));\n        };\n      });\n\n      // Start playing\n      await this.videoElement.play();\n    } catch (error) {\n      const errorMessage = this.getErrorMessage(error);\n      throw new Error(`Camera initialization failed: ${errorMessage}`);\n    }\n  }\n\n  /**\n   * Check camera permission status.\n   */\n  async checkPermission(): Promise<CameraPermissionStatus> {\n    try {\n      const result = await navigator.permissions.query({ name: 'camera' as PermissionName });\n      return result.state as CameraPermissionStatus;\n    } catch {\n      // Permissions API not supported, return prompt as default\n      return 'prompt';\n    }\n  }\n\n  /**\n   * Get the video element.\n   */\n  getVideoElement(): HTMLVideoElement | null {\n    return this.videoElement;\n  }\n\n  /**\n   * Get video dimensions.\n   */\n  getDimensions(): { width: number; height: number } {\n    if (!this.videoElement) {\n      return { width: this.config.width, height: this.config.height };\n    }\n\n    return {\n      width: this.videoElement.videoWidth || this.config.width,\n      height: this.videoElement.videoHeight || this.config.height,\n    };\n  }\n\n  /**\n   * Stop the camera stream.\n   */\n  stop(): void {\n    if (this.stream) {\n      this.stream.getTracks().forEach((track) => track.stop());\n      this.stream = null;\n    }\n\n    if (this.videoElement) {\n      this.videoElement.srcObject = null;\n    }\n  }\n\n  /**\n   * Dispose resources.\n   */\n  dispose(): void {\n    this.stop();\n    this.videoElement = null;\n  }\n\n  /**\n   * Get user-friendly error message.\n   */\n  private getErrorMessage(error: unknown): string {\n    if (error instanceof DOMException) {\n      switch (error.name) {\n        case 'NotAllowedError':\n          return 'Camera access was denied. Please grant permission to use the camera.';\n        case 'NotFoundError':\n          return 'No camera found. Please connect a camera and try again.';\n        case 'NotReadableError':\n          return 'Camera is in use by another application.';\n        case 'OverconstrainedError':\n          return 'Camera does not meet the required constraints.';\n        default:\n          return error.message;\n      }\n    }\n\n    if (error instanceof Error) {\n      return error.message;\n    }\n\n    return 'Unknown error occurred';\n  }\n}\n","/**\n * Debug Overlay Component\n *\n * Draws hand landmarks and skeleton on a canvas overlay.\n */\n\nimport type { HandFrame, HandData, Point3D } from '../types';\nimport {\n  HAND_CONNECTIONS,\n  HandLandmark,\n  LANDMARK_COLORS,\n  LANDMARK_RADIUS,\n  CONNECTION_COLOR,\n  CONNECTION_WIDTH,\n} from '../types';\n\n/**\n * Debug overlay configuration.\n */\nexport interface DebugOverlayConfig {\n  /** Show landmark points */\n  showLandmarks: boolean;\n\n  /** Show skeleton connections */\n  showConnections: boolean;\n\n  /** Show FPS counter */\n  showFps: boolean;\n\n  /** Landmark point radius */\n  landmarkRadius: number;\n\n  /** Connection line width */\n  connectionWidth: number;\n}\n\n/**\n * Default debug overlay configuration.\n */\nexport const DEFAULT_DEBUG_OVERLAY_CONFIG: DebugOverlayConfig = {\n  showLandmarks: true,\n  showConnections: true,\n  showFps: true,\n  landmarkRadius: LANDMARK_RADIUS,\n  connectionWidth: CONNECTION_WIDTH,\n};\n\n/**\n * FPS calculator for performance monitoring.\n */\nclass FpsCalculator {\n  private frames: number[] = [];\n  private readonly windowSize = 30;\n\n  /**\n   * Record a frame timestamp.\n   */\n  tick(): void {\n    const now = performance.now();\n    this.frames.push(now);\n\n    // Keep only recent frames\n    while (this.frames.length > this.windowSize) {\n      this.frames.shift();\n    }\n  }\n\n  /**\n   * Calculate current FPS.\n   */\n  getFps(): number {\n    if (this.frames.length < 2) return 0;\n\n    const first = this.frames[0];\n    const last = this.frames[this.frames.length - 1];\n    const elapsed = last - first;\n\n    if (elapsed === 0) return 0;\n\n    return Math.round(((this.frames.length - 1) / elapsed) * 1000);\n  }\n\n  /**\n   * Reset the calculator.\n   */\n  reset(): void {\n    this.frames = [];\n  }\n}\n\n/**\n * Debug overlay for visualizing hand tracking data.\n */\nexport class DebugOverlay {\n  private canvas: HTMLCanvasElement | null = null;\n  private ctx: CanvasRenderingContext2D | null = null;\n  private config: DebugOverlayConfig;\n  private fpsCalculator = new FpsCalculator();\n  private fpsElement: HTMLElement | null = null;\n\n  /**\n   * Create a new DebugOverlay instance.\n   */\n  constructor(config: Partial<DebugOverlayConfig> = {}) {\n    this.config = { ...DEFAULT_DEBUG_OVERLAY_CONFIG, ...config };\n  }\n\n  /**\n   * Initialize the overlay with a canvas element.\n   */\n  initialize(canvas: HTMLCanvasElement, fpsElement?: HTMLElement): void {\n    this.canvas = canvas;\n    this.ctx = canvas.getContext('2d', { willReadFrequently: false });\n    this.fpsElement = fpsElement ?? null;\n  }\n\n  /**\n   * Set canvas dimensions to match video.\n   */\n  setDimensions(width: number, height: number): void {\n    if (this.canvas) {\n      this.canvas.width = width;\n      this.canvas.height = height;\n    }\n  }\n\n  /**\n   * Draw a hand frame on the overlay.\n   */\n  draw(frame: HandFrame): void {\n    if (!this.ctx || !this.canvas) return;\n\n    // Clear previous frame\n    this.ctx.clearRect(0, 0, this.canvas.width, this.canvas.height);\n\n    // Update FPS\n    this.fpsCalculator.tick();\n    this.updateFpsDisplay();\n\n    // Draw each hand\n    for (const hand of frame.hands) {\n      this.drawHand(hand);\n    }\n  }\n\n  /**\n   * Clear the overlay.\n   */\n  clear(): void {\n    if (!this.ctx || !this.canvas) return;\n    this.ctx.clearRect(0, 0, this.canvas.width, this.canvas.height);\n  }\n\n  /**\n   * Dispose resources.\n   */\n  dispose(): void {\n    this.clear();\n    this.fpsCalculator.reset();\n    this.canvas = null;\n    this.ctx = null;\n    this.fpsElement = null;\n  }\n\n  /**\n   * Draw a single hand.\n   */\n  private drawHand(hand: HandData): void {\n    if (!this.ctx || !this.canvas) return;\n\n    const { landmarks } = hand;\n    const width = this.canvas.width;\n    const height = this.canvas.height;\n\n    // Draw connections first (under landmarks)\n    if (this.config.showConnections) {\n      this.drawConnections(landmarks, width, height);\n    }\n\n    // Draw landmarks on top\n    if (this.config.showLandmarks) {\n      this.drawLandmarks(landmarks, width, height);\n    }\n  }\n\n  /**\n   * Draw skeleton connections.\n   */\n  private drawConnections(landmarks: Point3D[], width: number, height: number): void {\n    if (!this.ctx) return;\n\n    this.ctx.strokeStyle = CONNECTION_COLOR;\n    this.ctx.lineWidth = this.config.connectionWidth;\n    this.ctx.lineCap = 'round';\n\n    for (const [start, end] of HAND_CONNECTIONS) {\n      const p1 = landmarks[start];\n      const p2 = landmarks[end];\n\n      if (!p1 || !p2) continue;\n\n      this.ctx.beginPath();\n      this.ctx.moveTo(p1.x * width, p1.y * height);\n      this.ctx.lineTo(p2.x * width, p2.y * height);\n      this.ctx.stroke();\n    }\n  }\n\n  /**\n   * Draw landmark points.\n   */\n  private drawLandmarks(landmarks: Point3D[], width: number, height: number): void {\n    if (!this.ctx) return;\n\n    for (let i = 0; i < landmarks.length; i++) {\n      const point = landmarks[i];\n      if (!point) continue;\n\n      const x = point.x * width;\n      const y = point.y * height;\n      const color = this.getLandmarkColor(i);\n\n      this.ctx.beginPath();\n      this.ctx.arc(x, y, this.config.landmarkRadius, 0, Math.PI * 2);\n      this.ctx.fillStyle = color;\n      this.ctx.fill();\n\n      // Add subtle outline for visibility\n      this.ctx.strokeStyle = 'rgba(0, 0, 0, 0.5)';\n      this.ctx.lineWidth = 1;\n      this.ctx.stroke();\n    }\n  }\n\n  /**\n   * Get color for a landmark based on its index.\n   */\n  private getLandmarkColor(index: number): string {\n    const wristIndex = HandLandmark.WRIST as number;\n    const thumbTipIndex = HandLandmark.THUMB_TIP as number;\n    const indexTipIndex = HandLandmark.INDEX_FINGER_TIP as number;\n    const middleTipIndex = HandLandmark.MIDDLE_FINGER_TIP as number;\n    const ringTipIndex = HandLandmark.RING_FINGER_TIP as number;\n\n    if (index === wristIndex) {\n      return LANDMARK_COLORS.wrist;\n    } else if (index <= thumbTipIndex) {\n      return LANDMARK_COLORS.thumb;\n    } else if (index <= indexTipIndex) {\n      return LANDMARK_COLORS.index;\n    } else if (index <= middleTipIndex) {\n      return LANDMARK_COLORS.middle;\n    } else if (index <= ringTipIndex) {\n      return LANDMARK_COLORS.ring;\n    } else {\n      return LANDMARK_COLORS.pinky;\n    }\n  }\n\n  /**\n   * Update FPS display.\n   */\n  private updateFpsDisplay(): void {\n    if (!this.config.showFps || !this.fpsElement) return;\n\n    const fps = this.fpsCalculator.getFps();\n    this.fpsElement.textContent = `FPS: ${fps}`;\n  }\n}\n","/**\n * Controller Interface Definitions\n *\n * Controllers process raw HandFrame data from HandTracker\n * and produce structured ControlState for Generators.\n */\n\nimport { Observable } from 'rxjs';\nimport type { HandFrame } from '../types/hand.types';\nimport type { ControlState, SingleHandControlState } from '../types/control.types';\n\n/**\n * Base configuration shared by all controllers.\n */\nexport interface BaseControllerConfig {\n  /** Enable/disable smoothing */\n  smoothingEnabled: boolean;\n\n  /** Smoothing factor [0, 1] where 0 = no smoothing, 1 = max smoothing */\n  smoothingFactor: number;\n}\n\n/**\n * Configuration for position tracking.\n */\nexport interface PositionControllerConfig extends BaseControllerConfig {\n  /** Which landmark to track for position (default: palm center) */\n  trackingMode: 'palm' | 'index_tip' | 'wrist';\n\n  /** Enable velocity calculation */\n  calculateVelocity: boolean;\n\n  /** Minimum movement threshold to register (prevents jitter) */\n  movementThreshold: number;\n}\n\n/**\n * Configuration for gesture detection.\n */\nexport interface GestureControllerConfig extends BaseControllerConfig {\n  /** Minimum confidence to report a gesture */\n  minConfidence: number;\n\n  /** Minimum duration (ms) to confirm a gesture */\n  minDuration: number;\n\n  /** Distance threshold for pinch detection [0, 1] */\n  pinchThreshold: number;\n\n  /** Angle threshold for finger extension (radians) */\n  extensionAngleThreshold: number;\n}\n\n/**\n * Configuration for distance measurements.\n */\nexport interface DistanceControllerConfig extends BaseControllerConfig {\n  /** Normalize distances to [0, 1] based on hand size */\n  normalizeToHandSize: boolean;\n}\n\n/**\n * Combined controller configuration.\n */\nexport interface ControllerConfig {\n  position: PositionControllerConfig;\n  gesture: GestureControllerConfig;\n  distance: DistanceControllerConfig;\n}\n\n/**\n * Partial controller configuration for updates.\n */\nexport interface PartialControllerConfig {\n  position?: Partial<PositionControllerConfig>;\n  gesture?: Partial<GestureControllerConfig>;\n  distance?: Partial<DistanceControllerConfig>;\n}\n\n/**\n * Default controller configuration.\n */\nexport const DEFAULT_CONTROLLER_CONFIG: ControllerConfig = {\n  position: {\n    smoothingEnabled: true,\n    smoothingFactor: 0.3,\n    trackingMode: 'palm',\n    calculateVelocity: true,\n    movementThreshold: 0.005,\n  },\n  gesture: {\n    smoothingEnabled: true,\n    smoothingFactor: 0.2,\n    minConfidence: 0.7,\n    minDuration: 100,\n    pinchThreshold: 0.08,\n    extensionAngleThreshold: 2.5, // ~143 degrees\n  },\n  distance: {\n    smoothingEnabled: true,\n    smoothingFactor: 0.3,\n    normalizeToHandSize: true,\n  },\n};\n\n/**\n * Interface for a single-purpose controller module.\n * Each controller processes one aspect of hand data.\n */\nexport interface IController<TConfig extends BaseControllerConfig = BaseControllerConfig> {\n  /** Controller name for debugging */\n  readonly name: string;\n\n  /** Current configuration */\n  readonly config: TConfig;\n\n  /**\n   * Process a hand frame and update the control state.\n   * @param frame - Raw hand frame from HandTracker\n   * @param state - Current control state to update\n   * @returns Updated control state\n   */\n  process(frame: HandFrame, state: ControlState): ControlState;\n\n  /**\n   * Update controller configuration.\n   * @param config - Partial configuration to merge\n   */\n  updateConfig(config: Partial<TConfig>): void;\n\n  /**\n   * Reset internal state (e.g., smoothing buffers).\n   */\n  reset(): void;\n}\n\n/**\n * Interface for the main controller manager.\n * Combines multiple controllers and produces the final ControlState.\n */\nexport interface IControllerManager {\n  /** Observable stream of control states */\n  readonly state$: Observable<ControlState>;\n\n  /** Current configuration */\n  readonly config: ControllerConfig;\n\n  /**\n   * Start processing hand frames.\n   * @param handFrames$ - Observable stream from HandTracker\n   */\n  start(handFrames$: Observable<HandFrame>): void;\n\n  /**\n   * Stop processing.\n   */\n  stop(): void;\n\n  /**\n   * Update configuration.\n   * @param config - Partial configuration to merge\n   */\n  updateConfig(config: PartialControllerConfig): void;\n\n  /**\n   * Get the current control state.\n   */\n  getCurrentState(): ControlState;\n\n  /**\n   * Reset all controllers.\n   */\n  reset(): void;\n}\n\n/**\n * Result of processing a single hand through controllers.\n */\nexport interface HandProcessingResult {\n  /** Updated hand control state */\n  handState: SingleHandControlState;\n\n  /** Any additional computed data */\n  metadata?: Record<string, unknown>;\n}\n","/**\n * Position Controller\n *\n * Tracks hand position and calculates velocity.\n * Outputs normalized [0, 1] coordinates for palm center or fingertip.\n */\n\nimport type { HandFrame, HandData, Point3D, HandLandmarks } from '../types/hand.types';\nimport { HandLandmark } from '../types/hand.types';\nimport type { ControlState, Position2D, Velocity2D } from '../types/control.types';\nimport { createEmptyHandControlState } from '../types/control.types';\nimport type { IController, PositionControllerConfig } from './IController';\nimport { DEFAULT_CONTROLLER_CONFIG } from './IController';\n\n/**\n * Internal state for tracking a single hand's position history.\n */\ninterface HandPositionHistory {\n  lastPosition: Position2D | null;\n  lastTimestamp: number;\n  smoothedPosition: Position2D;\n}\n\n/**\n * PositionController tracks hand positions and calculates velocity.\n */\nexport class PositionController implements IController<PositionControllerConfig> {\n  readonly name = 'PositionController';\n\n  private _config: PositionControllerConfig;\n  private handHistory: Map<number, HandPositionHistory> = new Map();\n\n  constructor(config?: Partial<PositionControllerConfig>) {\n    this._config = { ...DEFAULT_CONTROLLER_CONFIG.position, ...config };\n  }\n\n  get config(): PositionControllerConfig {\n    return { ...this._config };\n  }\n\n  updateConfig(config: Partial<PositionControllerConfig>): void {\n    this._config = { ...this._config, ...config };\n  }\n\n  reset(): void {\n    this.handHistory.clear();\n  }\n\n  /**\n   * Process a hand frame and update position data in control state.\n   */\n  process(frame: HandFrame, state: ControlState): ControlState {\n    const updatedHands = frame.hands.map((hand) => this.processHand(hand, frame.timestamp, state));\n\n    // Clean up history for hands no longer tracked\n    const activeHandIds = new Set(frame.hands.map((h) => h.id));\n    for (const [id] of this.handHistory) {\n      if (!activeHandIds.has(id)) {\n        this.handHistory.delete(id);\n      }\n    }\n\n    return {\n      ...state,\n      hands: updatedHands,\n      hasActiveHand: updatedHands.length > 0,\n      primaryHand: updatedHands[0] || null,\n      secondaryHand: updatedHands[1] || null,\n    };\n  }\n\n  /**\n   * Process a single hand's position data.\n   */\n  private processHand(\n    hand: HandData,\n    timestamp: number,\n    state: ControlState\n  ): ControlState['hands'][0] {\n    // Get or create hand state\n    const existingHandState = state.hands.find((h) => h.handId === hand.id);\n    const handState = existingHandState ?? createEmptyHandControlState(hand.id);\n\n    // Calculate raw position based on tracking mode\n    const rawPosition = this.calculatePosition(hand.landmarks);\n    const fingertipPosition = this.getLandmarkPosition(\n      hand.landmarks,\n      HandLandmark.INDEX_FINGER_TIP\n    );\n\n    // Get or create position history\n    let history = this.handHistory.get(hand.id);\n    if (!history) {\n      history = {\n        lastPosition: null,\n        lastTimestamp: timestamp,\n        smoothedPosition: rawPosition,\n      };\n      this.handHistory.set(hand.id, history);\n    }\n\n    // Apply smoothing if enabled\n    const smoothedPosition = this._config.smoothingEnabled\n      ? this.smoothPosition(rawPosition, history.smoothedPosition)\n      : rawPosition;\n\n    // Apply movement threshold to prevent jitter\n    const position = this.applyThreshold(smoothedPosition, history.smoothedPosition);\n\n    // Calculate velocity\n    const velocity = this._config.calculateVelocity\n      ? this.calculateVelocity(position, history.lastPosition, timestamp, history.lastTimestamp)\n      : handState.velocity;\n\n    // Update history\n    history.lastPosition = position;\n    history.lastTimestamp = timestamp;\n    history.smoothedPosition = position;\n\n    // Calculate depth from average z coordinate\n    const depth = this.calculateDepth(hand.landmarks);\n\n    // Calculate hand rotation (wrist to middle finger MCP angle)\n    const rotation = this.calculateRotation(hand.landmarks);\n\n    return {\n      ...handState,\n      isTracked: true,\n      position,\n      fingertipPosition,\n      velocity,\n      depth,\n      rotation,\n    };\n  }\n\n  /**\n   * Calculate position based on tracking mode.\n   */\n  private calculatePosition(landmarks: HandLandmarks): Position2D {\n    switch (this._config.trackingMode) {\n      case 'index_tip':\n        return this.getLandmarkPosition(landmarks, HandLandmark.INDEX_FINGER_TIP);\n\n      case 'wrist':\n        return this.getLandmarkPosition(landmarks, HandLandmark.WRIST);\n\n      case 'palm':\n      default:\n        return this.calculatePalmCenter(landmarks);\n    }\n  }\n\n  /**\n   * Calculate palm center from key landmarks.\n   */\n  private calculatePalmCenter(landmarks: HandLandmarks): Position2D {\n    // Palm center is average of wrist and finger MCPs\n    const palmLandmarks = [\n      landmarks[HandLandmark.WRIST],\n      landmarks[HandLandmark.INDEX_FINGER_MCP],\n      landmarks[HandLandmark.MIDDLE_FINGER_MCP],\n      landmarks[HandLandmark.RING_FINGER_MCP],\n      landmarks[HandLandmark.PINKY_MCP],\n    ];\n\n    const sum = palmLandmarks.reduce(\n      (acc, point) => ({\n        x: acc.x + point.x,\n        y: acc.y + point.y,\n      }),\n      { x: 0, y: 0 }\n    );\n\n    return {\n      x: sum.x / palmLandmarks.length,\n      y: sum.y / palmLandmarks.length,\n    };\n  }\n\n  /**\n   * Get position of a specific landmark.\n   */\n  private getLandmarkPosition(landmarks: HandLandmarks, landmark: HandLandmark): Position2D {\n    const point = landmarks[landmark];\n    return { x: point.x, y: point.y };\n  }\n\n  /**\n   * Apply exponential smoothing to position.\n   */\n  private smoothPosition(current: Position2D, previous: Position2D): Position2D {\n    const alpha = 1 - this._config.smoothingFactor;\n    return {\n      x: alpha * current.x + this._config.smoothingFactor * previous.x,\n      y: alpha * current.y + this._config.smoothingFactor * previous.y,\n    };\n  }\n\n  /**\n   * Apply movement threshold to filter jitter.\n   */\n  private applyThreshold(current: Position2D, previous: Position2D): Position2D {\n    const dx = current.x - previous.x;\n    const dy = current.y - previous.y;\n    const distance = Math.sqrt(dx * dx + dy * dy);\n\n    if (distance < this._config.movementThreshold) {\n      return previous;\n    }\n\n    return current;\n  }\n\n  /**\n   * Calculate velocity from position change.\n   */\n  private calculateVelocity(\n    current: Position2D,\n    previous: Position2D | null,\n    currentTime: number,\n    previousTime: number\n  ): Velocity2D {\n    if (!previous || currentTime === previousTime) {\n      return { vx: 0, vy: 0, magnitude: 0 };\n    }\n\n    const dt = (currentTime - previousTime) / 1000; // Convert to seconds\n    if (dt <= 0) {\n      return { vx: 0, vy: 0, magnitude: 0 };\n    }\n\n    const vx = (current.x - previous.x) / dt;\n    const vy = (current.y - previous.y) / dt;\n    const magnitude = Math.sqrt(vx * vx + vy * vy);\n\n    return { vx, vy, magnitude };\n  }\n\n  /**\n   * Calculate depth from average Z coordinate.\n   * Normalized to [0, 1] where 0 = far, 1 = close.\n   */\n  private calculateDepth(landmarks: HandLandmarks): number {\n    const avgZ =\n      landmarks.reduce((sum: number, point: Point3D) => sum + point.z, 0) / landmarks.length;\n\n    // MediaPipe z is typically in range [-0.5, 0.5] relative to wrist\n    // Normalize to [0, 1] where closer = higher value\n    return Math.max(0, Math.min(1, 0.5 - avgZ));\n  }\n\n  /**\n   * Calculate hand rotation angle.\n   * Returns angle in radians from horizontal.\n   */\n  private calculateRotation(landmarks: HandLandmarks): number {\n    const wrist = landmarks[HandLandmark.WRIST];\n    const middleMcp = landmarks[HandLandmark.MIDDLE_FINGER_MCP];\n\n    const dx = middleMcp.x - wrist.x;\n    const dy = middleMcp.y - wrist.y;\n\n    return Math.atan2(dy, dx);\n  }\n}\n","/**\n * Gesture Controller\n *\n * Detects hand gestures from landmark positions.\n * Supports: open hand, closed fist, pointing, pinch, peace, thumbs up.\n */\n\nimport type { HandFrame, HandData, HandLandmarks, Point3D } from '../types/hand.types';\nimport { HandLandmark } from '../types/hand.types';\nimport type {\n  ControlState,\n  GestureState,\n  FingerStates,\n  HandOpenness,\n} from '../types/control.types';\nimport { GestureType } from '../types/control.types';\nimport type { IController, GestureControllerConfig } from './IController';\nimport { DEFAULT_CONTROLLER_CONFIG } from './IController';\n\n/**\n * Internal state for tracking gesture history per hand.\n */\ninterface GestureHistory {\n  lastGesture: GestureType;\n  gestureStartTime: number;\n  smoothedOpenness: number;\n}\n\n/**\n * GestureController detects gestures from hand landmarks.\n */\nexport class GestureController implements IController<GestureControllerConfig> {\n  readonly name = 'GestureController';\n\n  private _config: GestureControllerConfig;\n  private gestureHistory: Map<number, GestureHistory> = new Map();\n\n  constructor(config?: Partial<GestureControllerConfig>) {\n    this._config = { ...DEFAULT_CONTROLLER_CONFIG.gesture, ...config };\n  }\n\n  get config(): GestureControllerConfig {\n    return { ...this._config };\n  }\n\n  updateConfig(config: Partial<GestureControllerConfig>): void {\n    this._config = { ...this._config, ...config };\n  }\n\n  reset(): void {\n    this.gestureHistory.clear();\n  }\n\n  /**\n   * Process a hand frame and update gesture data in control state.\n   */\n  process(frame: HandFrame, state: ControlState): ControlState {\n    const updatedHands = state.hands.map((handState) => {\n      const handData = frame.hands.find((h) => h.id === handState.handId);\n      if (!handData) {\n        return handState;\n      }\n      return this.processHand(handData, frame.timestamp, handState);\n    });\n\n    // Clean up history for hands no longer tracked\n    const activeHandIds = new Set(frame.hands.map((h) => h.id));\n    for (const [id] of this.gestureHistory) {\n      if (!activeHandIds.has(id)) {\n        this.gestureHistory.delete(id);\n      }\n    }\n\n    return {\n      ...state,\n      hands: updatedHands,\n      primaryHand: updatedHands[0] || null,\n      secondaryHand: updatedHands[1] || null,\n    };\n  }\n\n  /**\n   * Process gesture detection for a single hand.\n   */\n  private processHand(\n    hand: HandData,\n    timestamp: number,\n    handState: ControlState['hands'][0]\n  ): ControlState['hands'][0] {\n    // Detect finger states\n    const fingers = this.detectFingerStates(hand.landmarks);\n\n    // Calculate hand openness\n    const rawOpenness = this.calculateOpenness(hand.landmarks);\n\n    // Get or create gesture history\n    let history = this.gestureHistory.get(hand.id);\n    if (!history) {\n      history = {\n        lastGesture: GestureType.NONE,\n        gestureStartTime: timestamp,\n        smoothedOpenness: rawOpenness,\n      };\n      this.gestureHistory.set(hand.id, history);\n    }\n\n    // Smooth openness\n    const smoothedOpenness = this._config.smoothingEnabled\n      ? this.smoothValue(rawOpenness, history.smoothedOpenness)\n      : rawOpenness;\n\n    // Calculate openness derivative\n    const opennessDerivative =\n      (smoothedOpenness - history.smoothedOpenness) / Math.max(1, timestamp - history.gestureStartTime);\n\n    history.smoothedOpenness = smoothedOpenness;\n\n    // Detect gesture\n    const detectedGesture = this.detectGesture(hand.landmarks, fingers, smoothedOpenness);\n\n    // Update gesture timing\n    if (detectedGesture !== history.lastGesture) {\n      history.lastGesture = detectedGesture;\n      history.gestureStartTime = timestamp;\n    }\n\n    const duration = timestamp - history.gestureStartTime;\n\n    // Build gesture state\n    const gesture: GestureState = {\n      type: duration >= this._config.minDuration ? detectedGesture : handState.gesture.type,\n      confidence: this.calculateGestureConfidence(detectedGesture, fingers, smoothedOpenness),\n      duration: detectedGesture === handState.gesture.type ? handState.gesture.duration + (timestamp - handState.gesture.duration) : 0,\n    };\n\n    // Correct duration calculation\n    gesture.duration = duration;\n\n    const openness: HandOpenness = {\n      value: smoothedOpenness,\n      derivative: opennessDerivative,\n    };\n\n    return {\n      ...handState,\n      gesture,\n      fingers,\n      openness,\n    };\n  }\n\n  /**\n   * Detect which fingers are extended.\n   */\n  private detectFingerStates(landmarks: HandLandmarks): FingerStates {\n    const thumb = this.isThumbExtended(landmarks);\n    const index = this.isFingerExtended(landmarks, 'index');\n    const middle = this.isFingerExtended(landmarks, 'middle');\n    const ring = this.isFingerExtended(landmarks, 'ring');\n    const pinky = this.isFingerExtended(landmarks, 'pinky');\n\n    const extendedCount = [thumb, index, middle, ring, pinky].filter(Boolean).length;\n\n    return { thumb, index, middle, ring, pinky, extendedCount };\n  }\n\n  /**\n   * Check if thumb is extended.\n   * Thumb uses different logic - checks if tip is further from palm than IP joint.\n   */\n  private isThumbExtended(landmarks: HandLandmarks): boolean {\n    const thumbTip = landmarks[HandLandmark.THUMB_TIP];\n    const thumbIp = landmarks[HandLandmark.THUMB_IP];\n    const thumbMcp = landmarks[HandLandmark.THUMB_MCP];\n    const wrist = landmarks[HandLandmark.WRIST];\n\n    // Distance from tip to wrist should be greater than IP to wrist\n    const tipToWrist = this.distance3D(thumbTip, wrist);\n    const ipToWrist = this.distance3D(thumbIp, wrist);\n    const mcpToWrist = this.distance3D(thumbMcp, wrist);\n\n    return tipToWrist > ipToWrist && tipToWrist > mcpToWrist * 1.2;\n  }\n\n  /**\n   * Check if a finger is extended using angle between joints.\n   */\n  private isFingerExtended(\n    landmarks: HandLandmarks,\n    finger: 'index' | 'middle' | 'ring' | 'pinky'\n  ): boolean {\n    const fingerIndices = {\n      index: {\n        mcp: HandLandmark.INDEX_FINGER_MCP,\n        pip: HandLandmark.INDEX_FINGER_PIP,\n        dip: HandLandmark.INDEX_FINGER_DIP,\n        tip: HandLandmark.INDEX_FINGER_TIP,\n      },\n      middle: {\n        mcp: HandLandmark.MIDDLE_FINGER_MCP,\n        pip: HandLandmark.MIDDLE_FINGER_PIP,\n        dip: HandLandmark.MIDDLE_FINGER_DIP,\n        tip: HandLandmark.MIDDLE_FINGER_TIP,\n      },\n      ring: {\n        mcp: HandLandmark.RING_FINGER_MCP,\n        pip: HandLandmark.RING_FINGER_PIP,\n        dip: HandLandmark.RING_FINGER_DIP,\n        tip: HandLandmark.RING_FINGER_TIP,\n      },\n      pinky: {\n        mcp: HandLandmark.PINKY_MCP,\n        pip: HandLandmark.PINKY_PIP,\n        dip: HandLandmark.PINKY_DIP,\n        tip: HandLandmark.PINKY_TIP,\n      },\n    };\n\n    const indices = fingerIndices[finger];\n    const mcp = landmarks[indices.mcp];\n    const pip = landmarks[indices.pip];\n    const dip = landmarks[indices.dip];\n    const tip = landmarks[indices.tip];\n\n    // Calculate angles at PIP and DIP joints\n    const pipAngle = this.calculateAngle(mcp, pip, dip);\n    const dipAngle = this.calculateAngle(pip, dip, tip);\n\n    // Finger is extended if both angles are greater than threshold\n    return pipAngle > this._config.extensionAngleThreshold && dipAngle > this._config.extensionAngleThreshold;\n  }\n\n  /**\n   * Calculate angle between three points (in radians).\n   */\n  private calculateAngle(a: Point3D, b: Point3D, c: Point3D): number {\n    const ba = { x: a.x - b.x, y: a.y - b.y, z: a.z - b.z };\n    const bc = { x: c.x - b.x, y: c.y - b.y, z: c.z - b.z };\n\n    const dotProduct = ba.x * bc.x + ba.y * bc.y + ba.z * bc.z;\n    const magnitudeBA = Math.sqrt(ba.x * ba.x + ba.y * ba.y + ba.z * ba.z);\n    const magnitudeBC = Math.sqrt(bc.x * bc.x + bc.y * bc.y + bc.z * bc.z);\n\n    if (magnitudeBA === 0 || magnitudeBC === 0) {\n      return 0;\n    }\n\n    const cosAngle = Math.max(-1, Math.min(1, dotProduct / (magnitudeBA * magnitudeBC)));\n    return Math.acos(cosAngle);\n  }\n\n  /**\n   * Calculate 3D distance between two points.\n   */\n  private distance3D(a: Point3D, b: Point3D): number {\n    const dx = a.x - b.x;\n    const dy = a.y - b.y;\n    const dz = a.z - b.z;\n    return Math.sqrt(dx * dx + dy * dy + dz * dz);\n  }\n\n  /**\n   * Calculate 2D distance between two points.\n   */\n  private distance2D(a: Point3D, b: Point3D): number {\n    const dx = a.x - b.x;\n    const dy = a.y - b.y;\n    return Math.sqrt(dx * dx + dy * dy);\n  }\n\n  /**\n   * Calculate overall hand openness [0, 1].\n   */\n  private calculateOpenness(landmarks: HandLandmarks): number {\n    const wrist = landmarks[HandLandmark.WRIST];\n\n    // Calculate average distance from fingertips to wrist\n    const fingertips = [\n      landmarks[HandLandmark.THUMB_TIP],\n      landmarks[HandLandmark.INDEX_FINGER_TIP],\n      landmarks[HandLandmark.MIDDLE_FINGER_TIP],\n      landmarks[HandLandmark.RING_FINGER_TIP],\n      landmarks[HandLandmark.PINKY_TIP],\n    ];\n\n    const avgDistance = fingertips.reduce((sum, tip) => sum + this.distance3D(tip, wrist), 0) / 5;\n\n    // Normalize based on typical hand proportions\n    // Fully open hand has fingertips at ~0.4-0.5 distance from wrist\n    // Closed fist has fingertips at ~0.1-0.2 distance from wrist\n    const normalized = (avgDistance - 0.1) / 0.35;\n\n    return Math.max(0, Math.min(1, normalized));\n  }\n\n  /**\n   * Detect the primary gesture from landmarks and finger states.\n   */\n  private detectGesture(\n    landmarks: HandLandmarks,\n    fingers: FingerStates,\n    openness: number\n  ): GestureType {\n    // Check for pinch (thumb and index close together)\n    if (this.isPinching(landmarks)) {\n      return GestureType.PINCH;\n    }\n\n    // Closed fist (no fingers extended, low openness)\n    if (fingers.extendedCount === 0 && openness < 0.3) {\n      return GestureType.CLOSED_FIST;\n    }\n\n    // Thumbs up (only thumb extended)\n    if (fingers.thumb && !fingers.index && !fingers.middle && !fingers.ring && !fingers.pinky) {\n      return GestureType.THUMBS_UP;\n    }\n\n    // Pointing (only index extended)\n    if (!fingers.thumb && fingers.index && !fingers.middle && !fingers.ring && !fingers.pinky) {\n      return GestureType.POINTING;\n    }\n\n    // Peace sign (index and middle extended)\n    if (\n      !fingers.thumb &&\n      fingers.index &&\n      fingers.middle &&\n      !fingers.ring &&\n      !fingers.pinky\n    ) {\n      return GestureType.PEACE;\n    }\n\n    // Open hand (most fingers extended, high openness)\n    if (fingers.extendedCount >= 4 && openness > 0.5) {\n      return GestureType.OPEN_HAND;\n    }\n\n    return GestureType.NONE;\n  }\n\n  /**\n   * Check if thumb and index finger are pinching.\n   */\n  private isPinching(landmarks: HandLandmarks): boolean {\n    const thumbTip = landmarks[HandLandmark.THUMB_TIP];\n    const indexTip = landmarks[HandLandmark.INDEX_FINGER_TIP];\n\n    const distance = this.distance2D(thumbTip, indexTip);\n\n    return distance < this._config.pinchThreshold;\n  }\n\n  /**\n   * Calculate confidence for detected gesture.\n   */\n  private calculateGestureConfidence(\n    gesture: GestureType,\n    fingers: FingerStates,\n    openness: number\n  ): number {\n    switch (gesture) {\n      case GestureType.CLOSED_FIST:\n        return Math.min(1, (0.3 - openness) / 0.3 + (5 - fingers.extendedCount) / 5);\n\n      case GestureType.OPEN_HAND:\n        return Math.min(1, openness / 0.7 + fingers.extendedCount / 5);\n\n      case GestureType.POINTING:\n      case GestureType.THUMBS_UP:\n      case GestureType.PEACE:\n        return fingers.extendedCount <= 2 ? 0.9 : 0.7;\n\n      case GestureType.PINCH:\n        return 0.95;\n\n      default:\n        return 0.5;\n    }\n  }\n\n  /**\n   * Smooth a value with exponential moving average.\n   */\n  private smoothValue(current: number, previous: number): number {\n    const alpha = 1 - this._config.smoothingFactor;\n    return alpha * current + this._config.smoothingFactor * previous;\n  }\n}\n","/**\n * Distance Controller\n *\n * Measures distances between hands and fingers.\n * Useful for two-hand gestures and zoom/scale controls.\n */\n\nimport type { HandFrame, HandLandmarks, Point3D } from '../types/hand.types';\nimport { HandLandmark } from '../types/hand.types';\nimport type { ControlState } from '../types/control.types';\nimport type { IController, DistanceControllerConfig } from './IController';\nimport { DEFAULT_CONTROLLER_CONFIG } from './IController';\n\n/**\n * Distance measurements between hands.\n */\nexport interface DistanceMeasurements {\n  /** Distance between palm centers (if two hands) */\n  palmToPalm: number | null;\n\n  /** Distance between index fingertips (if two hands) */\n  indexToIndex: number | null;\n\n  /** Distance between thumb tips (if two hands) */\n  thumbToThumb: number | null;\n\n  /** Pinch distance for primary hand (thumb to index) */\n  primaryPinch: number | null;\n\n  /** Pinch distance for secondary hand (thumb to index) */\n  secondaryPinch: number | null;\n\n  /** Average hand size (for normalization) */\n  avgHandSize: number;\n}\n\n/**\n * Internal state for distance tracking.\n */\ninterface DistanceHistory {\n  lastMeasurements: DistanceMeasurements | null;\n  smoothedMeasurements: DistanceMeasurements | null;\n}\n\n/**\n * DistanceController measures distances between landmarks.\n */\nexport class DistanceController implements IController<DistanceControllerConfig> {\n  readonly name = 'DistanceController';\n\n  private _config: DistanceControllerConfig;\n  private history: DistanceHistory = {\n    lastMeasurements: null,\n    smoothedMeasurements: null,\n  };\n\n  constructor(config?: Partial<DistanceControllerConfig>) {\n    this._config = { ...DEFAULT_CONTROLLER_CONFIG.distance, ...config };\n  }\n\n  get config(): DistanceControllerConfig {\n    return { ...this._config };\n  }\n\n  updateConfig(config: Partial<DistanceControllerConfig>): void {\n    this._config = { ...this._config, ...config };\n  }\n\n  reset(): void {\n    this.history = {\n      lastMeasurements: null,\n      smoothedMeasurements: null,\n    };\n  }\n\n  /**\n   * Process a hand frame and update distance data in control state.\n   */\n  process(frame: HandFrame, state: ControlState): ControlState {\n    const measurements = this.calculateMeasurements(frame);\n\n    // Apply smoothing if enabled\n    const smoothedMeasurements =\n      this._config.smoothingEnabled && this.history.smoothedMeasurements\n        ? this.smoothMeasurements(measurements, this.history.smoothedMeasurements)\n        : measurements;\n\n    // Update history\n    this.history.lastMeasurements = measurements;\n    this.history.smoothedMeasurements = smoothedMeasurements;\n\n    // Store measurements in custom data\n    return {\n      ...state,\n      custom: {\n        ...state.custom,\n        distances: smoothedMeasurements,\n      },\n    };\n  }\n\n  /**\n   * Calculate all distance measurements from current frame.\n   */\n  private calculateMeasurements(frame: HandFrame): DistanceMeasurements {\n    const hands = frame.hands;\n\n    // Calculate average hand size for normalization\n    const avgHandSize = this.calculateAverageHandSize(hands.map((h) => h.landmarks));\n\n    // Base measurements\n    const measurements: DistanceMeasurements = {\n      palmToPalm: null,\n      indexToIndex: null,\n      thumbToThumb: null,\n      primaryPinch: null,\n      secondaryPinch: null,\n      avgHandSize,\n    };\n\n    // Single hand measurements\n    if (hands.length >= 1) {\n      const primaryLandmarks = hands[0].landmarks;\n      measurements.primaryPinch = this.calculatePinchDistance(primaryLandmarks, avgHandSize);\n    }\n\n    if (hands.length >= 2) {\n      const secondaryLandmarks = hands[1].landmarks;\n      measurements.secondaryPinch = this.calculatePinchDistance(secondaryLandmarks, avgHandSize);\n\n      // Two-hand measurements\n      const primaryLandmarks = hands[0].landmarks;\n\n      measurements.palmToPalm = this.calculatePalmToPalmDistance(\n        primaryLandmarks,\n        secondaryLandmarks,\n        avgHandSize\n      );\n\n      measurements.indexToIndex = this.calculateLandmarkDistance(\n        primaryLandmarks[HandLandmark.INDEX_FINGER_TIP],\n        secondaryLandmarks[HandLandmark.INDEX_FINGER_TIP],\n        avgHandSize\n      );\n\n      measurements.thumbToThumb = this.calculateLandmarkDistance(\n        primaryLandmarks[HandLandmark.THUMB_TIP],\n        secondaryLandmarks[HandLandmark.THUMB_TIP],\n        avgHandSize\n      );\n    }\n\n    return measurements;\n  }\n\n  /**\n   * Calculate pinch distance (thumb tip to index tip).\n   */\n  private calculatePinchDistance(landmarks: HandLandmarks, handSize: number): number {\n    const thumbTip = landmarks[HandLandmark.THUMB_TIP];\n    const indexTip = landmarks[HandLandmark.INDEX_FINGER_TIP];\n\n    const distance = this.distance2D(thumbTip, indexTip);\n\n    return this._config.normalizeToHandSize && handSize > 0 ? distance / handSize : distance;\n  }\n\n  /**\n   * Calculate distance between palm centers.\n   */\n  private calculatePalmToPalmDistance(\n    landmarks1: HandLandmarks,\n    landmarks2: HandLandmarks,\n    handSize: number\n  ): number {\n    const palm1 = this.calculatePalmCenter(landmarks1);\n    const palm2 = this.calculatePalmCenter(landmarks2);\n\n    const distance = this.distance2D(palm1, palm2);\n\n    return this._config.normalizeToHandSize && handSize > 0 ? distance / handSize : distance;\n  }\n\n  /**\n   * Calculate distance between two landmarks.\n   */\n  private calculateLandmarkDistance(a: Point3D, b: Point3D, handSize: number): number {\n    const distance = this.distance2D(a, b);\n    return this._config.normalizeToHandSize && handSize > 0 ? distance / handSize : distance;\n  }\n\n  /**\n   * Calculate palm center position.\n   */\n  private calculatePalmCenter(landmarks: HandLandmarks): Point3D {\n    const palmLandmarks = [\n      landmarks[HandLandmark.WRIST],\n      landmarks[HandLandmark.INDEX_FINGER_MCP],\n      landmarks[HandLandmark.MIDDLE_FINGER_MCP],\n      landmarks[HandLandmark.RING_FINGER_MCP],\n      landmarks[HandLandmark.PINKY_MCP],\n    ];\n\n    const sum = palmLandmarks.reduce(\n      (acc, point) => ({\n        x: acc.x + point.x,\n        y: acc.y + point.y,\n        z: acc.z + point.z,\n      }),\n      { x: 0, y: 0, z: 0 }\n    );\n\n    return {\n      x: sum.x / palmLandmarks.length,\n      y: sum.y / palmLandmarks.length,\n      z: sum.z / palmLandmarks.length,\n    };\n  }\n\n  /**\n   * Calculate average hand size from landmarks.\n   * Uses wrist to middle fingertip distance as reference.\n   */\n  private calculateAverageHandSize(allLandmarks: HandLandmarks[]): number {\n    if (allLandmarks.length === 0) {\n      return 0.3; // Default fallback\n    }\n\n    const sizes = allLandmarks.map((landmarks) => {\n      const wrist = landmarks[HandLandmark.WRIST];\n      const middleTip = landmarks[HandLandmark.MIDDLE_FINGER_TIP];\n      return this.distance2D(wrist, middleTip);\n    });\n\n    return sizes.reduce((sum, size) => sum + size, 0) / sizes.length;\n  }\n\n  /**\n   * Calculate 2D distance between two points.\n   */\n  private distance2D(a: Point3D, b: Point3D): number {\n    const dx = a.x - b.x;\n    const dy = a.y - b.y;\n    return Math.sqrt(dx * dx + dy * dy);\n  }\n\n  /**\n   * Smooth measurements using exponential moving average.\n   */\n  private smoothMeasurements(\n    current: DistanceMeasurements,\n    previous: DistanceMeasurements\n  ): DistanceMeasurements {\n    const alpha = 1 - this._config.smoothingFactor;\n\n    const smooth = (curr: number | null, prev: number | null): number | null => {\n      if (curr === null) return null;\n      if (prev === null) return curr;\n      return alpha * curr + this._config.smoothingFactor * prev;\n    };\n\n    return {\n      palmToPalm: smooth(current.palmToPalm, previous.palmToPalm),\n      indexToIndex: smooth(current.indexToIndex, previous.indexToIndex),\n      thumbToThumb: smooth(current.thumbToThumb, previous.thumbToThumb),\n      primaryPinch: smooth(current.primaryPinch, previous.primaryPinch),\n      secondaryPinch: smooth(current.secondaryPinch, previous.secondaryPinch),\n      avgHandSize: alpha * current.avgHandSize + this._config.smoothingFactor * previous.avgHandSize,\n    };\n  }\n\n  /**\n   * Get current distance measurements.\n   */\n  getMeasurements(): DistanceMeasurements | null {\n    return this.history.smoothedMeasurements;\n  }\n}\n\n/**\n * Type guard to check if distances are available in control state.\n */\nexport function hasDistances(\n  state: ControlState\n): state is ControlState & { custom: { distances: DistanceMeasurements } } {\n  return 'distances' in state.custom && state.custom.distances !== undefined;\n}\n\n/**\n * Get distance measurements from control state.\n */\nexport function getDistances(state: ControlState): DistanceMeasurements | null {\n  if (hasDistances(state)) {\n    return state.custom.distances;\n  }\n  return null;\n}\n","/**\n * Controller Manager\n *\n * Combines multiple controllers and produces the final ControlState.\n * Manages the pipeline: HandFrame  Controllers  ControlState\n */\n\nimport { Observable, Subscription, BehaviorSubject } from 'rxjs';\nimport { map } from 'rxjs/operators';\nimport type { HandFrame } from '../types/hand.types';\nimport type { ControlState } from '../types/control.types';\nimport { createEmptyControlState } from '../types/control.types';\nimport type { IControllerManager, ControllerConfig, PartialControllerConfig, IController } from './IController';\nimport { DEFAULT_CONTROLLER_CONFIG } from './IController';\nimport { PositionController } from './PositionController';\nimport { GestureController } from './GestureController';\nimport { DistanceController } from './DistanceController';\n\n/**\n * ControllerManager orchestrates multiple controllers to process hand data.\n */\nexport class ControllerManager implements IControllerManager {\n  private _config: ControllerConfig;\n  private controllers: IController[];\n  private positionController: PositionController;\n  private gestureController: GestureController;\n  private distanceController: DistanceController;\n\n  private subscription: Subscription | null = null;\n  private stateSubject = new BehaviorSubject<ControlState>(createEmptyControlState());\n  private lastTimestamp = 0;\n\n  constructor(config?: PartialControllerConfig) {\n    this._config = this.mergeConfig(DEFAULT_CONTROLLER_CONFIG, config);\n\n    // Initialize controllers\n    this.positionController = new PositionController(this._config.position);\n    this.gestureController = new GestureController(this._config.gesture);\n    this.distanceController = new DistanceController(this._config.distance);\n\n    this.controllers = [\n      this.positionController,\n      this.gestureController,\n      this.distanceController,\n    ];\n  }\n\n  /**\n   * Observable stream of control states.\n   */\n  get state$(): Observable<ControlState> {\n    return this.stateSubject.asObservable();\n  }\n\n  /**\n   * Current configuration.\n   */\n  get config(): ControllerConfig {\n    return { ...this._config };\n  }\n\n  /**\n   * Start processing hand frames.\n   */\n  start(handFrames$: Observable<HandFrame>): void {\n    this.stop();\n\n    this.subscription = handFrames$\n      .pipe(map((frame) => this.processFrame(frame)))\n      .subscribe((state) => {\n        this.stateSubject.next(state);\n      });\n  }\n\n  /**\n   * Stop processing.\n   */\n  stop(): void {\n    if (this.subscription) {\n      this.subscription.unsubscribe();\n      this.subscription = null;\n    }\n  }\n\n  /**\n   * Update configuration.\n   */\n  updateConfig(config: PartialControllerConfig): void {\n    this._config = this.mergeConfig(this._config, config);\n\n    // Update individual controllers\n    if (config.position) {\n      this.positionController.updateConfig(config.position);\n    }\n    if (config.gesture) {\n      this.gestureController.updateConfig(config.gesture);\n    }\n    if (config.distance) {\n      this.distanceController.updateConfig(config.distance);\n    }\n  }\n\n  /**\n   * Get the current control state.\n   */\n  getCurrentState(): ControlState {\n    return this.stateSubject.getValue();\n  }\n\n  /**\n   * Reset all controllers.\n   */\n  reset(): void {\n    this.controllers.forEach((controller) => controller.reset());\n    this.stateSubject.next(createEmptyControlState());\n    this.lastTimestamp = 0;\n  }\n\n  /**\n   * Process a single hand frame through all controllers.\n   */\n  private processFrame(frame: HandFrame): ControlState {\n    const deltaTime = this.lastTimestamp > 0 ? frame.timestamp - this.lastTimestamp : 0;\n    this.lastTimestamp = frame.timestamp;\n\n    // Start with empty state\n    let state = createEmptyControlState();\n    state.timestamp = frame.timestamp;\n    state.deltaTime = deltaTime;\n\n    // Process through each controller in sequence\n    // Position must come first as it creates the hand states\n    state = this.positionController.process(frame, state);\n    state = this.gestureController.process(frame, state);\n    state = this.distanceController.process(frame, state);\n\n    return state;\n  }\n\n  /**\n   * Deep merge configuration objects.\n   */\n  private mergeConfig(\n    base: ControllerConfig,\n    override?: PartialControllerConfig\n  ): ControllerConfig {\n    if (!override) {\n      return { ...base };\n    }\n\n    return {\n      position: { ...base.position, ...override.position },\n      gesture: { ...base.gesture, ...override.gesture },\n      distance: { ...base.distance, ...override.distance },\n    };\n  }\n\n  /**\n   * Get reference to position controller for direct access.\n   */\n  getPositionController(): PositionController {\n    return this.positionController;\n  }\n\n  /**\n   * Get reference to gesture controller for direct access.\n   */\n  getGestureController(): GestureController {\n    return this.gestureController;\n  }\n\n  /**\n   * Get reference to distance controller for direct access.\n   */\n  getDistanceController(): DistanceController {\n    return this.distanceController;\n  }\n}\n\n/**\n * Create a pre-configured ControllerManager.\n */\nexport function createControllerManager(config?: PartialControllerConfig): ControllerManager {\n  return new ControllerManager(config);\n}\n","/**\n * Dias-Toffoli - Main Application Entry Point\n *\n * Initializes and orchestrates the hand tracking application.\n */\n\nimport { HandTracker } from './core';\nimport { CameraPreview, DebugOverlay } from './ui';\nimport { ControllerManager } from './controllers';\nimport type { ControlState } from './types/control.types';\n\n/**\n * Application state.\n */\ninterface AppState {\n  isInitialized: boolean;\n  isTracking: boolean;\n  error: string | null;\n}\n\n/**\n * Main application class.\n */\nclass App {\n  private state: AppState = {\n    isInitialized: false,\n    isTracking: false,\n    error: null,\n  };\n\n  private cameraPreview: CameraPreview;\n  private handTracker: HandTracker;\n  private debugOverlay: DebugOverlay;\n  private controllerManager: ControllerManager;\n\n  // DOM elements\n  private statusEl: HTMLElement | null = null;\n  private startBtn: HTMLButtonElement | null = null;\n  private stopBtn: HTMLButtonElement | null = null;\n  private videoEl: HTMLVideoElement | null = null;\n  private canvasEl: HTMLCanvasElement | null = null;\n  private fpsEl: HTMLElement | null = null;\n  private loadingOverlay: HTMLElement | null = null;\n  private loadingText: HTMLElement | null = null;\n  private progressFill: HTMLElement | null = null;\n  private gestureEl: HTMLElement | null = null;\n\n  constructor() {\n    this.cameraPreview = new CameraPreview();\n    this.handTracker = new HandTracker();\n    this.debugOverlay = new DebugOverlay();\n    this.controllerManager = new ControllerManager();\n  }\n\n  /**\n   * Initialize the application.\n   */\n  initialize(): void {\n    // Get DOM elements\n    this.statusEl = document.getElementById('status');\n    this.startBtn = document.getElementById('startBtn') as HTMLButtonElement;\n    this.stopBtn = document.getElementById('stopBtn') as HTMLButtonElement;\n    this.videoEl = document.getElementById('webcam') as HTMLVideoElement;\n    this.canvasEl = document.getElementById('overlay') as HTMLCanvasElement;\n    this.fpsEl = document.getElementById('fps');\n    this.loadingOverlay = document.getElementById('loadingOverlay');\n    this.loadingText = document.getElementById('loadingText');\n    this.progressFill = document.getElementById('progressFill');\n    this.gestureEl = document.getElementById('gesture');\n\n    // Validate required elements\n    if (!this.videoEl || !this.canvasEl) {\n      this.setError('Required DOM elements not found');\n      return;\n    }\n\n    // Set up button handlers\n    this.setupEventListeners();\n\n    // Update status\n    this.updateStatus('Ready - Click Start to begin');\n    this.state.isInitialized = true;\n  }\n\n  /**\n   * Set up event listeners.\n   */\n  private setupEventListeners(): void {\n    this.startBtn?.addEventListener('click', () => {\n      void this.start();\n    });\n\n    this.stopBtn?.addEventListener('click', () => {\n      this.stop();\n    });\n\n    // Handle page visibility changes\n    document.addEventListener('visibilitychange', () => {\n      if (document.hidden && this.state.isTracking) {\n        this.stop();\n      }\n    });\n  }\n\n  /**\n   * Show loading overlay with message and progress.\n   */\n  private showLoading(message: string, progress: number = 0): void {\n    if (this.loadingOverlay) {\n      this.loadingOverlay.classList.add('visible');\n    }\n    if (this.loadingText) {\n      this.loadingText.textContent = message;\n    }\n    if (this.progressFill) {\n      this.progressFill.style.width = `${progress}%`;\n    }\n  }\n\n  /**\n   * Hide loading overlay.\n   */\n  private hideLoading(): void {\n    if (this.loadingOverlay) {\n      this.loadingOverlay.classList.remove('visible');\n    }\n  }\n\n  /**\n   * Start tracking.\n   */\n  async start(): Promise<void> {\n    if (this.state.isTracking || !this.videoEl || !this.canvasEl) return;\n\n    try {\n      this.setButtonsEnabled(false, false);\n      this.showLoading('Initializing camera...', 10);\n      this.updateStatus('Initializing camera...');\n\n      // Initialize camera\n      await this.cameraPreview.initialize(this.videoEl);\n      this.showLoading('Camera ready', 30);\n\n      // Set canvas dimensions to match video\n      const { width, height } = this.cameraPreview.getDimensions();\n      this.debugOverlay.setDimensions(width, height);\n\n      // Initialize debug overlay\n      this.debugOverlay.initialize(this.canvasEl, this.fpsEl ?? undefined);\n\n      this.showLoading('Loading hand tracking model...', 40);\n      this.updateStatus('Loading hand tracking model...');\n\n      // Initialize hand tracker with progress callback\n      await this.handTracker.initialize(this.videoEl, (status, progress) => {\n        this.showLoading(status, 40 + (progress ?? 0) * 0.5);\n      });\n\n      this.showLoading('Starting tracking...', 95);\n\n      // Start the controller manager with hand tracking data\n      this.controllerManager.start(this.handTracker.hands$);\n\n      // Subscribe to control state updates\n      this.controllerManager.state$.subscribe({\n        next: (controlState) => {\n          this.updateControlStateDisplay(controlState);\n        },\n        error: (err) => {\n          console.error('Controller error:', err);\n        },\n      });\n\n      // Subscribe to hand tracking data for visual overlay\n      this.handTracker.hands$.subscribe({\n        next: (frame) => {\n          this.debugOverlay.draw(frame);\n        },\n        error: (err) => {\n          console.error('Hand tracking error:', err);\n          this.setError('Hand tracking error occurred');\n        },\n      });\n\n      // Start tracking\n      this.handTracker.start();\n\n      this.state.isTracking = true;\n      this.hideLoading();\n      this.updateStatus('Tracking', true);\n      this.setButtonsEnabled(false, true);\n    } catch (error) {\n      console.error('Failed to start:', error);\n      const message = error instanceof Error ? error.message : 'Unknown error';\n      this.hideLoading();\n      this.setError(message);\n      this.setButtonsEnabled(true, false);\n    }\n  }\n\n  /**\n   * Stop tracking.\n   */\n  stop(): void {\n    if (!this.state.isTracking) return;\n\n    this.controllerManager.stop();\n    this.handTracker.stop();\n    this.cameraPreview.stop();\n    this.debugOverlay.clear();\n\n    this.state.isTracking = false;\n    this.updateStatus('Stopped');\n    this.setButtonsEnabled(true, false);\n  }\n\n  /**\n   * Update control state display.\n   */\n  private updateControlStateDisplay(state: ControlState): void {\n    if (!this.gestureEl) return;\n\n    if (state.primaryHand) {\n      const gesture = state.primaryHand.gesture.type;\n      const confidence = Math.round(state.primaryHand.gesture.confidence * 100);\n      const openness = Math.round(state.primaryHand.openness.value * 100);\n      const fingers = state.primaryHand.fingers.extendedCount;\n\n      this.gestureEl.textContent = `Gesture: ${gesture} (${confidence}%) | Openness: ${openness}% | Fingers: ${fingers}`;\n      this.gestureEl.style.display = 'block';\n    } else {\n      this.gestureEl.textContent = 'No hand detected';\n      this.gestureEl.style.display = 'block';\n    }\n  }\n\n  /**\n   * Update status display.\n   */\n  private updateStatus(message: string, isTracking: boolean = false): void {\n    if (this.statusEl) {\n      this.statusEl.textContent = message;\n      this.statusEl.classList.toggle('tracking', isTracking);\n      this.statusEl.classList.toggle('error', false);\n    }\n  }\n\n  /**\n   * Set error state.\n   */\n  private setError(message: string): void {\n    this.state.error = message;\n    if (this.statusEl) {\n      this.statusEl.textContent = `Error: ${message}`;\n      this.statusEl.classList.add('error');\n      this.statusEl.classList.remove('tracking');\n    }\n  }\n\n  /**\n   * Enable/disable buttons.\n   */\n  private setButtonsEnabled(startEnabled: boolean, stopEnabled: boolean): void {\n    if (this.startBtn) {\n      this.startBtn.disabled = !startEnabled;\n    }\n    if (this.stopBtn) {\n      this.stopBtn.disabled = !stopEnabled;\n    }\n  }\n\n  /**\n   * Clean up resources.\n   */\n  dispose(): void {\n    this.stop();\n    this.controllerManager.reset();\n    this.handTracker.dispose();\n    this.cameraPreview.dispose();\n    this.debugOverlay.dispose();\n  }\n}\n\n// Initialize app when DOM is ready\n// Since we use type=\"module\", the script is deferred and DOM is already parsed\nconst app = new App();\napp.initialize();\n\n// Clean up on page unload\nwindow.addEventListener('beforeunload', () => {\n  app.dispose();\n});\n"],"names":["extendStatics","d","b","p","__extends","__","__values","o","s","m","__read","n","r","ar","e","error","__spreadArray","to","from","pack","l","isFunction","value","createErrorClass","createImpl","_super","instance","ctorFunc","UnsubscriptionError","errors","err","i","arrRemove","arr","item","index","Subscription","initialTeardown","e_1","_a","e_2","_b","_parentage","_parentage_1","_parentage_1_1","parent_1","e_1_1","initialFinalizer","_finalizers","_finalizers_1","_finalizers_1_1","finalizer","execFinalizer","e_2_1","teardown","parent","empty","EMPTY_SUBSCRIPTION","isSubscription","config","timeoutProvider","handler","timeout","args","_i","handle","reportUnhandledError","noop","errorContext","cb","Subscriber","destination","_this","EMPTY_OBSERVER","next","complete","SafeSubscriber","ConsumerObserver","partialObserver","handleUnhandledError","observerOrNext","defaultErrorHandler","observable","identity","x","pipeFromArray","fns","input","prev","fn","Observable","subscribe","operator","subscriber","isSubscriber","source","sink","promiseCtor","getPromiseCtor","resolve","reject","Symbol_observable","operations","isObserver","hasLift","operate","init","liftedSource","createOperatorSubscriber","onNext","onComplete","onError","onFinalize","OperatorSubscriber","shouldUnsubscribe","closed_1","ObjectUnsubscribedError","Subject","subject","AnonymousSubject","_c","observer","observers","hasError","isStopped","thrownError","BehaviorSubject","_value","subscription","map","project","thisArg","HandLandmark","HAND_CONNECTIONS","GestureType","createEmptyHandControlState","handId","createEmptyControlState","LANDMARKS_PER_HAND","LANDMARK_COLORS","CONNECTION_COLOR","LANDMARK_RADIUS","CONNECTION_WIDTH","DEFAULT_HAND_TRACKER_CONFIG","smoothPoint","current","previous","factor","LandmarkSmoother","bufferSize","__publicField","landmarkIndex","key","history","smoothed","landmarks","MEDIAPIPE_CDN_BASE","HANDS_SCRIPT_URL","loadingPromise","isLoaded","loadMediaPipeHands","onProgress","script","getMediaPipeFileLocator","file","HandTracker","videoElement","HandsConstructor","results","now","frameInterval","startTime","hands","handedness","handLandmarks","processingTime","frame","points","lm","DEFAULT_CAMERA_CONFIG","CameraPreview","errorMessage","track","DEFAULT_DEBUG_OVERLAY_CONFIG","FpsCalculator","first","elapsed","DebugOverlay","canvas","fpsElement","width","height","hand","start","end","p1","p2","point","y","color","wristIndex","thumbTipIndex","indexTipIndex","middleTipIndex","ringTipIndex","fps","DEFAULT_CONTROLLER_CONFIG","PositionController","state","updatedHands","activeHandIds","h","id","timestamp","handState","rawPosition","fingertipPosition","smoothedPosition","position","velocity","depth","rotation","palmLandmarks","sum","acc","landmark","alpha","dx","dy","currentTime","previousTime","dt","vx","vy","magnitude","avgZ","wrist","middleMcp","GestureController","handData","fingers","rawOpenness","smoothedOpenness","opennessDerivative","detectedGesture","duration","gesture","thumb","middle","ring","pinky","extendedCount","thumbTip","thumbIp","thumbMcp","tipToWrist","ipToWrist","mcpToWrist","finger","indices","mcp","pip","dip","tip","pipAngle","dipAngle","a","c","ba","bc","dotProduct","magnitudeBA","magnitudeBC","cosAngle","dz","normalized","openness","indexTip","DistanceController","measurements","smoothedMeasurements","avgHandSize","primaryLandmarks","secondaryLandmarks","handSize","distance","landmarks1","landmarks2","palm1","palm2","allLandmarks","sizes","middleTip","size","smooth","curr","ControllerManager","handFrames$","controller","deltaTime","base","override","App","message","progress","status","controlState","confidence","isTracking","startEnabled","stopEnabled","app"],"mappings":"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","x_google_ignoreList":[0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21]}